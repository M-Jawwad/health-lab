"use strict";(self.webpackChunkprism_health_lab=self.webpackChunkprism_health_lab||[]).push([[781],{3463:(j,J,m)=>{function n(p,o){if(o.length<p)throw new TypeError(p+" argument"+(p>1?"s":"")+" required, but only "+o.length+" present")}m.d(J,{Z:()=>n})},207:(j,J,m)=>{function n(p){if(null===p||!0===p||!1===p)return NaN;var o=Number(p);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}m.d(J,{Z:()=>n})},3530:(j,J,m)=>{m.d(J,{Z:()=>Z});var n=m(207),p=m(4513),o=m(3463);function Z(P,l){(0,o.Z)(2,arguments);var A=(0,p.Z)(P).getTime(),O=(0,n.Z)(l);return new Date(A+O)}},8226:(j,J,m)=>{m.d(J,{Z:()=>dt});var n=m(3463);function p(c){return(0,n.Z)(1,arguments),c instanceof Date||"object"==typeof c&&"[object Date]"===Object.prototype.toString.call(c)}var o=m(4513);function Z(c){if((0,n.Z)(1,arguments),!p(c)&&"number"!=typeof c)return!1;var _=(0,o.Z)(c);return!isNaN(Number(_))}var P={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function O(c){return function(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=_.width?String(_.width):c.defaultWidth,g=c.formats[d]||c.formats[c.defaultWidth];return g}}var c,Y={date:O({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:O({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:O({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},N={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function H(c){return function(_,d){var w,g=d||{};if("formatting"===(g.context?String(g.context):"standalone")&&c.formattingValues){var W=c.defaultFormattingWidth||c.defaultWidth,X=g.width?String(g.width):W;w=c.formattingValues[X]||c.formattingValues[W]}else{var K=c.defaultWidth,ee=g.width?String(g.width):c.defaultWidth;w=c.values[ee]||c.values[K]}return w[c.argumentCallback?c.argumentCallback(_):_]}}function z(c){return function(_){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=d.width,x=g&&c.matchPatterns[g]||c.matchPatterns[c.defaultMatchWidth],w=_.match(x);if(!w)return null;var ee,W=w[0],X=g&&c.parsePatterns[g]||c.parsePatterns[c.defaultParseWidth],K=Array.isArray(X)?ue(X,function(re){return re.test(W)}):_e(X,function(re){return re.test(W)});ee=c.valueCallback?c.valueCallback(K):K,ee=d.valueCallback?d.valueCallback(ee):ee;var Ce=_.slice(W.length);return{value:ee,rest:Ce}}}function _e(c,_){for(var d in c)if(c.hasOwnProperty(d)&&_(c[d]))return d}function ue(c,_){for(var d=0;d<c.length;d++)if(_(c[d]))return d}const Ue={code:"en-US",formatDistance:function(c,_,d){var g,x=P[c];return g="string"==typeof x?x:1===_?x.one:x.other.replace("{{count}}",_.toString()),null!=d&&d.addSuffix?d.comparison&&d.comparison>0?"in "+g:g+" ago":g},formatLong:Y,formatRelative:function(c,_,d,g){return N[c]},localize:{ordinalNumber:function(c,_){var d=Number(c),g=d%100;if(g>20||g<10)switch(g%10){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd"}return d+"th"},era:H({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:H({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(c){return c-1}}),month:H({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:H({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:H({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(c){return parseInt(c,10)}},function(_){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=_.match(c.matchPattern);if(!g)return null;var x=g[0],w=_.match(c.parsePattern);if(!w)return null;var W=c.valueCallback?c.valueCallback(w[0]):w[0];W=d.valueCallback?d.valueCallback(W):W;var X=_.slice(x.length);return{value:W,rest:X}}),era:z({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:z({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(c){return c+1}}),month:z({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:z({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:z({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var ie=m(207),Fe=m(3530);function ke(c,_){(0,n.Z)(2,arguments);var d=(0,ie.Z)(_);return(0,Fe.Z)(c,-d)}function v(c){(0,n.Z)(1,arguments);var _=1,d=(0,o.Z)(c),g=d.getUTCDay(),x=(g<_?7:0)+g-_;return d.setUTCDate(d.getUTCDate()-x),d.setUTCHours(0,0,0,0),d}function S(c){(0,n.Z)(1,arguments);var _=(0,o.Z)(c),d=_.getUTCFullYear(),g=new Date(0);g.setUTCFullYear(d+1,0,4),g.setUTCHours(0,0,0,0);var x=v(g),w=new Date(0);w.setUTCFullYear(d,0,4),w.setUTCHours(0,0,0,0);var W=v(w);return _.getTime()>=x.getTime()?d+1:_.getTime()>=W.getTime()?d:d-1}function u(c){(0,n.Z)(1,arguments);var _=S(c),d=new Date(0);d.setUTCFullYear(_,0,4),d.setUTCHours(0,0,0,0);var g=v(d);return g}var b=6048e5;function B(c,_){(0,n.Z)(1,arguments);var d=_||{},g=d.locale,x=g&&g.options&&g.options.weekStartsOn,w=null==x?0:(0,ie.Z)(x),W=null==d.weekStartsOn?w:(0,ie.Z)(d.weekStartsOn);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var X=(0,o.Z)(c),K=X.getUTCDay(),ee=(K<W?7:0)+K-W;return X.setUTCDate(X.getUTCDate()-ee),X.setUTCHours(0,0,0,0),X}function V(c,_){(0,n.Z)(1,arguments);var d=(0,o.Z)(c),g=d.getUTCFullYear(),x=_||{},w=x.locale,W=w&&w.options&&w.options.firstWeekContainsDate,X=null==W?1:(0,ie.Z)(W),K=null==x.firstWeekContainsDate?X:(0,ie.Z)(x.firstWeekContainsDate);if(!(K>=1&&K<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ee=new Date(0);ee.setUTCFullYear(g+1,0,K),ee.setUTCHours(0,0,0,0);var Ce=B(ee,_),re=new Date(0);re.setUTCFullYear(g,0,K),re.setUTCHours(0,0,0,0);var Ze=B(re,_);return d.getTime()>=Ce.getTime()?g+1:d.getTime()>=Ze.getTime()?g:g-1}function de(c,_){(0,n.Z)(1,arguments);var d=_||{},g=d.locale,x=g&&g.options&&g.options.firstWeekContainsDate,w=null==x?1:(0,ie.Z)(x),W=null==d.firstWeekContainsDate?w:(0,ie.Z)(d.firstWeekContainsDate),X=V(c,_),K=new Date(0);K.setUTCFullYear(X,0,W),K.setUTCHours(0,0,0,0);var ee=B(K,_);return ee}var He=6048e5;function $(c,_){for(var d=c<0?"-":"",g=Math.abs(c).toString();g.length<_;)g="0"+g;return d+g}const pe_y=function(c,_){var d=c.getUTCFullYear(),g=d>0?d:1-d;return $("yy"===_?g%100:g,_.length)},pe_M=function(c,_){var d=c.getUTCMonth();return"M"===_?String(d+1):$(d+1,2)},pe_d=function(c,_){return $(c.getUTCDate(),_.length)},pe_h=function(c,_){return $(c.getUTCHours()%12||12,_.length)},pe_H=function(c,_){return $(c.getUTCHours(),_.length)},pe_m=function(c,_){return $(c.getUTCMinutes(),_.length)},pe_s=function(c,_){return $(c.getUTCSeconds(),_.length)},pe_S=function(c,_){var d=_.length,g=c.getUTCMilliseconds();return $(Math.floor(g*Math.pow(10,d-3)),_.length)};function Qe(c,_){var d=c>0?"-":"+",g=Math.abs(c),x=Math.floor(g/60),w=g%60;if(0===w)return d+String(x);var W=_||"";return d+String(x)+W+$(w,2)}function Ye(c,_){return c%60==0?(c>0?"-":"+")+$(Math.abs(c)/60,2):be(c,_)}function be(c,_){var d=_||"",g=c>0?"-":"+",x=Math.abs(c);return g+$(Math.floor(x/60),2)+d+$(x%60,2)}const je={G:function(c,_,d){var g=c.getUTCFullYear()>0?1:0;switch(_){case"G":case"GG":case"GGG":return d.era(g,{width:"abbreviated"});case"GGGGG":return d.era(g,{width:"narrow"});case"GGGG":default:return d.era(g,{width:"wide"})}},y:function(c,_,d){if("yo"===_){var g=c.getUTCFullYear();return d.ordinalNumber(g>0?g:1-g,{unit:"year"})}return pe_y(c,_)},Y:function(c,_,d,g){var x=V(c,g),w=x>0?x:1-x;return"YY"===_?$(w%100,2):"Yo"===_?d.ordinalNumber(w,{unit:"year"}):$(w,_.length)},R:function(c,_){return $(S(c),_.length)},u:function(c,_){return $(c.getUTCFullYear(),_.length)},Q:function(c,_,d){var g=Math.ceil((c.getUTCMonth()+1)/3);switch(_){case"Q":return String(g);case"QQ":return $(g,2);case"Qo":return d.ordinalNumber(g,{unit:"quarter"});case"QQQ":return d.quarter(g,{width:"abbreviated",context:"formatting"});case"QQQQQ":return d.quarter(g,{width:"narrow",context:"formatting"});case"QQQQ":default:return d.quarter(g,{width:"wide",context:"formatting"})}},q:function(c,_,d){var g=Math.ceil((c.getUTCMonth()+1)/3);switch(_){case"q":return String(g);case"qq":return $(g,2);case"qo":return d.ordinalNumber(g,{unit:"quarter"});case"qqq":return d.quarter(g,{width:"abbreviated",context:"standalone"});case"qqqqq":return d.quarter(g,{width:"narrow",context:"standalone"});case"qqqq":default:return d.quarter(g,{width:"wide",context:"standalone"})}},M:function(c,_,d){var g=c.getUTCMonth();switch(_){case"M":case"MM":return pe_M(c,_);case"Mo":return d.ordinalNumber(g+1,{unit:"month"});case"MMM":return d.month(g,{width:"abbreviated",context:"formatting"});case"MMMMM":return d.month(g,{width:"narrow",context:"formatting"});case"MMMM":default:return d.month(g,{width:"wide",context:"formatting"})}},L:function(c,_,d){var g=c.getUTCMonth();switch(_){case"L":return String(g+1);case"LL":return $(g+1,2);case"Lo":return d.ordinalNumber(g+1,{unit:"month"});case"LLL":return d.month(g,{width:"abbreviated",context:"standalone"});case"LLLLL":return d.month(g,{width:"narrow",context:"standalone"});case"LLLL":default:return d.month(g,{width:"wide",context:"standalone"})}},w:function(c,_,d,g){var x=function(c,_){(0,n.Z)(1,arguments);var d=(0,o.Z)(c),g=B(d,_).getTime()-de(d,_).getTime();return Math.round(g/He)+1}(c,g);return"wo"===_?d.ordinalNumber(x,{unit:"week"}):$(x,_.length)},I:function(c,_,d){var g=function(c){(0,n.Z)(1,arguments);var _=(0,o.Z)(c),d=v(_).getTime()-u(_).getTime();return Math.round(d/b)+1}(c);return"Io"===_?d.ordinalNumber(g,{unit:"week"}):$(g,_.length)},d:function(c,_,d){return"do"===_?d.ordinalNumber(c.getUTCDate(),{unit:"date"}):pe_d(c,_)},D:function(c,_,d){var g=function(c){(0,n.Z)(1,arguments);var _=(0,o.Z)(c),d=_.getTime();_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0);var g=_.getTime();return Math.floor((d-g)/864e5)+1}(c);return"Do"===_?d.ordinalNumber(g,{unit:"dayOfYear"}):$(g,_.length)},E:function(c,_,d){var g=c.getUTCDay();switch(_){case"E":case"EE":case"EEE":return d.day(g,{width:"abbreviated",context:"formatting"});case"EEEEE":return d.day(g,{width:"narrow",context:"formatting"});case"EEEEEE":return d.day(g,{width:"short",context:"formatting"});case"EEEE":default:return d.day(g,{width:"wide",context:"formatting"})}},e:function(c,_,d,g){var x=c.getUTCDay(),w=(x-g.weekStartsOn+8)%7||7;switch(_){case"e":return String(w);case"ee":return $(w,2);case"eo":return d.ordinalNumber(w,{unit:"day"});case"eee":return d.day(x,{width:"abbreviated",context:"formatting"});case"eeeee":return d.day(x,{width:"narrow",context:"formatting"});case"eeeeee":return d.day(x,{width:"short",context:"formatting"});case"eeee":default:return d.day(x,{width:"wide",context:"formatting"})}},c:function(c,_,d,g){var x=c.getUTCDay(),w=(x-g.weekStartsOn+8)%7||7;switch(_){case"c":return String(w);case"cc":return $(w,_.length);case"co":return d.ordinalNumber(w,{unit:"day"});case"ccc":return d.day(x,{width:"abbreviated",context:"standalone"});case"ccccc":return d.day(x,{width:"narrow",context:"standalone"});case"cccccc":return d.day(x,{width:"short",context:"standalone"});case"cccc":default:return d.day(x,{width:"wide",context:"standalone"})}},i:function(c,_,d){var g=c.getUTCDay(),x=0===g?7:g;switch(_){case"i":return String(x);case"ii":return $(x,_.length);case"io":return d.ordinalNumber(x,{unit:"day"});case"iii":return d.day(g,{width:"abbreviated",context:"formatting"});case"iiiii":return d.day(g,{width:"narrow",context:"formatting"});case"iiiiii":return d.day(g,{width:"short",context:"formatting"});case"iiii":default:return d.day(g,{width:"wide",context:"formatting"})}},a:function(c,_,d){var x=c.getUTCHours()/12>=1?"pm":"am";switch(_){case"a":case"aa":return d.dayPeriod(x,{width:"abbreviated",context:"formatting"});case"aaa":return d.dayPeriod(x,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return d.dayPeriod(x,{width:"narrow",context:"formatting"});case"aaaa":default:return d.dayPeriod(x,{width:"wide",context:"formatting"})}},b:function(c,_,d){var x,g=c.getUTCHours();switch(x=12===g?"noon":0===g?"midnight":g/12>=1?"pm":"am",_){case"b":case"bb":return d.dayPeriod(x,{width:"abbreviated",context:"formatting"});case"bbb":return d.dayPeriod(x,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return d.dayPeriod(x,{width:"narrow",context:"formatting"});case"bbbb":default:return d.dayPeriod(x,{width:"wide",context:"formatting"})}},B:function(c,_,d){var x,g=c.getUTCHours();switch(x=g>=17?"evening":g>=12?"afternoon":g>=4?"morning":"night",_){case"B":case"BB":case"BBB":return d.dayPeriod(x,{width:"abbreviated",context:"formatting"});case"BBBBB":return d.dayPeriod(x,{width:"narrow",context:"formatting"});case"BBBB":default:return d.dayPeriod(x,{width:"wide",context:"formatting"})}},h:function(c,_,d){if("ho"===_){var g=c.getUTCHours()%12;return 0===g&&(g=12),d.ordinalNumber(g,{unit:"hour"})}return pe_h(c,_)},H:function(c,_,d){return"Ho"===_?d.ordinalNumber(c.getUTCHours(),{unit:"hour"}):pe_H(c,_)},K:function(c,_,d){var g=c.getUTCHours()%12;return"Ko"===_?d.ordinalNumber(g,{unit:"hour"}):$(g,_.length)},k:function(c,_,d){var g=c.getUTCHours();return 0===g&&(g=24),"ko"===_?d.ordinalNumber(g,{unit:"hour"}):$(g,_.length)},m:function(c,_,d){return"mo"===_?d.ordinalNumber(c.getUTCMinutes(),{unit:"minute"}):pe_m(c,_)},s:function(c,_,d){return"so"===_?d.ordinalNumber(c.getUTCSeconds(),{unit:"second"}):pe_s(c,_)},S:function(c,_){return pe_S(c,_)},X:function(c,_,d,g){var w=(g._originalDate||c).getTimezoneOffset();if(0===w)return"Z";switch(_){case"X":return Ye(w);case"XXXX":case"XX":return be(w);case"XXXXX":case"XXX":default:return be(w,":")}},x:function(c,_,d,g){var w=(g._originalDate||c).getTimezoneOffset();switch(_){case"x":return Ye(w);case"xxxx":case"xx":return be(w);case"xxxxx":case"xxx":default:return be(w,":")}},O:function(c,_,d,g){var w=(g._originalDate||c).getTimezoneOffset();switch(_){case"O":case"OO":case"OOO":return"GMT"+Qe(w,":");case"OOOO":default:return"GMT"+be(w,":")}},z:function(c,_,d,g){var w=(g._originalDate||c).getTimezoneOffset();switch(_){case"z":case"zz":case"zzz":return"GMT"+Qe(w,":");case"zzzz":default:return"GMT"+be(w,":")}},t:function(c,_,d,g){return $(Math.floor((g._originalDate||c).getTime()/1e3),_.length)},T:function(c,_,d,g){return $((g._originalDate||c).getTime(),_.length)}};function Le(c,_){switch(c){case"P":return _.date({width:"short"});case"PP":return _.date({width:"medium"});case"PPP":return _.date({width:"long"});case"PPPP":default:return _.date({width:"full"})}}function Be(c,_){switch(c){case"p":return _.time({width:"short"});case"pp":return _.time({width:"medium"});case"ppp":return _.time({width:"long"});case"pppp":default:return _.time({width:"full"})}}const Xe={p:Be,P:function(c,_){var w,d=c.match(/(P+)(p+)?/)||[],g=d[1],x=d[2];if(!x)return Le(c,_);switch(g){case"P":w=_.dateTime({width:"short"});break;case"PP":w=_.dateTime({width:"medium"});break;case"PPP":w=_.dateTime({width:"long"});break;case"PPPP":default:w=_.dateTime({width:"full"})}return w.replace("{{date}}",Le(g,_)).replace("{{time}}",Be(x,_))}};function et(c){var _=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()));return _.setUTCFullYear(c.getFullYear()),c.getTime()-_.getTime()}var tt=["D","DD"],nt=["YY","YYYY"];function ot(c){return-1!==tt.indexOf(c)}function it(c){return-1!==nt.indexOf(c)}function We(c,_,d){if("YYYY"===c)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(_,"`) for formatting years to the input `").concat(d,"`; see: https://git.io/fxCyr"));if("YY"===c)throw new RangeError("Use `yy` instead of `YY` (in `".concat(_,"`) for formatting years to the input `").concat(d,"`; see: https://git.io/fxCyr"));if("D"===c)throw new RangeError("Use `d` instead of `D` (in `".concat(_,"`) for formatting days of the month to the input `").concat(d,"`; see: https://git.io/fxCyr"));if("DD"===c)throw new RangeError("Use `dd` instead of `DD` (in `".concat(_,"`) for formatting days of the month to the input `").concat(d,"`; see: https://git.io/fxCyr"))}var at=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,st=/^'([^]*?)'?$/,ct=/''/g,lt=/[a-zA-Z]/;function dt(c,_,d){(0,n.Z)(2,arguments);var g=String(_),x=d||{},w=x.locale||Ue,W=w.options&&w.options.firstWeekContainsDate,X=null==W?1:(0,ie.Z)(W),K=null==x.firstWeekContainsDate?X:(0,ie.Z)(x.firstWeekContainsDate);if(!(K>=1&&K<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ee=w.options&&w.options.weekStartsOn,Ce=null==ee?0:(0,ie.Z)(ee),re=null==x.weekStartsOn?Ce:(0,ie.Z)(x.weekStartsOn);if(!(re>=0&&re<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var Ze=(0,o.Z)(c);if(!Z(Ze))throw new RangeError("Invalid time value");var ut=et(Ze),gt=ke(Ze,ut),$e={firstWeekContainsDate:K,weekStartsOn:re,locale:w,_originalDate:Ze},mt=g.match(rt).map(function(ae){var he=ae[0];return"p"===he||"P"===he?(0,Xe[he])(ae,w.formatLong,$e):ae}).join("").match(at).map(function(ae){if("''"===ae)return"'";var he=ae[0];if("'"===he)return _t(ae);var Oe=je[he];if(Oe)return!x.useAdditionalWeekYearTokens&&it(ae)&&We(ae,_,c),!x.useAdditionalDayOfYearTokens&&ot(ae)&&We(ae,_,c),Oe(gt,ae,w.localize,$e);if(he.match(lt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");return ae}).join("");return mt}function _t(c){return c.match(st)[1].replace(ct,"'")}},4513:(j,J,m)=>{m.d(J,{Z:()=>p});var n=m(3463);function p(o){(0,n.Z)(1,arguments);var Z=Object.prototype.toString.call(o);return o instanceof Date||"object"==typeof o&&"[object Date]"===Z?new Date(o.getTime()):"number"==typeof o||"[object Number]"===Z?new Date(o):(("string"==typeof o||"[object String]"===Z)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},945:(j,J,m)=>{m.d(J,{F:()=>Z});var n=m(7574),p=m(3637),o=m(6561);function Z(l=0,A=p.P){return(!(0,o.k)(l)||l<0)&&(l=0),(!A||"function"!=typeof A.schedule)&&(A=p.P),new n.y(O=>(O.add(A.schedule(P,l,{subscriber:O,counter:0,period:l})),O))}function P(l){const{subscriber:A,counter:O,period:D}=l;A.next(O),this.schedule({subscriber:A,counter:O+1,period:D},D)}},409:(j,J,m)=>{m.d(J,{o:()=>p});var n=m(7393);function p(P,l=!1){return A=>A.lift(new o(P,l))}class o{constructor(l,A){this.predicate=l,this.inclusive=A}call(l,A){return A.subscribe(new Z(l,this.predicate,this.inclusive))}}class Z extends n.L{constructor(l,A,O){super(l),this.predicate=A,this.inclusive=O,this.index=0}_next(l){const A=this.destination;let O;try{O=this.predicate(l,this.index++)}catch(D){return void A.error(D)}this.nextOrComplete(l,O)}nextOrComplete(l,A){const O=this.destination;Boolean(A)?O.next(l):(this.inclusive&&O.next(l),O.complete())}}},4458:(j,J,m)=>{m.d(J,{P:()=>Q});var n=m(665),p=m(2340),o=m(7716),Z=m(3633),P=m(5830),l=m(9344),A=m(1819),O=m(8583),D=m(4272);function M(F,C){1&F&&o._UZ(0,"img",23)}function e(F,C){if(1&F&&(o.TgZ(0,"ng-option",24),o._uU(1),o.qZA()),2&F){const f=C.$implicit;o.Q6J("value",f.device_type_id),o.xp6(1),o.Oqu(f.device_type)}}function Y(F,C){1&F&&(o.TgZ(0,"span",9),o._uU(1," Please select a device type "),o.qZA())}function L(F,C){if(1&F&&(o.TgZ(0,"ng-option",24),o._uU(1),o.qZA()),2&F){const f=C.$implicit;o.Q6J("value",f.device_id),o.xp6(1),o.Oqu(f.device_id)}}function N(F,C){1&F&&(o.TgZ(0,"span",9),o._uU(1," Please select atleast one device ID "),o.qZA())}function R(F,C){if(1&F&&(o.TgZ(0,"ng-option",24),o._uU(1),o.qZA()),2&F){const f=C.$implicit;o.Q6J("value",f),o.xp6(1),o.Oqu(f)}}function G(F,C){if(1&F){const f=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",27),o.TgZ(8,"ng-select",28),o.NdJ("ngModelChange",function(E){return o.CHM(f).$implicit.device_id=E}),o.YNc(9,R,2,2,"ng-option",11),o.qZA(),o.qZA(),o.TgZ(10,"td"),o.TgZ(11,"a",29),o.NdJ("click",function(){const E=o.CHM(f),U=E.$implicit,q=E.index;return o.oxw(2).onEditDevice(U,q)}),o._UZ(12,"i",30),o.qZA(),o.TgZ(13,"a",31),o.NdJ("click",function(){const U=o.CHM(f).index;return o.oxw(2).onDeleteDevice(U)}),o._UZ(14,"i",32),o.qZA(),o.qZA(),o.qZA()}if(2&F){const f=C.$implicit,y=C.index;o.xp6(2),o.Oqu(y+1),o.xp6(2),o.Oqu(f.device_type_name),o.xp6(2),o.Oqu(null==f.device_id?null:f.device_id.length),o.xp6(2),o.Q6J("multiple",!0)("ngModel",f.device_id)("appendTo","body"),o.xp6(1),o.Q6J("ngForOf",f.device_id)}}function H(F,C){if(1&F&&(o.TgZ(0,"table",25),o.TgZ(1,"thead"),o.TgZ(2,"tr"),o.TgZ(3,"td"),o._uU(4,"Sr #"),o.qZA(),o.TgZ(5,"td"),o._uU(6,"Device Type"),o.qZA(),o.TgZ(7,"td"),o._uU(8,"Selected Devices"),o.qZA(),o.TgZ(9,"td"),o._uU(10,"Device ID"),o.qZA(),o.TgZ(11,"td"),o._uU(12,"Actions"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"tbody"),o.YNc(14,G,15,7,"tr",26),o.qZA(),o.qZA()),2&F){const f=o.oxw();o.xp6(14),o.Q6J("ngForOf",f.selectedDevices)}}function fe(F,C){if(1&F){const f=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){return o.CHM(f),o.oxw().onSubmit()}),o._UZ(1,"i",34),o._uU(2," Save "),o.qZA()}if(2&F){const f=o.oxw();o.Q6J("disabled",f.loading||0===f.selectedDevices.length)}}let Q=(()=>{class F{constructor(f,y,E){this.modalRef=f,this.apiService=y,this.toastrService=E,this.loading=!1,this.readonly=!1,this.fromConsumer=!1,this.title="Allocate Devices",this.customerId=0,this.consumerId=0,this.data=null,this.deviceAllocationForm=new n.cw({id:new n.NI(null),device_type:new n.NI(null,[n.kI.required]),device_id:new n.NI(null,[n.kI.required])}),this.devices=[],this.deviceTypes=[],this.selectedDevices=[],this.selectedDeviceIDS=[]}ngOnInit(){this.getDeviceTypes()}getDeviceTypes(){this.loading=!0,this.apiService.get(this.fromConsumer?`${p.N.customerms}/consumer/consumer-device-type`:`${p.N.customerms}/customers/get-customer-hardware-device-type?usecase=${this.data.usecase}&package=${this.data.package}`).subscribe(y=>{this.deviceTypes=y.data.data,this.loading=!1},y=>{this.loading=!1,this.toastrService.error(y.error.message,"Error getting device types",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getConsumerDevices(){this.apiService.get(`${p.N.customerms}/consumer/consumer-device-type/`).subscribe(y=>{this.deviceTypes=y.data.data},y=>{this.toastrService.error(y.error.message,"Error getting device types",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onSelectDeviceType(f){var y;let E=this.deviceTypes.findIndex(q=>q.device_type_id===f),U=this.deviceTypes[E].id;null===(y=this.deviceAllocationForm.get("device_id"))||void 0===y||y.setValue(null),this.getDeviceIds(U)}getDeviceIds(f){this.apiService.get(this.fromConsumer?`${p.N.customerms}/consumer/consumer-inventory?device_type=${f}`:`${p.N.customerms}/customers/get-customer-hardware-inventory?usecase=${this.data.usecase}&package=${this.data.package}&device_type=${f}`).subscribe(E=>{this.devices=E.data.data,this.filterDeviceIds()},E=>{this.toastrService.error(E.error.message,"Error getting devices",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}filterDeviceIds(){if(this.devices.length>0&&this.selectedDevices.length>0)for(let f=0;f<this.selectedDevices.length;f++)if(this.selectedDevices[f].device_id.length>0)for(let y=0;y<this.selectedDevices[f].device_id.length;y++)if(this.selectedDevices[f].device_type==this.deviceAllocationForm.controls.device_type.value){let E=this.devices.findIndex(U=>U.device_id===this.selectedDevices[f].device_id[y]);-1!=E&&this.devices.splice(E,1)}}onSelectDeviceID(f){if(f.length>0)for(let E=0;E<f.length;E++)for(let U=0;U<this.devices.length;U++)f[E]==this.devices[U].device_id&&this.selectedDeviceIDS.push(this.devices[U]);var y=this.selectedDeviceIDS.filter(function(E,U,q){return U===q.indexOf(E)});this.selectedDeviceIDS=y}onAddDevice(){let f=this.deviceAllocationForm.value,y=f.id?"onEdit":"onAdd",E=!1;const U=this.deviceTypes.find(q=>q.device_type_id===f.device_type);if(f.id="onAdd"===y?this.selectedDevices.length+1:f.id,this.selectedDevices.find(q=>E=q.device_type===f.device_type),"onEdit"===y){const q=this.selectedDevices.findIndex(z=>z.id===f.id);-1!=q?this.selectedDevices.splice(q,1,{id:f.id,device_type_name:U.device_type,device_type:f.device_type,device_id:f.device_id}):this.selectedDevices.push({id:f.id,device_type_name:U.device_type,device_type:f.device_type,device_id:f.device_id})}else this.selectedDevices.push({id:f.id,device_type_name:U.device_type,device_type:f.device_type,device_id:f.device_id});this.deviceAllocationForm.reset()}onEditDevice(f,y){this.deviceAllocationForm.patchValue(f),this.selectedDevices.splice(y,1),this.filterDeviceIds()}onDeleteDevice(f){this.selectedDevices.splice(f,1)}onSubmit(){this.loading=!0;const f=this.fromConsumer?`${p.N.customerms}/consumer/consumer-hardware`:`${p.N.customerms}/customers/customer-hardware`;let y=[],E=null,U=null,q=[],z=[],_e=[],ue=[],ge=[];this.selectedDevices.forEach(te=>{let se=this.deviceTypes.findIndex(oe=>te.device_type===oe.device_type_id);E=this.deviceTypes[se].id,q=[],z=[],this.selectedDeviceIDS.forEach(oe=>{te.device_id.forEach(le=>{le===oe.device_id&&(U=oe.inventory_id,oe.inventory_id===U&&(z.push(oe.device_id),q.push(+oe.id)))})});var ce=q.filter(function(oe,le,xe){return le===xe.indexOf(oe)});q=ce;var ye=z.filter(function(oe,le,xe){return le===xe.indexOf(oe)});z=ye,y.push(this.fromConsumer?{device_type:E,inventory_list:q,inventory_device_ids:z}:{package:this.data.package,usecase:this.data.usecase,device_type:E,inventory_list:q,inventory_device_ids:z})}),y.forEach(te=>{_e.includes(te.device_type)||_e.push(te.device_type)});let me=[];_e.forEach(te=>{ge=[],ue=[],y.forEach(se=>{te===se.device_type&&(se.inventory_list.forEach(ce=>{ue.push(ce)}),se.inventory_device_ids.forEach(ce=>{ge.push(ce)}))}),me.push(this.fromConsumer?{device_type:te,inventory_list:ue,inventory_device_ids:ge}:{package:this.data.package,usecase:this.data.usecase,device_type:te,inventory_list:ue,inventory_device_ids:ge})});let ve=null;ve=this.fromConsumer?{consumer:this.consumerId,consumer_devices:me}:{customer:this.customerId,customer_devices:me},this.apiService.post(f,ve).subscribe(te=>{this.toastrService.success(te.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1,this.modalRef.close()},te=>{this.toastrService.error(te.error.message,"Error submitting devices",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1})}onCloseModal(){this.modalRef.close()}}return F.\u0275fac=function(f){return new(f||F)(o.Y36(Z.Kz),o.Y36(P.s),o.Y36(l._W))},F.\u0275cmp=o.Xpm({type:F,selectors:[["app-device-allocation"]],inputs:{customerId:"customerId",consumerId:"consumerId",data:"data"},decls:37,vars:16,consts:[["fxLayout","row wrap",1,"w-100-p","h-100-p","p-0",2,"position","relative"],[1,"w-100-p","modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%; z-index: 2;",4,"ngIf"],["fxFlex","100","fxLayout","row wrap",1,"modal-body",2,"height","calc(100% - 44px)"],["fxFlex","100","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start start",1,"h-92",3,"formGroup"],["fxFlex","45"],["for",""],[1,"text-danger"],["placeholder","Select device type","formControlName","device_type",3,"clearable","appendTo","change"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["placeholder","Select device id","formControlName","device_id",3,"multiple","clearable","readonly","appendTo","change"],["fxFlex",""],[1,"btn","btn-primary","h-36","lh-16","mt-28",3,"disabled","click"],[1,"ri-add-line"],["class","table",4,"ngIf"],["fxFlex","100",1,"mt-0"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit","class","btn btn-success btn-round mr-8",3,"disabled","click",4,"ngIf"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%","z-index","2"],[3,"value"],[1,"table"],[4,"ngFor","ngForOf"],["width","300"],["placeholder","Select device type",3,"multiple","ngModel","appendTo","ngModelChange"],["ngbTooltip","Edit",1,"btn","btn-icon","btn-sm","btn-primary","mr-8",2,"padding","3px",3,"click"],[1,"ri-pencil-line"],["ngbTooltip","Delete",1,"btn","btn-icon","btn-sm","btn-danger",2,"padding","3px",3,"click"],[1,"ri-subtract-line"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"]],template:function(f,y){1&f&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h4",2),o._uU(3),o.qZA(),o.TgZ(4,"button",3),o.NdJ("click",function(){return y.onCloseModal()}),o._uU(5,"\xd7"),o.qZA(),o.qZA(),o.YNc(6,M,1,0,"img",4),o.TgZ(7,"div",5),o.TgZ(8,"div",6),o.TgZ(9,"div",7),o.TgZ(10,"label",8),o._uU(11,"Device Type"),o.qZA(),o.TgZ(12,"span",9),o._uU(13,"*"),o.qZA(),o.TgZ(14,"ng-select",10),o.NdJ("change",function(U){return y.onSelectDeviceType(U)}),o.YNc(15,e,2,2,"ng-option",11),o.qZA(),o.YNc(16,Y,2,0,"span",12),o.qZA(),o.TgZ(17,"div",7),o.TgZ(18,"label",8),o._uU(19,"Device ID"),o.qZA(),o.TgZ(20,"span",9),o._uU(21,"*"),o.qZA(),o.TgZ(22,"ng-select",13),o.NdJ("change",function(U){return y.onSelectDeviceID(U)}),o.YNc(23,L,2,2,"ng-option",11),o.qZA(),o.YNc(24,N,2,0,"span",12),o.qZA(),o.TgZ(25,"div",14),o.TgZ(26,"button",15),o.NdJ("click",function(){return y.onAddDevice()}),o._UZ(27,"i",16),o.TgZ(28,"span"),o._uU(29,"Add"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(30,H,15,1,"table",17),o._UZ(31,"hr",18),o.TgZ(32,"div",19),o.YNc(33,fe,3,1,"button",20),o.TgZ(34,"button",21),o.NdJ("click",function(){return y.onCloseModal()}),o._UZ(35,"i",22),o._uU(36," Discard "),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&f&&(o.xp6(3),o.Oqu(y.title),o.xp6(3),o.Q6J("ngIf",y.loading),o.xp6(2),o.Q6J("formGroup",y.deviceAllocationForm),o.xp6(6),o.Q6J("clearable",!1)("appendTo","body"),o.xp6(1),o.Q6J("ngForOf",y.deviceTypes),o.xp6(1),o.Q6J("ngIf",y.deviceAllocationForm.controls.device_type.hasError("required")&&y.deviceAllocationForm.controls.device_type.touched),o.xp6(6),o.Q6J("multiple",!0)("clearable",!1)("readonly",!y.deviceAllocationForm.controls.device_type.value)("appendTo","body"),o.xp6(1),o.Q6J("ngForOf",y.devices),o.xp6(1),o.Q6J("ngIf",y.deviceAllocationForm.controls.device_id.hasError("required")&&y.deviceAllocationForm.controls.device_id.touched),o.xp6(2),o.Q6J("disabled",!y.deviceAllocationForm.valid),o.xp6(4),o.Q6J("ngIf",y.selectedDevices.length>0),o.xp6(3),o.Q6J("ngIf",!y.readonly))},directives:[A.xw,O.O5,A.yH,A.SQ,A.Wh,n.JL,n.sg,D.w9,n.JJ,n.u,O.sg,D.xv,n.On,Z._L],styles:[".drp-container .ng-select-container{box-shadow:none;border-radius:0!important}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),F})()},7050:(j,J,m)=>{m.d(J,{p:()=>e});var n=m(665),p=m(2340),o=m(7716),Z=m(3633),P=m(5830),l=m(9344),A=m(1819),O=m(8583);function D(Y,L){1&Y&&o._UZ(0,"img",17)}function M(Y,L){1&Y&&(o.TgZ(0,"span",9),o._uU(1," Please provide frequency of device. "),o.qZA())}let e=(()=>{class Y{constructor(N,R,G){this.modalRef=N,this.apiService=R,this.toastrService=G,this.title="Edit Frequency",this.loading=!1,this.readonly=!1,this.data=null,this.device_frequency=new n.NI(null,[n.kI.required])}ngOnInit(){this.data&&this.device_frequency.setValue(this.data.frequency)}onSubmit(){this.loading=!0;let N=this.data,G={device_type:N.device_type,customer_allocation_id:N.customer_allocation,inventory_id:N.inventory,customer:N.customer,frequency:this.device_frequency.value};this.apiService.patch(`${p.N.customerms}/customers/customer-hardware-frequency`,G).subscribe(H=>{this.loading=!1,this.changeFrequency(G)},H=>{this.loading=!1,this.toastrService.error(H.error.message,"Error updating frequency of device",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}changeFrequency(N){this.loading=!0,this.apiService.get(`${p.N.AssetbaseUrl}/am/sendActionToDevice/?imei=${this.data.device_id}&action=updateFrequency&frequency=${N.frequency}`).subscribe(G=>{this.loading=!1,this.modalRef.close()},G=>{this.loading=!1,this.toastrService.error("Error updating device frequency",G.error.message,{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onCloseModal(){this.modalRef.close()}}return Y.\u0275fac=function(N){return new(N||Y)(o.Y36(Z.Kz),o.Y36(P.s),o.Y36(l._W))},Y.\u0275cmp=o.Xpm({type:Y,selectors:[["app-device-configuration"]],decls:25,vars:4,consts:[["fxLayout","row wrap",1,"w-100-p","p-0",2,"position","relative"],["src","/assets/images/block-loader.gif","alt","Loading","width","100px","height","100px","style","position: absolute; top: 30%; left: 38%; z-index: 1;",4,"ngIf"],[1,"w-100-p","modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["fxFlex","100","fxLayout","row wrap",1,"modal-body"],["fxFlex","100"],[1,"form-group"],["for",""],[1,"text-danger"],["type","number","min","1","placeholder","Enter device frequency","required","",1,"form-control",3,"formControl"],["class","text-danger",4,"ngIf"],["fxFlex","100","fxLayoutGap","8px",1,"text-center"],[1,"btn","btn-success","btn-round",3,"click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-fill"],["src","/assets/images/block-loader.gif","alt","Loading","width","100px","height","100px",2,"position","absolute","top","30%","left","38%","z-index","1"]],template:function(N,R){1&N&&(o.TgZ(0,"div",0),o.YNc(1,D,1,0,"img",1),o.TgZ(2,"div",2),o.TgZ(3,"h4",3),o._uU(4),o.qZA(),o.TgZ(5,"button",4),o.NdJ("click",function(){return R.onCloseModal()}),o._uU(6,"\xd7"),o.qZA(),o.qZA(),o.TgZ(7,"div",5),o.TgZ(8,"div",6),o.TgZ(9,"div",7),o.TgZ(10,"label",8),o._uU(11,"Set Frequency"),o.qZA(),o.TgZ(12,"span",9),o._uU(13,"*"),o.qZA(),o._UZ(14,"input",10),o.YNc(15,M,2,0,"span",11),o.qZA(),o.qZA(),o.TgZ(16,"div",12),o.TgZ(17,"button",13),o.NdJ("click",function(){return R.onSubmit()}),o._UZ(18,"i",14),o.TgZ(19,"span"),o._uU(20,"Update"),o.qZA(),o.qZA(),o.TgZ(21,"button",15),o.NdJ("click",function(){return R.onCloseModal()}),o._UZ(22,"i",16),o.TgZ(23,"span"),o._uU(24,"Cancel"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&N&&(o.xp6(1),o.Q6J("ngIf",R.loading),o.xp6(3),o.Oqu(R.title),o.xp6(10),o.Q6J("formControl",R.device_frequency),o.xp6(1),o.Q6J("ngIf",R.device_frequency.hasError("required")&&R.device_frequency.touched))},directives:[A.xw,O.O5,A.yH,n.qQ,n.wV,n.Fj,n.Q7,n.JJ,n.oH,A.SQ],styles:[".table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),Y})()},3781:(j,J,m)=>{m.r(J),m.d(J,{CustomerModule:()=>ao});var n=m(8583),p=m(665),o=m(5566),Z=m(3633),P=m(4272),l=m(5651),A=m(9788),O=m(5297),D=m(4330),M=m(2340),e=m(7716),Y=m(5830),L=m(9344),N=m(1819),R=m(8030),G=m(799),H=m(107),fe=m(5585),Q=m(8763);function F(i,s){1&i&&e._UZ(0,"img",3)}function C(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide name of company "),e.qZA())}function f(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Company name must be less than 60 characters "),e.qZA())}function y(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function E(i,s){if(1&i&&(e.ynx(0),e.YNc(1,C,2,0,"span",17),e.YNc(2,f,2,0,"span",17),e.YNc(3,y,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.company_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.company_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.company_name.hasError("whitespace"))}}function U(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide group name. "),e.qZA())}function q(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Group name must be less than 60 characters "),e.qZA())}function z(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function _e(i,s){if(1&i&&(e.ynx(0),e.YNc(1,U,2,0,"span",17),e.YNc(2,q,2,0,"span",17),e.YNc(3,z,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.group_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.group_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.group_name.hasError("whitespace"))}}function ue(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide phone no. "),e.qZA())}function ge(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Phone no must be of 8 digits. "),e.qZA())}function me(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function ve(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ue,2,0,"span",17),e.YNc(2,ge,2,0,"span",17),e.YNc(3,me,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.phone_number.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.phone_number.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.phone_number.hasError("whitespace"))}}function te(i,s){if(1&i&&(e.TgZ(0,"ng-option",29),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function se(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please select industry. "),e.qZA())}function ce(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide company's website. "),e.qZA())}function ye(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Website must be less than 60 characters "),e.qZA())}function oe(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function le(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ce,2,0,"span",17),e.YNc(2,ye,2,0,"span",17),e.YNc(3,oe,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.website.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.website.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.website.hasError("whitespace"))}}function xe(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide email "),e.qZA())}function Pe(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide valid email "),e.qZA())}function Me(i,s){if(1&i&&(e.ynx(0),e.YNc(1,xe,2,0,"span",17),e.YNc(2,Pe,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.email.getError("pattern"))}}function De(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide CR Number. "),e.qZA())}function Ie(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," CR Number must be less than 60 characters "),e.qZA())}function Je(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function qe(i,s){if(1&i&&(e.ynx(0),e.YNc(1,De,2,0,"span",17),e.YNc(2,Ie,2,0,"span",17),e.YNc(3,Je,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.cr_number.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.cr_number.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.cr_number.hasError("whitespace"))}}function Ue(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide first name. "),e.qZA())}function ie(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," First name must be of less than 60 characters "),e.qZA())}function Fe(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function ke(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ue,2,0,"span",17),e.YNc(2,ie,2,0,"span",17),e.YNc(3,Fe,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.first_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.first_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.first_name.hasError("whitespace"))}}function Ee(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide last name. "),e.qZA())}function Ne(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Last name must be of less than 60 characters "),e.qZA())}function v(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function S(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ee,2,0,"span",17),e.YNc(2,Ne,2,0,"span",17),e.YNc(3,v,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.last_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.last_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.last_name.hasError("whitespace"))}}function u(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide Q-Id or Passport. "),e.qZA())}function b(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Q-Id/Passport must be of less than 60 characters "),e.qZA())}function I(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function B(i,s){if(1&i&&(e.ynx(0),e.YNc(1,u,2,0,"span",17),e.YNc(2,b,2,0,"span",17),e.YNc(3,I,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.qid_passport.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.qid_passport.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.qid_passport.hasError("whitespace"))}}function V(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide email "),e.qZA())}function de(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide valid email "),e.qZA())}function He(i,s){if(1&i&&(e.ynx(0),e.YNc(1,V,2,0,"span",17),e.YNc(2,de,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_email.getError("pattern"))}}function Re(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide phone no. "),e.qZA())}function $(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Phone no must be of 8 digits. "),e.qZA())}function Ge(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function pe(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Re,2,0,"span",17),e.YNc(2,$,2,0,"span",17),e.YNc(3,Ge,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_phone_number.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_phone_number.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_phone_number.hasError("whitespace"))}}function Te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",31),e.TgZ(2,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onSubmit()}),e._UZ(3,"i",33),e._uU(4),e.qZA(),e.TgZ(5,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).generalForm.reset()}),e._UZ(6,"i",35),e._uU(7," Clear "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.generalForm.valid||t.loading),e.xp6(2),e.hij(" ",null!=t.data&&t.data.id?"Update":"Save"," ")}}function Ke(i,s){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"form",5),e.TgZ(2,"div",6),e.TgZ(3,"label",7),e._uU(4,"Company Name "),e.TgZ(5,"span",8),e._uU(6,"*"),e.qZA(),e.qZA(),e._UZ(7,"input",9),e.YNc(8,E,4,3,"ng-container",10),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",7),e._uU(11,"Group Name"),e.qZA(),e.TgZ(12,"span",8),e._uU(13,"*"),e.qZA(),e._UZ(14,"input",11),e.YNc(15,_e,4,3,"ng-container",10),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"label",7),e._uU(18,"Phone Number"),e.qZA(),e.TgZ(19,"span",8),e._uU(20,"*"),e.qZA(),e.TgZ(21,"div",12),e.TgZ(22,"span",13),e._uU(23,"+974"),e.qZA(),e._UZ(24,"input",14),e.qZA(),e.YNc(25,ve,4,3,"ng-container",10),e.qZA(),e.TgZ(26,"div",6),e.TgZ(27,"label",7),e._uU(28,"Industry"),e.TgZ(29,"span",8),e._uU(30,"*"),e.qZA(),e.qZA(),e.TgZ(31,"ng-select",15),e.YNc(32,te,2,2,"ng-option",16),e.qZA(),e.YNc(33,se,2,0,"span",17),e.qZA(),e.TgZ(34,"div",6),e.TgZ(35,"label",7),e._uU(36,"Website"),e.TgZ(37,"span",8),e._uU(38,"*"),e.qZA(),e.qZA(),e._UZ(39,"input",18),e.YNc(40,le,4,3,"ng-container",10),e.qZA(),e.TgZ(41,"div",6),e.TgZ(42,"label",7),e._uU(43,"Email"),e.qZA(),e.TgZ(44,"span",8),e._uU(45,"*"),e.qZA(),e._UZ(46,"input",19),e.YNc(47,Me,3,2,"ng-container",10),e.qZA(),e.TgZ(48,"div",6),e.TgZ(49,"label",7),e._uU(50,"CR Number"),e.TgZ(51,"span",8),e._uU(52,"*"),e.qZA(),e.qZA(),e._UZ(53,"input",20),e.YNc(54,qe,4,3,"ng-container",10),e.qZA(),e.TgZ(55,"h4",21),e._uU(56,"Spoc / Contact Details"),e.qZA(),e.TgZ(57,"div",6),e.TgZ(58,"label",7),e._uU(59,"First Name"),e.TgZ(60,"span",8),e._uU(61,"*"),e.qZA(),e.qZA(),e._UZ(62,"input",22),e.YNc(63,ke,4,3,"ng-container",10),e.qZA(),e.TgZ(64,"div",6),e.TgZ(65,"label",7),e._uU(66,"Last Name"),e.TgZ(67,"span",8),e._uU(68,"*"),e.qZA(),e.qZA(),e._UZ(69,"input",23),e.YNc(70,S,4,3,"ng-container",10),e.qZA(),e.TgZ(71,"div",6),e.TgZ(72,"label",7),e._uU(73,"Q-ID / Passport"),e.TgZ(74,"span",8),e._uU(75,"*"),e.qZA(),e.qZA(),e._UZ(76,"input",24),e.YNc(77,B,4,3,"ng-container",10),e.qZA(),e.TgZ(78,"div",6),e.TgZ(79,"label",7),e._uU(80,"Email"),e.TgZ(81,"span",8),e._uU(82,"*"),e.qZA(),e.qZA(),e._UZ(83,"input",25),e.YNc(84,He,3,2,"ng-container",10),e.qZA(),e.TgZ(85,"div",6),e.TgZ(86,"label",7),e._uU(87,"Phone Number"),e.TgZ(88,"span",8),e._uU(89,"*"),e.qZA(),e.qZA(),e.TgZ(90,"div",12),e.TgZ(91,"span",26),e._uU(92,"+974"),e.qZA(),e._UZ(93,"input",27),e.qZA(),e.YNc(94,pe,4,3,"ng-container",10),e.qZA(),e.qZA(),e.YNc(95,Te,8,2,"div",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.generalForm),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.company_name.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.group_name.dirty),e.xp6(9),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.phone_number.dirty),e.xp6(6),e.Q6J("readonly",t.readonly)("clearable",!1),e.xp6(1),e.Q6J("ngForOf",t.industries),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.industry.hasError("required")&&t.generalForm.controls.industry.touched),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.website.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.email.invalid&&t.generalForm.controls.email.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.cr_number.dirty),e.xp6(8),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.first_name.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.last_name.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.qid_passport.dirty),e.xp6(6),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_email.invalid&&t.generalForm.controls.spoc_email.dirty),e.xp6(9),e.Q6J("readonly",t.readonly),e.xp6(1),e.Q6J("ngIf",t.generalForm.controls.spoc_phone_number.dirty),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}function Qe(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide document name. "),e.qZA())}function Ye(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Document name must be less than of 60 characters "),e.qZA())}function be(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function je(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Qe,2,0,"span",17),e.YNc(2,Ye,2,0,"span",17),e.YNc(3,be,2,0,"span",17),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.uploadDocsForm.controls.document_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.uploadDocsForm.controls.document_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.uploadDocsForm.controls.document_name.hasError("whitespace"))}}function Le(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide document type. "),e.qZA())}function Be(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1,"*"),e.qZA())}function ze(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please provide description. "),e.qZA())}function Ve(i,s){1&i&&(e.TgZ(0,"span",8),e._uU(1," Please upload document. "),e.qZA())}function Xe(i,s){if(1&i&&(e.TgZ(0,"span",8),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.imageError)}}function et(i,s){1&i&&(e.TgZ(0,"th"),e._uU(1,"Actions"),e.qZA())}function tt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td",50),e.TgZ(1,"a",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).onEditDoc(r)}),e._UZ(2,"i",52),e.qZA(),e.TgZ(3,"a",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).onRemoveDoc(r)}),e._UZ(4,"i",54),e.qZA(),e.TgZ(5,"a",55),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).onViewDoc(r)}),e._UZ(6,"i",56),e.qZA(),e.qZA()}}function nt(i,s){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.YNc(10,tt,7,0,"td",49),e.qZA()),2&i){const t=s.$implicit,a=s.even,r=s.index,h=e.oxw(3);e.ekj("even",a),e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t.document_name),e.xp6(2),e.Oqu(e.lcZ(7,7,t.document_type)),e.xp6(3),e.Oqu(t.description),e.xp6(1),e.Q6J("ngIf",!h.readonly)}}function ot(i,s){if(1&i&&(e.ynx(0),e.YNc(1,nt,11,9,"tr",48),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedDocs)}}function it(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr",57),e._uU(2," No record found "),e.qZA(),e.BQk())}function We(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",31),e.TgZ(2,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).uploadDoc()}),e._UZ(3,"i",33),e._uU(4),e.qZA(),e.TgZ(5,"button",34),e.NdJ("click",function(){e.CHM(t),e.oxw();const r=e.MAs(37);return e.oxw().uploadDocsForm.reset(),r.value=""}),e._UZ(6,"i",35),e._uU(7," Clear "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.uploadDocsForm.valid||t.loading),e.xp6(2),e.hij(" ",t.uploadDocsForm.controls.id.value?"Update":"Save"," ")}}function at(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"form",5),e.TgZ(2,"div",36),e.TgZ(3,"div",6),e.TgZ(4,"label",7),e._uU(5,"Document Name"),e.TgZ(6,"span",8),e._uU(7,"*"),e.qZA(),e.qZA(),e._UZ(8,"input",37),e.YNc(9,je,4,3,"ng-container",10),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"label",7),e._uU(12,"Document Type"),e.TgZ(13,"span",8),e._uU(14,"*"),e.qZA(),e.qZA(),e.TgZ(15,"ng-select",38),e.TgZ(16,"ng-option",39),e._uU(17,"Passport"),e.qZA(),e.TgZ(18,"ng-option",40),e._uU(19,"Qatar ID"),e.qZA(),e.TgZ(20,"ng-option",41),e._uU(21,"Contract"),e.qZA(),e.TgZ(22,"ng-option",42),e._uU(23,"Others"),e.qZA(),e.qZA(),e.YNc(24,Le,2,0,"span",17),e.qZA(),e.TgZ(25,"div",6),e.TgZ(26,"label",7),e._uU(27,"Description"),e.qZA(),e.YNc(28,Be,2,0,"span",17),e._UZ(29,"input",43),e.YNc(30,ze,2,0,"span",17),e.qZA(),e.TgZ(31,"div",6),e.TgZ(32,"label",7),e._uU(33,"Upload File"),e.qZA(),e.TgZ(34,"span",8),e._uU(35,"* (Max 5MB/.jpg.png.pdf)"),e.qZA(),e.TgZ(36,"input",44,45),e.NdJ("change",function(r){return e.CHM(t),e.oxw().onImageChanged(r)}),e.qZA(),e.YNc(38,Ve,2,0,"span",17),e.YNc(39,Xe,2,1,"span",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"h4",21),e._uU(41,"Uploaded Document"),e.qZA(),e.TgZ(42,"div",46),e.TgZ(43,"table",47),e.TgZ(44,"thead"),e.TgZ(45,"tr"),e.TgZ(46,"th"),e._uU(47,"Sr #"),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Document Name"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Document Type"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Description"),e.qZA(),e.YNc(54,et,2,0,"th",10),e.qZA(),e.qZA(),e.TgZ(55,"tbody"),e.YNc(56,ot,2,1,"ng-container",10),e.YNc(57,it,3,0,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.YNc(58,We,8,2,"div",28),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.uploadDocsForm),e.xp6(7),e.Q6J("readonly",t.readonly)("required",t.uploadDocsForm.controls.document_file.value),e.xp6(1),e.Q6J("ngIf",t.uploadDocsForm.controls.document_name.dirty),e.xp6(6),e.Q6J("readonly",t.readonly)("clearable",!1),e.xp6(9),e.Q6J("ngIf",t.uploadDocsForm.controls.document_type.hasError("required")&&t.uploadDocsForm.controls.document_type.touched),e.xp6(4),e.Q6J("ngIf","others"===t.docType),e.xp6(1),e.Q6J("readonly",t.readonly)("required","others"===t.docType),e.xp6(1),e.Q6J("ngIf",t.uploadDocsForm.controls.description.hasError("required")&&t.uploadDocsForm.controls.description.touched),e.xp6(6),e.Q6J("disabled",t.readonly),e.xp6(2),e.Q6J("ngIf",t.submitted),e.xp6(1),e.Q6J("ngIf",t.imageError),e.xp6(15),e.Q6J("ngIf",!t.readonly),e.xp6(2),e.Q6J("ngIf",t.selectedDocs.length>0),e.xp6(1),e.Q6J("ngIf",0===t.selectedDocs.length),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}let rt=(()=>{class i{constructor(t,a,r){this.modalRef=t,this.apiService=a,this.toastrService=r,this.docType=null,this.title="Add Feature",this.loading=!1,this.readonly=!1,this.showGeneralDetails=!0,this.showUploadDocs=!1,this.customerId=0,this.submitted=!1,this.signals=new e.vpe,this.generalForm=new p.cw({id:new p.NI(null),company_name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),group_name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),country_code:new p.NI("+974"),phone_number:new p.NI(null,[p.kI.required,p.kI.minLength(8),H.d.noWhiteSpace]),industry:new p.NI(null,[p.kI.required]),website:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),email:new p.NI(null,[p.kI.required,p.kI.pattern("^[a-zA-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]),cr_number:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),first_name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),last_name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),spoc_phone_number:new p.NI(null,[p.kI.required,p.kI.minLength(8),H.d.noWhiteSpace]),qid_passport:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),spoc_email:new p.NI(null,[p.kI.required,p.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])}),this.uploadDocsForm=new p.cw({id:new p.NI(null),document_name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]),document_type:new p.NI(null,[p.kI.required]),description:new p.NI(null),document_file:new p.NI(null),doc_to_show:new p.NI(null)}),this.data=null,this.selectedDocs=[],this.selectedImage=null,this.imageError="",this.imageLoading=!1,this.industries=[{id:1,name:"Aerospace"},{id:2,name:"Transport"},{id:3,name:"Telecommunication"},{id:4,name:"Agriculture"},{id:5,name:"Construction"},{id:6,name:"Pharmaceutical"},{id:7,name:"Food"},{id:8,name:"Entertainment"},{id:9,name:"Manufacturing"},{id:10,name:"Electronics "}]}ngOnInit(){var t;this.showGeneralDetails&&this.customerId&&this.getGeneralDetails(),this.showUploadDocs&&this.getDocuments(),null===(t=this.uploadDocsForm.get("document_type"))||void 0===t||t.valueChanges.pipe().subscribe(a=>{this.docType=a&&"others"===a?a:null})}getGeneralDetails(){this.signals.emit({loading:!0}),this.apiService.get(`${M.N.customerms}/customers/?customer=${this.customerId}`).subscribe(a=>{this.data=a.data.data[0];const r=a.data.data[0].phone_number;r.includes("+974")&&(this.data.phone_number=r.replace("+974","")),this.generalForm.patchValue(this.data);let h=this.data.customer_spoc_details[0];h.spoc_phone_number.includes("+974")&&(h.spoc_phone_number=r.replace("+974","")),this.generalForm.patchValue(h),this.signals.emit({loading:!1})},a=>{this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting general details",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onSubmit(){this.signals.emit({loading:!0});const t=`${M.N.customerms}/customers/`,a=this.generalForm.value;a.phone_number.toString().includes("+974")||(a.phone_number=a.country_code+a.phone_number),a.spoc_phone_number.toString().includes("+974")||(a.spoc_phone_number=a.country_code+a.spoc_phone_number),delete a.country_code;let T=fe.Z.removeWhiteSpaces(a);this.data&&this.data.id?(T.id=this.data.id,this.updateGeneralDetails(t,T)):this.createGeneralDetails(t,T)}createGeneralDetails(t,a){this.apiService.post(t,a).subscribe(r=>{this.data=r.data,this.signals.emit({id:this.data.id,activeId:"ud",loading:!1}),this.toastrService.success(r.message,"General details added successfully",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error creating general details",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}updateGeneralDetails(t,a){this.apiService.patch(t,a).subscribe(r=>{this.data=r.data,this.signals.emit({id:this.data.id,loading:!1}),this.getGeneralDetails(),this.toastrService.success(r.message,"General details successfully updated",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error updating general details",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getDocuments(){this.signals.emit({loading:!0}),this.apiService.get(`${M.N.customerms}/customers/customer-document?customer=${this.customerId}`).subscribe(a=>{this.signals.emit({loading:!1}),this.selectedDocs=a.data.data},a=>{this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting doucments",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}chooseImage(){var t;null===(t=document.getElementById("fileInput"))||void 0===t||t.click()}onImageChanged(t){var a,r;let h;this.imageLoading=!0,h=t.target.files[0],h&&h.size/1024>=5120?this.imageError="File size is more than 5MB. Upload a valid file":(this.imageError="",h=t.target.files[0],null===(a=this.uploadDocsForm.get("document_file"))||void 0===a||a.setValue(h),null===(r=this.uploadDocsForm.get("document_name"))||void 0===r||r.markAsTouched(),this.submitted=!1)}readImageURL(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=r=>{var h;this.selectedImage=null==r?void 0:r.target.result,null===(h=this.uploadDocsForm.get("doc_to_show"))||void 0===h||h.setValue(this.selectedImage)},this.imageLoading=!1,a.readAsDataURL(t.files[0])}}uploadDoc(){if(console.log("this.uploadDocsForm.value;===",this.uploadDocsForm.value),null==this.uploadDocsForm.value.document_file)return void(this.submitted=!0);this.signals.emit({loading:!0});let t=`${M.N.customerms}/customers/customer-document`,a=this.uploadDocsForm.value;a.customer=this.customerId,delete a.doc_to_show;let r=a.document_file;"string"==typeof r&&r.includes("https")&&delete a.document_file;let h=this.convertToFormData(a);a.id?this.updateDocument(t,h):this.uploadDocument(t,h)}convertToFormData(t){let a=new FormData;for(let r in t)a.append(r,t[r]);return a}uploadDocument(t,a){this.apiService.post(t,a).subscribe(r=>{this.uploadDocsForm.reset(),this.data=r.data,this.signals.emit({loading:!1,activeId:"pkg"}),this.getDocuments()},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error uploading document",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}updateDocument(t,a){this.apiService.patch(t,a).subscribe(r=>{this.uploadDocsForm.reset(),this.signals.emit({loading:!1}),this.toastrService.success(r.message,"Document successfully updated",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getDocuments()},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error updating document",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onEditDoc(t){this.uploadDocsForm.patchValue(t)}onViewDoc(t){console.log("ev ",t),this.modalRef.open(Q.m,{size:"md",scrollable:!0}).componentInstance.imgSource=t.document_file}onRemoveDoc(t){let a=`${M.N.customerms}/customers/customer-document?document_id=${t.id}`;G.c.warn("Are you sure?","You want to delete this document","Yes").subscribe(r=>{r.positive&&(this.signals.emit({loading:!0}),this.apiService.delete(a).subscribe(h=>{this.signals.emit({loading:!1}),this.toastrService.success(h.message,"Document successfully deleted",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getDocuments()},h=>{this.signals.emit({loading:!1}),this.toastrService.error(h.error.message,"Error deleting document",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})}))})}onCloseModel(){this.generalForm.reset()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.FF),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-detail"]],inputs:{readonly:"readonly",showGeneralDetails:"showGeneralDetails",showUploadDocs:"showUploadDocs",customerId:"customerId",data:"data"},outputs:{signals:"signals"},decls:4,vars:3,consts:[["fxLayout","row wrap",1,"modal-body","w-100-p","p-0",2,"position","relative"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["class","w-100-p","fxLayout","row wrap",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","12px",1,"mb-8",3,"formGroup"],["fxFlex","23.5",1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","company_name",1,"form-control",3,"readonly"],[4,"ngIf"],["type","text","formControlName","group_name","required","",1,"form-control",3,"readonly"],[1,"input-group"],["for","ph",1,"input-group-text",2,"border-right","none"],["type","number","oninput","this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);","min","0","formControlName","phone_number","maxlength","8",1,"form-control",3,"readonly"],["formControlName","industry","placeholder","Select industry",3,"readonly","clearable"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["type","text","formControlName","website",1,"form-control",3,"readonly"],["type","text","formControlName","email","required","",1,"form-control",3,"readonly"],["type","text","formControlName","cr_number",1,"form-control",3,"readonly"],["fxFlex","100",1,"fs-12","fw-600","text-uppercase","bg-blue-100",2,"padding","4px"],["type","text","formControlName","first_name",1,"form-control",3,"readonly"],["type","text","formControlName","last_name",1,"form-control",3,"readonly"],["type","text","formControlName","qid_passport",1,"form-control",3,"readonly"],["type","text","formControlName","spoc_email",1,"form-control",3,"readonly"],[1,"input-group-text",2,"border-right","none"],["type","number","oninput","this.value = !!this.value && this.value >= 0 ? this.value : null; if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);","min","0","formControlName","spoc_phone_number","maxlength","8",1,"form-control",3,"readonly"],["class","w-100-p modal-footer",4,"ngIf"],[3,"value"],[1,"w-100-p","modal-footer"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["fxFlex","100","fxLayoutGap","12px",1,"h-82"],["type","text","formControlName","document_name",1,"form-control",3,"readonly","required"],["formControlName","document_type","placeholder","Select document type",1,"select","w-100-p",3,"readonly","clearable"],["value","passport"],["value","qatar id"],["value","contract"],["value","others"],["type","text","formControlName","description",1,"form-control",3,"readonly","required"],["id","fileInput","type","file","accept",".pdf, .jpg, .png",1,"form-control-file","btn","btn-default","h-36","lh-16",3,"disabled","change"],["file",""],["fxFlex","100"],[1,"table","table-striped"],[3,"even",4,"ngFor","ngForOf"],["style","width: 12%;",4,"ngIf"],[2,"width","12%"],["ngbTooltip","Edit Document",1,"btn","btn-icon","btn-info","mr-8",2,"padding","3px",3,"click"],[1,"ri-pencil-line"],["ngbTooltip","Delete Document",1,"btn","btn-icon","btn-danger","mr-8",2,"padding","3px",3,"click"],[1,"ri-subtract-line"],["ngbTooltip","View Document",1,"btn","btn-icon","btn-info",2,"padding","3px",3,"click"],[1,"ri-file-3-line"],[2,"display","flex","background-color","transparent"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,F,1,0,"img",1),e.YNc(2,Ke,96,28,"div",2),e.YNc(3,at,59,18,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",a.showGeneralDetails),e.xp6(1),e.Q6J("ngIf",a.showUploadDocs))},directives:[N.xw,n.O5,p._Y,p.JL,N.yH,N.SQ,p.sg,p.Fj,p.JJ,p.u,p.Q7,p.qQ,p.wV,p.nD,P.w9,n.sg,P.xv,Z._L],pipes:[n.rS],styles:[".select .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{padding:1px 8px!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:none!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background:rgba(243,247,249,.3)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),i})();function st(i,s){1&i&&e._UZ(0,"img",26)}function ct(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide first name "),e.qZA())}function lt(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," First name must be of less than 60 characters "),e.qZA())}function dt(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Avoid white spaces "),e.qZA())}function _t(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ct,2,0,"span",19),e.YNc(2,lt,2,0,"span",19),e.YNc(3,dt,2,0,"span",19),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.first_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.first_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.first_name.hasError("whitespace"))}}function c(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide last name "),e.qZA())}function _(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Last name must be of less than 60 characters "),e.qZA())}function d(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Avoid white spaces "),e.qZA())}function g(i,s){if(1&i&&(e.ynx(0),e.YNc(1,c,2,0,"span",19),e.YNc(2,_,2,0,"span",19),e.YNc(3,d,2,0,"span",19),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.last_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.last_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.last_name.hasError("whitespace"))}}function x(i,s){1&i&&(e.TgZ(0,"div",9),e._uU(1," Please provide phone number "),e.qZA())}function w(i,s){1&i&&(e.TgZ(0,"div",9),e._uU(1," Phone no must be of 8 digits "),e.qZA())}function W(i,s){1&i&&(e.TgZ(0,"div",9),e._uU(1," Phone no must be numeric "),e.qZA())}function X(i,s){1&i&&(e.TgZ(0,"div",9),e._uU(1," Phone no already exist "),e.qZA())}function K(i,s){if(1&i&&(e.ynx(0),e.YNc(1,x,2,0,"div",19),e.YNc(2,w,2,0,"div",19),e.YNc(3,W,2,0,"div",19),e.YNc(4,X,2,0,"div",19),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.phone_number.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.phone_number.hasError("minlength")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.phone_number.hasError("phoneonly")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.phone_number.hasError("phoneexist"))}}function ee(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide email "),e.qZA())}function Ce(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide valid email "),e.qZA())}function re(i,s){1&i&&(e.TgZ(0,"div",9),e._uU(1," Email already exist "),e.qZA())}function Ze(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ee,2,0,"span",19),e.YNc(2,Ce,2,0,"span",19),e.YNc(3,re,2,0,"div",19),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.email.getError("pattern")),e.xp6(1),e.Q6J("ngIf",t.adminForm.controls.email.getError("emailexist"))}}function ut(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide department "),e.qZA())}function gt(i,s){1&i&&(e.TgZ(0,"span",9),e._uU(1," Please provide designation "),e.qZA())}function $e(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._UZ(1,"i",28),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading||!t.adminForm.valid),e.xp6(3),e.Oqu(null!=t.data&&t.data.id?"Update":"Save")}}let mt=(()=>{class i{constructor(t,a,r,h){this.modalRef=t,this.fb=a,this.apiService=r,this.toastrService=h,this.data=null,this.loading=!1,this.readonly=!1,this.title="Add New Admin",this.customerId=0,this.adminForm=this.fb.group({first_name:[null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]],last_name:[null,[p.kI.required,p.kI.maxLength(60),H.d.noWhiteSpace]],phone_number:[null,[p.kI.required,p.kI.minLength(8),H.d.phoneOnly]],email:[null,[p.kI.required,p.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],department:[null],designation:[null]})}ngOnInit(){if(this.data){const t=this.data.phone_number;t.includes("+974")&&(this.data.phone_number=t.replace("+974","")),this.adminForm.patchValue(this.data)}}onSubmit(){const t=`${M.N.customerms}/customers/customer-admin`;let a=this.adminForm.value;a.phone_number.includes("+974")||(a.phone_number="+974"+a.phone_number),a.customer=this.customerId,this.data&&this.data.id?(a.id=this.data.id,this.updateAdmin(t,a)):this.createAdmin(t,a)}createAdmin(t,a){this.apiService.post(t,a).subscribe(r=>{this.toastrService.success(r.message,"Admin created successfully",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.modalRef.close()},r=>{this.toastrService.error(r.error.message,"Error creating admin",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}updateAdmin(t,a){this.apiService.patch(t,a).subscribe(r=>{this.toastrService.success(r.message,"Admin updated successfully",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.modalRef.close()},r=>{this.toastrService.error(r.error.message,"Error updating admin",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}validateEmailorPassword(t="",a=""){this.apiService.post(`${M.N.cobStagingUrl}/users/user-profile/validate`,{email:null==t?"":t,phone:null==a?"":"974"+a}).subscribe(T=>{var k,ne;""!=t&&null==a&&(null===(k=this.adminForm.get("email"))||void 0===k||k.setErrors(null)),null==t&&""!=a&&(null===(ne=this.adminForm.get("phone_number"))||void 0===ne||ne.setErrors(null))},T=>{var k,ne;let Ae=T.error.status;console.log("err",T,Ae),101==Ae&&(null===(k=this.adminForm.get("email"))||void 0===k||k.setErrors({emailexist:!0})),115==Ae&&(null===(ne=this.adminForm.get("phone_number"))||void 0===ne||ne.setErrors({phoneexist:!0}))})}onCloseModal(){this.modalRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.Kz),e.Y36(p.qu),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-form"]],decls:57,vars:17,consts:[["fxLayout","row wrap",1,"w-100-p","h-100-p","p-0",2,"position","relative"],[1,"w-100-p","modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxFlex","100","fxLayout","row wrap",1,"modal-body",2,"height","calc(100% - 44px)"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","12px",3,"formGroup"],["fxFlex","48.5",1,"form-group"],["for","fn"],[1,"text-danger"],["type","text","id","fn","formControlName","first_name",1,"form-control",3,"readonly"],[4,"ngIf"],["fxFlex","48.5",1,"form-group","mr-0"],["type","text","id","fn","formControlName","last_name",1,"form-control",3,"readonly"],[1,"input-group"],["for","ph",1,"input-group-text",2,"border-right","none"],["type","text","autocomplete","off","id","ph","maxlength","8","formControlName","phone_number","placeholder","Phone Number",1,"form-control",3,"readonly","focusout"],["type","text","id","fn","formControlName","email",1,"form-control",3,"readonly","focusout"],["type","text","id","fn","formControlName","department",1,"form-control",3,"readonly"],["class","text-danger",4,"ngIf"],["type","text","id","fn","formControlName","designation",1,"form-control",3,"readonly"],["fxFlex","100",1,"mt-0"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit","class","btn btn-success btn-round mr-8",3,"disabled","click",4,"ngIf"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return a.onCloseModal()}),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.YNc(6,st,1,0,"img",4),e.TgZ(7,"div",5),e.TgZ(8,"form",6),e.TgZ(9,"div",7),e.TgZ(10,"label",8),e._uU(11,"First Name"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"*"),e.qZA(),e._UZ(14,"input",10),e.YNc(15,_t,4,3,"ng-container",11),e.qZA(),e.TgZ(16,"div",12),e.TgZ(17,"label",8),e._uU(18,"Last Name"),e.qZA(),e.TgZ(19,"span",9),e._uU(20,"*"),e.qZA(),e._UZ(21,"input",13),e.YNc(22,g,4,3,"ng-container",11),e.qZA(),e.TgZ(23,"div",7),e.TgZ(24,"label",8),e._uU(25,"Phone Number"),e.qZA(),e.TgZ(26,"span",9),e._uU(27,"*"),e.qZA(),e.TgZ(28,"div",14),e.TgZ(29,"span",15),e._uU(30,"+974"),e.qZA(),e.TgZ(31,"input",16),e.NdJ("focusout",function(){return a.validateEmailorPassword("",a.adminForm.controls.phone_number.value)}),e.qZA(),e.qZA(),e.YNc(32,K,5,4,"ng-container",11),e.qZA(),e.TgZ(33,"div",12),e.TgZ(34,"label",8),e._uU(35,"Email"),e.qZA(),e.TgZ(36,"span",9),e._uU(37,"*"),e.qZA(),e.TgZ(38,"input",17),e.NdJ("focusout",function(){return a.validateEmailorPassword(a.adminForm.controls.email.value,"")}),e.qZA(),e.YNc(39,Ze,4,3,"ng-container",11),e.qZA(),e.TgZ(40,"div",7),e.TgZ(41,"label",8),e._uU(42,"Department"),e.qZA(),e._UZ(43,"input",18),e.YNc(44,ut,2,0,"span",19),e.qZA(),e.TgZ(45,"div",7),e.TgZ(46,"label",8),e._uU(47,"Designation"),e.qZA(),e._UZ(48,"input",20),e.YNc(49,gt,2,0,"span",19),e.qZA(),e.qZA(),e._UZ(50,"hr",21),e.TgZ(51,"div",22),e.YNc(52,$e,4,2,"button",23),e.TgZ(53,"button",24),e.NdJ("click",function(){return a.onCloseModal()}),e._UZ(54,"i",25),e.TgZ(55,"span"),e._uU(56),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(a.title),e.xp6(3),e.Q6J("ngIf",a.loading),e.xp6(2),e.Q6J("formGroup",a.adminForm),e.xp6(6),e.Q6J("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.first_name.dirty),e.xp6(6),e.Q6J("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.last_name.dirty),e.xp6(9),e.Q6J("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.phone_number.dirty),e.xp6(6),e.Q6J("readonly",a.readonly||(null==a.data?null:a.data.id)),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.email.invalid&&a.adminForm.controls.email.dirty),e.xp6(4),e.Q6J("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.department.hasError("required")&&a.adminForm.controls.department.dirty),e.xp6(4),e.Q6J("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.adminForm.controls.designation.hasError("required")&&a.adminForm.controls.designation.dirty),e.xp6(3),e.Q6J("ngIf",!a.readonly),e.xp6(4),e.Oqu(a.readonly?"Close":"Discard"))},directives:[N.xw,n.O5,N.yH,p._Y,p.JL,N.SQ,p.sg,p.Fj,p.JJ,p.u,p.nD],styles:[".drp-container .ng-select-container{box-shadow:none;border-radius:0!important}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})();function ae(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.package_name," ")}}function he(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"input",12),e.NdJ("change",function(r){e.CHM(t);const h=e.oxw().index,T=e.oxw(2).$implicit;return e.oxw(3).onSelectPackage(T.packages,h,r)}),e.qZA(),e._UZ(2,"label",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,a=e.oxw(5);e.xp6(1),e.Q6J("id",t.package_id)("value",t.is_selected)("checked",t.is_selected)("disabled",t.disabled||a.readonly||t.is_consumer_package),e.xp6(1),e.s9C("for",t.package_id)}}function Oe(i,s){if(1&i&&(e.ynx(0),e.YNc(1,he,3,5,"div",10),e.BQk()),2&i){const t=s.$implicit,a=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",a.package_id===t.package_id)}}function bt(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,Oe,2,1,"ng-container",6),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",a.getSortedPackages(t.packages))}}function Ct(i,s){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.YNc(3,bt,2,1,"td",6),e.qZA()),2&i){const t=s.$implicit,a=s.even,r=e.oxw(3);e.ekj("even",a),e.xp6(1),e.Udp("background",a?"#fbfdfd":"#fff"),e.xp6(1),e.Oqu(t.usecase_name),e.xp6(1),e.Q6J("ngForOf",r.getSortedPackages(r.packages))}}function Tt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ct,4,6,"tr",9),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.customerPackages)}}function Zt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr",14),e._uU(2," No record found "),e.qZA(),e.BQk())}function yt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onSubmit()}),e._UZ(3,"i",18),e._uU(4),e.qZA(),e.TgZ(5,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getCustomerPackages()}),e._UZ(6,"i",20),e._uU(7," Refresh "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",t.loading||0===t.selectedPackages.length),e.xp6(2),e.hij(" ",null!=t.data&&t.data.id?"Update":"Save"," ")}}function At(i,s){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"table",4),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"td",5),e._uU(6,"Use Case"),e.qZA(),e.YNc(7,ae,2,1,"td",6),e.qZA(),e.qZA(),e.TgZ(8,"tbody"),e.YNc(9,Tt,2,1,"ng-container",7),e.YNc(10,Zt,3,0,"ng-container",7),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,yt,8,2,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.getSortedPackages(t.packages)),e.xp6(2),e.Q6J("ngIf",t.customerPackages.length>0),e.xp6(1),e.Q6J("ngIf",!t.loading&&0===t.customerPackages.length),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}function wt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).onAddAdmin()}),e._UZ(1,"i",34),e.TgZ(2,"span"),e._uU(3,"Add New Admin"),e.qZA(),e.qZA()}}function Ot(i,s){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,wt,4,0,"button",32),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.loading&&!t.usecasesPackagesLengthEqual)}}function Pt(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.usecase_name," ")}}function Mt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Pt,2,1,"td",7),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.is_selected)}}function Dt(i,s){1&i&&(e.TgZ(0,"td",35),e._uU(1,"Action"),e.qZA())}function It(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"div",11),e.TgZ(2,"input",37),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.is_selected=r})("change",function(){return e.CHM(t),e.oxw(4).onSelectUsecase()}),e.qZA(),e._UZ(3,"label"),e.qZA(),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(2),e.Q6J("value",t.usecase_mapping_id)("disabled",t.is_disabled)("checked",t.is_selected)("ngModel",t.is_selected)}}function qt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).index;return e.oxw(3).removeAdmin(r)}),e._UZ(1,"i",42),e.qZA()}}function Ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"a",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(3).onAddAdmin(r,"edit")}),e._UZ(2,"i",39),e.qZA(),e.YNc(3,qt,2,0,"a",40),e.qZA()}if(2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("ngIf",0==t.usecases.length)}}function Ft(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",36),e.NdJ("click",function(){const h=e.CHM(t).$implicit;return e.oxw(3).onAddAdmin(h,"detail")}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.YNc(6,It,4,4,"td",6),e.YNc(7,Ut,4,1,"td",7),e.qZA()}if(2&i){const t=s.$implicit,a=s.even,r=e.oxw(3);e.ekj("even",a),e.xp6(3),e.hij(" ",t.admin_name," "),e.xp6(2),e.Oqu(t.email),e.xp6(1),e.Q6J("ngForOf",t.usecases),e.xp6(1),e.Q6J("ngIf",!r.readonly)}}function kt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ft,8,6,"tr",9),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.customerUsecases)}}function Et(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr",14),e._uU(2," No record found "),e.qZA(),e.BQk())}function Nt(i,s){1&i&&(e.TgZ(0,"span",28),e._uU(1," Please provide email "),e.qZA())}function St(i,s){1&i&&(e.TgZ(0,"span",28),e._uU(1," Please provide valid email "),e.qZA())}function Jt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Nt,2,0,"span",43),e.YNc(2,St,2,0,"span",43),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.vodafonr_contact_person.hasError("required")&&!t.disableContactPersonInput),e.xp6(1),e.Q6J("ngIf",t.vodafonr_contact_person.getError("pattern"))}}function Qt(i,s){if(1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.adminContactPersons)}}function Yt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onUpdateAdminList()}),e._UZ(3,"i",18),e._uU(4),e.qZA(),e.TgZ(5,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resetAdminList()}),e._UZ(6,"i",45),e._uU(7," Clear "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",t.loading||0===t.selectedUsecases.length||!t.vodafonr_contact_person.valid||t.submitted),e.xp6(2),e.hij(" ",null!=t.data&&t.data.id?"Update":"Save"," ")}}function Lt(i,s){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"div",21),e.YNc(2,Ot,2,1,"div",22),e.TgZ(3,"table",23),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"td"),e._uU(7,"Admin Name"),e.qZA(),e.TgZ(8,"td"),e._uU(9,"Email"),e.qZA(),e.YNc(10,Mt,2,1,"ng-container",6),e.YNc(11,Dt,2,0,"td",24),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,kt,2,1,"ng-container",7),e.YNc(14,Et,3,0,"ng-container",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"h4",25),e._uU(16,"Contact Persons"),e.qZA(),e.TgZ(17,"div",26),e.TgZ(18,"label",27),e._uU(19,"Vodafone Contact Person"),e.qZA(),e.TgZ(20,"span",28),e._uU(21,"*"),e.qZA(),e._UZ(22,"input",29),e.YNc(23,Jt,3,2,"ng-container",7),e.qZA(),e.YNc(24,Qt,3,1,"div",30),e.YNc(25,Yt,8,2,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.readonly),e.xp6(8),e.Q6J("ngForOf",t.usecases),e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(2),e.Q6J("ngIf",t.customerUsecases.length>0),e.xp6(1),e.Q6J("ngIf",!t.loading&&0===t.customerUsecases.length),e.xp6(8),e.Q6J("readonly",t.readonly||t.disableContactPersonInput)("formControl",t.vodafonr_contact_person),e.xp6(1),e.Q6J("ngIf",t.vodafonr_contact_person.invalid),e.xp6(1),e.Q6J("ngIf",""!=t.adminContactPersons),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}let Bt=(()=>{class i{constructor(t,a,r,h){this.activatedRoute=t,this.modal=a,this.apiService=r,this.toastrService=h,this.loading=!1,this.readonly=!1,this.showPackages=!0,this.showAdminList=!1,this.customerId=0,this.usecasesPackagesLengthEqual=!1,this.signals=new e.vpe,this.vodafonr_contact_person=new p.NI(null,[p.kI.required,p.kI.pattern("^([a-zA-Z0-9._%+-]+@[a-z0-9.-]+\\.+[a-z]{2,3}(,)*)+$")]),this.packages=[],this.selectedPackages=[],this.customerPackages=[],this.usecases=[],this.selectedUsecases=[],this.customerUsecases=[],this.data=null,this.adminContactPersons="",this.disableContactPersonInput=!1,this.submitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.currentCustomerId=isNaN(Number(t.id))?null:Number(t.id)}),this.showPackages&&(this.getPackages(),this.getCustomerPackages()),this.showAdminList&&(this.getCustomerUsecase(),this.getAdminList())}getPackages(){this.signals.emit({loading:!0}),this.apiService.get(`${M.N.customerms}/customers/get-packages`).subscribe(a=>{this.packages=a.data.data,this.signals.emit({loading:!1})},a=>{this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting packages",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getCustomerPackages(){this.signals.emit({loading:!0}),this.loading=!0,this.apiService.get(`${M.N.customerms}/customers/customer-package?customer=${this.customerId}`).subscribe(a=>{this.customerPackages=a.data.data,a.data.data.forEach(h=>{let T=h.packages.findIndex(k=>k.is_selected);-1!=T&&this.onSelectPackage(h.packages,T)}),this.loading=!1,this.signals.emit({loading:!1})},a=>{this.loading=!1,this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting packages",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getSortedPackages(t){return t.sort((r,h)=>r.package_id>h.package_id?1:-1)}onSelectPackage(t,a,r){for(let h=0;h<t.length;h++)t[h].is_selected=!1,t[a].is_selected||(t[a].is_selected=!0);this.selectedPackages=[],this.customerPackages.forEach(h=>{h.packages.forEach(T=>{this.selectedPackages.push({usecase:h.usecase_proxy_id,package:T.package_proxy_id,is_selected:T.is_selected})})})}onSubmit(){this.signals.emit({loading:!0}),this.apiService.patch(`${M.N.customerms}/customers/customer-package`,{customer:this.customerId,customer_usecase_packages:this.selectedPackages}).subscribe(r=>{this.signals.emit({loading:!1,activeId:"al"}),this.toastrService.success(r.message,"Packages updated successfully",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getCustomerPackages()},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error updating packages",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getAdminList(){this.signals.emit({loading:!0}),this.loading=!0,this.apiService.get(`${M.N.customerms}/customers/customer-admin-list?customer=${this.customerId}`).subscribe(a=>{var r,h,T,k,ne,Ae;if(this.loading=!1,this.signals.emit({loading:!1}),this.customerUsecases=a.data.data,this.customerUsecases.length>0){this.adminContactPersons=null===(r=this.customerUsecases[0])||void 0===r?void 0:r.contact_persons,""!=this.adminContactPersons&&this.adminContactPersons.split(",").length>=0&&(this.disableContactPersonInput=!0,this.vodafonr_contact_person.setValue(this.adminContactPersons));for(let we=0;we<(null===(h=this.customerUsecases)||void 0===h?void 0:h.length);we++)for(let Se=0;Se<(null===(k=null===(T=this.customerUsecases[we])||void 0===T?void 0:T.usecases)||void 0===k?void 0:k.length);Se++)this.customerUsecases[we].usecases[Se].is_disabled=!!(null===(ne=this.customerUsecases[we])||void 0===ne?void 0:ne.usecases[Se].is_selected),this.usecasesPackagesLengthEqual=(null===(Ae=this.customerUsecases)||void 0===Ae?void 0:Ae.length)==this.customerUsecases[we].usecases.length}},a=>{this.loading=!1,this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting admin list",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getCustomerUsecase(){this.apiService.get(`${M.N.customerms}/customers/get-customer-usecase?customer=${this.customerId}&admin_list=true`).subscribe(a=>{this.usecases=a.data.data},a=>{this.toastrService.error(a.error.message,"Error getting usecases",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onSelectUsecase(){this.selectedUsecases=[],this.customerUsecases.forEach(t=>{t.usecases.forEach(a=>{a.is_selected&&this.selectedUsecases.push({usecase:a.usecase_mapping_id,admin_id:t.id,is_selected:a.is_selected})})}),this.submitted=!1}onUpdateAdminList(){this.signals.emit({loading:!0});const t=`${M.N.customerms}/customers/customer-admin-list`;this.submitted=!0,this.apiService.patch(t,{customer:this.customerId,admin_usecases:this.selectedUsecases,contact_person:this.vodafonr_contact_person.value}).subscribe(h=>{this.signals.emit({loading:!1}),this.toastrService.success(h.message,"Admin list Successfully Updated",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.vodafonr_contact_person.reset(),this.getAdminList(),this.submitted=!0},h=>{this.signals.emit({loading:!1}),this.toastrService.error(h.error.message,"Error updating admin list",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onAddAdmin(t,a){const r=this.modal.open(mt,{size:"md",scrollable:!0});r.componentInstance.customerId=this.customerId,t&&(r.componentInstance.data=t,r.componentInstance.title="Edit Admin",r.componentInstance.readonly=!1),"detail"===a&&(r.componentInstance.title="Admin Details",r.componentInstance.readonly=!0),r.closed.subscribe(()=>{this.getAdminList()})}removeAdmin(t){const a=`${M.N.customerms}/customers/customer-admin?customer=${this.customerId}`;G.c.warn("Are you sure?","You want to delete this admin","Yes").subscribe(r=>{r.positive&&(this.signals.emit({loading:!0}),this.apiService.delete(a).subscribe(h=>{this.toastrService.success(h.message,"Admin successfully deleted",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.signals.emit({loading:!1}),this.getAdminList()},h=>{this.signals.emit({loading:!1}),this.toastrService.error(h.error.message,"Error deleting admin",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})}))})}onCloseModel(){}resetAdminList(){this.vodafonr_contact_person.reset(),this.getCustomerUsecase(),this.getAdminList()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.gz),e.Y36(Z.FF),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-packages"]],inputs:{readonly:"readonly",showPackages:"showPackages",showAdminList:"showAdminList",customerId:"customerId"},outputs:{signals:"signals"},decls:3,vars:2,consts:[["fxLayout","row wrap",1,"modal-body","w-100-p","p-0",2,"position","relative"],["class","w-100-p","fxLayout","row wrap",4,"ngIf"],["fxLayout","row wrap",1,"w-100-p"],[1,"w-100-p",2,"overflow","auto"],[1,"table",2,"min-width","calc(100% - 1px)","width","max-content"],[2,"min-width","140px","position","sticky","left","0","z-index","1","background","#ececec"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","w-100-p modal-footer",4,"ngIf"],[3,"even",4,"ngFor","ngForOf"],["class","checkbox-custom checkbox-inline1 checkbox-warning",4,"ngIf"],[1,"checkbox-custom","checkbox-inline1","checkbox-warning"],["type","radio",3,"id","value","checked","disabled","change"],[3,"for"],["colspan","4",2,"display","flex","border","none !important"],[1,"w-100-p","modal-footer"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-refresh-line"],[1,"w-100-p"],["fxLayout","row","fxLayoutAlign","end start","class","mb-8",4,"ngIf"],[1,"table","table-bordered"],["style","width: 10%;",4,"ngIf"],[1,"w-100-p","fs-12","fw-600","text-uppercase","bg-blue-100",2,"padding","4px"],["fxFlex","30",1,"form-group"],["for","contact"],[1,"text-danger"],["autocomplete","off","type","email","id","contact","placeholder","abc@vodafone.com",1,"form-control",3,"readonly","formControl"],["fxFlex","100","class","mb-0",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end start",1,"mb-8"],["class","btn btn-success btn-round h-36 lh-16",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-round","h-36","lh-16",3,"click"],[1,"ri-add-line"],[2,"width","10%"],[1,"text-overflow",3,"click"],["type","checkbox","name","checkbox",3,"value","disabled","checked","ngModel","ngModelChange","change"],["ngbTooltip","Edit",1,"btn","btn-info","btn-icon","btn-primary","mr-8",2,"padding","3px",3,"click"],[1,"ri-pencil-line"],["class","btn btn-info btn-icon btn-danger","ngbTooltip","Delete","style","padding: 3px;",3,"click",4,"ngIf"],["ngbTooltip","Delete",1,"btn","btn-info","btn-icon","btn-danger",2,"padding","3px",3,"click"],[1,"ri-delete-bin-6-line"],["class","text-danger",4,"ngIf"],["fxFlex","100",1,"mb-0"],[1,"ri-close-line"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,At,12,4,"div",1),e.YNc(2,Lt,26,10,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.showPackages&&!a.loading),e.xp6(1),e.Q6J("ngIf",a.showAdminList))},directives:[N.xw,n.O5,n.sg,N.yH,p.Fj,p.JJ,p.oH,N.Wh,p.Wl,p.On,Z._L],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{left:0;z-index:1;position:sticky}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{left:0;z-index:1;position:sticky}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})();function Wt(i,s){1&i&&e._UZ(0,"img",11)}function $t(i,s){if(1&i&&(e.TgZ(0,"ng-option",12),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.usecase_id),e.xp6(1),e.Oqu(t.name)}}function Ht(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.status)}}function Rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"input",15),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).$implicit.is_addon=r})("change",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(2).onMasterToggle(r)}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.Q6J("id",t.view_id)("checked",t.is_addon)("ngModel",t.is_addon)("disabled",!a.selectedUsecase.is_addon)}}function Gt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"input",15),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).$implicit.is_addon=r})("change",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(2).onSelectAddon(r)}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.Q6J("id",t.view_id)("checked",a.getStatus(t))("ngModel",t.is_addon)("disabled",!a.selectedUsecase.is_addon||t.default)}}function Kt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Rt,1,4,"input",14),e.YNc(2,Gt,1,4,"input",14),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.view_id),e.xp6(1),e.Q6J("ngIf",!t.view_id)}}function jt(i,s){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"b"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e.YNc(7,Ht,3,1,"ng-container",9),e.YNc(8,Kt,3,2,"ng-container",9),e.qZA(),e.qZA()),2&i){const t=s.$implicit;e.ekj("even",s.even),e.xp6(3),e.Oqu(t.view_id),e.xp6(1),e.ekj("fw-600",""!==t.view_id),e.xp6(1),e.Oqu(t.module_name),e.xp6(2),e.Q6J("ngIf","Default"===t.status),e.xp6(1),e.Q6J("ngIf","Default"!==t.status)}}function zt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,jt,9,8,"tr",13),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.features)}}function Vt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr",16),e._uU(2," No record found "),e.qZA(),e.BQk())}function Xt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._UZ(3,"i",20),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.loading||0===t.selectedModules.length),e.xp6(3),e.Oqu(null!=t.data&&t.data.id?"Update":"Save")}}let en=(()=>{class i{constructor(t,a){this.apiService=t,this.toastrService=a,this.data=null,this.loading=!1,this.readonly=!1,this.customerId=0,this.selectedModules=[],this.unselectedModules=[],this.usecases=[{id:1,title:"Asset Tracking",is_addon:!1},{id:2,title:"Fleet Management System",is_addon:!1},{id:3,title:"FMS New Pkg",is_addon:!0}],this.features=[],this.usecase=new p.NI(""),this.signals=new e.vpe}ngOnInit(){this.getUsecases()}getUsecases(){this.loading=!0,this.apiService.get(`${M.N.customerms}/customers/get-selected-usecases-packages?customer=${this.customerId}`).subscribe(a=>{this.loading=!1,this.usecases=a.data.data},a=>{this.loading=!1,this.toastrService.error(a.error.message)})}onSelectUsecase(t){this.usecases.forEach(a=>{a.usecase_id===t&&(this.selectedUsecase=a)}),this.selectedUsecase.is_addon||this.signals.emit({type:"addon",data:!0}),this.getFeatures(t)}getFeatures(t){this.loading=!0,this.apiService.get(`${M.N.pkgms}/usecase-configuration/get-usecase-modules?usecase_id=${t}&customer_id=${this.customerId}`).subscribe(r=>{const h=r.data.module_list;h.forEach(T=>{T.view_id=T.module_id,T.feature_list.forEach(k=>{k.module_id=T.module_id})}),h.forEach(T=>{T.feature_list.forEach(k=>{T.module_id===k.module_id&&h.push({id:k.id,f_id:k.customer_feature_id,module_name:k.feature_name,module_id:k.module_id,view_id:"",is_addon:k.is_addon,default:k.default})})}),this.loading=!1,this.features=h.sort((T,k)=>T.module_id-k.module_id),this.features.forEach(T=>{(null==T?void 0:T.default)&&""===T.view_id&&(T.is_addon=!0),T.is_addon&&""===T.view_id&&this.onSelectAddon(T)})},r=>{this.loading=!1,this.toastrService.error(r.error.message)})}onMasterToggle(t){this.selectedModules=[],this.unselectedModules=[],this.features.forEach(a=>{t.module_id===a.module_id&&(a.is_addon=!!t.is_addon)}),this.features.forEach(a=>{if(a.is_addon&&""===a.view_id){this.selectedModules.push(a.f_id);let r=this.unselectedModules.findIndex(h=>h==a.f_id);-1!==r&&this.unselectedModules.splice(r,1)}else{""===a.view_id&&!a.default&&this.unselectedModules.push(a.f_id);let r=this.selectedModules.findIndex(h=>h==a.f_id);-1!==r&&this.selectedModules.splice(r,1)}})}onSelectAddon(t){if(this.unselectedModules=[],t.is_addon)this.selectedModules.push(t.f_id);else{let h=this.selectedModules.findIndex(T=>T==t.f_id);this.selectedModules.splice(h,1)}this.features.forEach(h=>{!h.is_addon&&""===h.view_id&&this.unselectedModules.push(h.f_id)});const a=this.features.filter(h=>h.module_id==t.module_id);let r=[];if(a.forEach(h=>{if(null==h?void 0:h.f_id){let T=this.selectedModules.find(k=>k===(null==h?void 0:h.f_id));T&&r.push(T)}}),r&&0===(null==r?void 0:r.length)){let h=this.features.find(k=>{var ne;return k.id===(null===(ne=a[0])||void 0===ne?void 0:ne.id)}),T=0;this.features.forEach(k=>{k.module_id==h.module_id&&(0===T&&(k.is_addon=!1),T++)})}if(r&&(null==r?void 0:r.length)>0){let h=this.features.find(k=>{var ne;return k.id===(null===(ne=a[0])||void 0===ne?void 0:ne.id)}),T=0;this.features.forEach(k=>{k.module_id==h.module_id&&(0===T&&(k.is_addon=!0),T++)})}}onSubmit(){this.loading=!0,this.apiService.patch(`${M.N.pkgms}/usecase-configuration/get-usecase-modules`,{customer_id:this.customerId,selected_feature_list:this.selectedModules,unselected_feature_list:this.unselectedModules,usecase_unique_id:this.selectedUsecase.usecase_unique_id}).subscribe(r=>{this.loading=!1,this.toastrService.success(r.message,"Add-on assigned succefully"),this.signals.emit({loading:!1})},r=>{this.loading=!1,this.toastrService.error(r.error.message,"Error updating feature add-on")})}getStatus(t){return!(!t.is_addon&&!t.default)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-features"]],inputs:{readonly:"readonly",customerId:"customerId"},outputs:{signals:"signals"},decls:23,vars:7,consts:[["fxLayout","row wrap",1,"w-100-p","h-100-p","p-0",2,"position","relative"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxFlex","100","fxLayout","row wrap"],[1,"form-group","w-22-p"],[1,"select",3,"formControl","clearable","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-100-p"],[1,"table","table-bordered"],[4,"ngIf"],["class","w-100-p modal-footer",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],[3,"value"],[3,"even",4,"ngFor","ngForOf"],["type","checkbox",3,"id","checked","ngModel","disabled","ngModelChange","change",4,"ngIf"],["type","checkbox",3,"id","checked","ngModel","disabled","ngModelChange","change"],["colspan","4",2,"display","flex","border","none !important"],[1,"w-100-p","modal-footer"],["fxFlex","100",1,"form-group","text-center","mb-0"],[1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Wt,1,0,"img",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"label"),e.TgZ(5,"ng-select",4),e.NdJ("change",function(h){return a.onSelectUsecase(h)}),e.TgZ(6,"ng-option",5),e._uU(7,"Select usecase"),e.qZA(),e.YNc(8,$t,2,2,"ng-option",6),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"table",8),e.TgZ(11,"thead"),e.TgZ(12,"tr"),e.TgZ(13,"td"),e._uU(14,"Feature ID"),e.qZA(),e.TgZ(15,"td"),e._uU(16,"Features"),e.qZA(),e.TgZ(17,"td"),e._uU(18,"Status"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"tbody"),e.YNc(20,zt,2,1,"ng-container",9),e.YNc(21,Vt,3,0,"ng-container",9),e.qZA(),e.qZA(),e.qZA(),e.YNc(22,Xt,6,2,"div",10),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(4),e.Q6J("formControl",a.usecase)("clearable",!1),e.xp6(3),e.Q6J("ngForOf",a.usecases),e.xp6(12),e.Q6J("ngIf",a.features.length>0),e.xp6(1),e.Q6J("ngIf",!a.loading&&0===(null==a.features?null:a.features.length)),e.xp6(1),e.Q6J("ngIf",!a.readonly&&(null==a.selectedUsecase?null:a.selectedUsecase.is_addon)))},directives:[N.xw,n.O5,N.yH,P.w9,p.JJ,p.oH,P.xv,n.sg,p.Wl,p.On],styles:[".drp-container .ng-select-container{box-shadow:none;border-radius:0!important}  .select .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{padding:1px 8px!important}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle;color:#76838f}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})();var tn=m(8366),nn=m(4458),on=m(7050);function an(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){const h=e.CHM(t).opened,T=e.oxw(2).$implicit;return e.oxw().getAllocatedHardware(T.usecase,T.usecase_name,h)}),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"uppercase"),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",12),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=s.opened,a=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,a.usecase_name)," "),e.xp6(3),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function rn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3).$implicit;return e.oxw().onAllocateDevice(r)}),e._UZ(2,"i",19),e.TgZ(3,"span"),e._uU(4,"Allocate Device"),e.qZA(),e.qZA(),e.qZA()}}function sn(i,s){1&i&&(e.TgZ(0,"td",20),e._uU(1,"Action"),e.qZA())}function cn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"a",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(5).onEditFrequency(r)}),e._UZ(2,"i",24),e.qZA(),e.TgZ(3,"a",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(5).onDeallocateDevice(r)}),e._UZ(4,"i",26),e.qZA(),e.qZA()}}function ln(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"a",22),e.NdJ("click",function(){const h=e.CHM(t).$implicit,T=e.oxw(4).$implicit;return e.oxw().onDeviceDiagnostic(h,T)}),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.YNc(12,cn,5,0,"td",5),e.qZA()}if(2&i){const t=s.$implicit,a=s.even,r=e.oxw(5);e.ekj("even",a),e.xp6(2),e.Oqu(t.device_type_name),e.xp6(3),e.hij(" ",t.device_id," "),e.xp6(2),e.Oqu(t.status),e.xp6(2),e.Oqu(t.frequency),e.xp6(2),e.Oqu(null==t?null:t.sim_msisdn),e.xp6(1),e.Q6J("ngIf",!r.readonly)}}function dn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ln,13,8,"tr",21),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.fleetDevices)}}function _n(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr",27),e._uU(2," No record found "),e.qZA(),e.BQk())}function un(i,s){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,rn,5,0,"div",13),e.TgZ(2,"div",14),e.TgZ(3,"table",15),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"td"),e._uU(7,"Device Type"),e.qZA(),e.TgZ(8,"td"),e._uU(9,"Device ID"),e.qZA(),e.TgZ(10,"td"),e._uU(11,"Status"),e.qZA(),e.TgZ(12,"td"),e._uU(13,"Configured Frequency"),e.qZA(),e.TgZ(14,"td"),e._uU(15,"MSISDN"),e.qZA(),e.YNc(16,sn,2,0,"td",16),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,dn,2,1,"ng-container",5),e.YNc(19,_n,3,0,"ng-container",5),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(15),e.Q6J("ngIf",!t.readonly),e.xp6(2),e.Q6J("ngIf",t.fleetDevices.length>0),e.xp6(1),e.Q6J("ngIf",!t.loading&&0===(null==t.fleetDevices?null:t.fleetDevices.length))}}function gn(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"ngb-panel",6),e.YNc(2,an,8,4,"ng-template",7),e.YNc(3,un,20,4,"ng-template",8),e.qZA(),e.BQk()),2&i){const t=e.oxw().index;e.xp6(1),e.MGl("id","acc-",t,"")}}function mn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,gn,4,1,"ng-container",5),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.is_selected)}}let pn=(()=>{class i{constructor(t,a,r){this.modal=t,this.apiService=a,this.toastrService=r,this.loading=!1,this.readonly=!1,this.title="Edit Frequency",this.customerId=0,this.signals=new e.vpe,this.customerUsecases=[],this.fleetDevices=[],this.activeId=null,this.usecaseId=0}ngOnInit(){this.getCustomerUsecases()}getCustomerUsecases(){this.signals.emit({loading:!0}),this.apiService.get(`${M.N.customerms}/customers/get-customer-usecase?customer=${this.customerId}`).subscribe(a=>{this.signals.emit({loading:!1}),this.customerUsecases=a.data.data,console.log("this.customerUsecases== ",this.customerUsecases),this.customerUsecases.length>0&&(this.activeId=this.customerUsecases[0].usecase_name,this.customerUsecases.forEach(r=>{r.is_selected&&(this.usecaseId=r.usecase)}))},a=>{this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting device types",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getAllocatedHardware(t,a,r){this.usecaseId=t,this.activeId=a,r&&(this.signals.emit({loading:!0}),this.loading=!0,this.apiService.get(`${M.N.customerms}/customers/customer-hardware?customer=${this.customerId}&usecase=${t}`).subscribe(T=>{this.fleetDevices=T.data.data,console.log("this.fleetDevices==> ",this.fleetDevices),this.loading=!1,this.signals.emit({loading:!1})},T=>{this.loading=!1,this.signals.emit({loading:!1}),this.toastrService.error(T.error.message,"Error getting allocated hardware",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})}))}onSubmit(){}onAllocateDevice(t){const a=this.modal.open(nn.P,{size:"md-lg",scrollable:!0});a.componentInstance.customerId=this.customerId,a.componentInstance.data=t,a.closed.subscribe(()=>{this.getAllocatedHardware(this.usecaseId,"",!0)})}onDeallocateDevice(t){const a=`${M.N.customerms}/customers/customer-hardware`;let r={device_type:t.device_type,customer:this.customerId,inventory:t.inventory,id:t.id};G.c.confirm("Are you sure?","You want to de-allocate this device","Yes").subscribe(h=>{h.positive&&(this.signals.emit({loading:!0}),this.apiService.patch(a,r).subscribe(T=>{this.signals.emit({loading:!1}),this.getAllocatedHardware(this.usecaseId,"",!0),this.toastrService.success(T.message,"Succefully deallocated",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})},T=>{this.signals.emit({loading:!1}),this.toastrService.error(T.error.message,"Error deallocating device",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})}))})}onEditFrequency(t){const a=this.modal.open(on.p,{size:"sm",scrollable:!0});a.componentInstance.data=t,a.closed.subscribe(()=>{this.getAllocatedHardware(this.usecaseId,"",!0)})}onCloseModal(){this.modal.dismissAll()}onDeviceDiagnostic(t,a){let r=null;this.customerUsecases.forEach(T=>{T.usecase===a.usecase&&(r=a.package)}),t.package=r;const h=this.modal.open(tn.G,{size:"md",scrollable:!0});h.componentInstance.title=t.device_type_name,h.componentInstance.deviceType=t.device_type_name,h.componentInstance.data=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.FF),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer-hardware"]],inputs:{readonly:"readonly",customerId:"customerId"},outputs:{signals:"signals"},decls:5,vars:2,consts:[["fxLayout","row wrap",1,"w-100-p","p-0",2,"position","relative"],["fxFlex","100","fxLayout","row wrap"],["fxLayout","row wrap","fxFlex","100"],[1,"w-100-p","hardware-accord",3,"closeOthers"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"",3,"id"],["ngbPanelHeader","","class","mb-8","style","border-radius: 0; border: none;"],["ngbPanelContent","","class","p-body"],["ngbPanelToggle","",1,"w-100-p","btn","p-0","pl-2","pr-2","bg-blue-100","fw-600","fs-12",2,"border-radius","0",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p"],["fxLayoutGap","8px","fxLayoutAlign","start center"],[3,"ngClass"],["fxFlex","100","fxLayout","row","fxLayoutAlign","end start","class","mb-8",4,"ngIf"],[1,"w-100-p"],[1,"table","table-bordered"],["style","width: 10%;",4,"ngIf"],["fxFlex","100","fxLayout","row","fxLayoutAlign","end start",1,"mb-8"],[1,"btn","btn-success","btn-round","h-36","lh-16",3,"click"],[1,"ri-add-line"],[2,"width","10%"],[3,"even",4,"ngFor","ngForOf"],[1,"text-overflow",3,"click"],["ngbTooltip","Edit Device Frequency",1,"btn","btn-icon","btn-info","mr-8",2,"padding","3px",3,"click"],[1,"ri-pencil-line"],["ngbTooltip","Deallocate Device",1,"btn","btn-icon","btn-info",2,"padding","3px",3,"click"],[1,"ri-device-line"],["colspan","4",2,"display","flex","border","none !important"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"ngb-accordion",3),e.YNc(4,mn,2,1,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("closeOthers",!0),e.xp6(1),e.Q6J("ngForOf",a.customerUsecases))},directives:[N.xw,N.yH,Z.gY,n.sg,n.O5,Z.Gk,Z.k9,Z.gW,Z.I_,N.Wh,N.SQ,n.mk,R.oO,Z._L],pipes:[n.gd],styles:[".drp-container .ng-select-container{box-shadow:none;border-radius:0!important}  .hardware-accord .card, .card-header[_ngcontent-%COMP%]{border:none;border-radius:0;margin-bottom:8px}  .hardware-accord .card .card-body, .card-header[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:12px 0}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})();var hn=m(8226),fn=m(4395),vn=m(7519);function xn(i,s){1&i&&e._UZ(0,"img",26)}function bn(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Please provide installation status. "),e.qZA())}function Cn(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Please provide start date. "),e.qZA())}function Tn(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Please provide end date. "),e.qZA())}function Zn(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Please provide address. "),e.qZA())}function yn(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Address must be less than of 600 characters "),e.qZA())}function An(i,s){1&i&&(e.TgZ(0,"span",7),e._uU(1," Avoid white spaces "),e.qZA())}function wn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Zn,2,0,"span",11),e.YNc(2,yn,2,0,"span",11),e.YNc(3,An,2,0,"span",11),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hiForm.controls.address.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hiForm.controls.address.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.hiForm.controls.address.hasError("whitespace"))}}function On(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"div",28),e.TgZ(2,"button",29),e._UZ(3,"i",30),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().hiForm.reset()}),e._UZ(7,"i",32),e.TgZ(8,"span"),e._uU(9,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.loading||!t.hiForm.valid),e.xp6(3),e.Oqu(null!=t.data&&t.data.id?"Update":"Save")}}let Pn=(()=>{class i{constructor(t,a,r){this.fb=t,this.apiService=a,this.toastrService=r,this.data=null,this.loading=!1,this.readonly=!1,this.customerId=0,this.hiForm=this.fb.group({is_required:!1,status:["not_initiated",[p.kI.required]],start_date:[null,[p.kI.required]],end_date:[null,[p.kI.required]],address:[null,[p.kI.required,p.kI.maxLength(600),H.d.noWhiteSpace]]}),this.signals=new e.vpe}ngOnInit(){var t;this.getHInstallationInfo(),null===(t=this.hiForm.get("is_required"))||void 0===t||t.valueChanges.pipe((0,fn.b)(400),(0,vn.x)()).subscribe(a=>{var r,h;console.log(a),a?null===(r=this.hiForm.get("address"))||void 0===r||r.setValidators([p.kI.required]):null===(h=this.hiForm.get("address"))||void 0===h||h.removeValidators([p.kI.required])})}getHInstallationInfo(){this.signals.emit({loading:!0}),this.apiService.get(`${M.N.customerms}/customers/customer-hardware-installation?customer_id=${this.customerId}`).subscribe(a=>{this.data=a.data,this.data&&(this.data.start_date=this.makeDateObject(this.data.start_date),this.data.end_date=this.makeDateObject(this.data.end_date),this.hiForm.patchValue(this.data)),this.signals.emit({loading:!1})},a=>{this.signals.emit({loading:!1}),this.toastrService.error(a.error.message,"Error getting hardware installation info",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onSubmit(){this.signals.emit({loading:!1});let t=`${M.N.customerms}/customers/customer-hardware-installation`,a=this.hiForm.value;a.start_date=this.makeDate(a.start_date),a.end_date=this.makeDate(a.end_date),a.customer=this.customerId,this.data&&this.data.id?(t=`${M.N.customerms}/customers/customer-hardware-installation?id=${this.data.id}`,this.updateAdmin(t,a)):this.createAdmin(t,a)}createAdmin(t,a){this.apiService.post(t,a).subscribe(r=>{this.signals.emit({loading:!1}),this.toastrService.success(r.message,"Hardware installation info created",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.getHInstallationInfo()},r=>{this.signals.emit({loading:!1}),this.toastrService.error(r.error.message,"Error creating hardware installation info",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}updateAdmin(t,a){this.apiService.patch(t,a).subscribe(r=>{this.toastrService.success(r.message,"Hardware installation information updated successfuly",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.signals.emit({loading:!1}),this.getHInstallationInfo()},r=>{this.toastrService.error(r.error.message,"Error updating hardware installation info",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.signals.emit({loading:!1})})}makeDate(t){if(t){let a=new Date(`${t.year}-${t.month}-${t.day}`);return hn.Z(a,"yyyy-MM-dd")}}makeDateObject(t){if(t){let a=t.split("-");return{year:+a[0],month:+a[1],day:+a[2]}}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.qu),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-hardware-installation"]],inputs:{readonly:"readonly",customerId:"customerId"},outputs:{signals:"signals"},decls:62,vars:22,consts:[["fxLayout","row wrap",1,"w-100-p","h-100-p","p-0",2,"position","relative"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxFlex","100","fxLayout","row wrap",3,"formGroup","ngSubmit"],[1,"w-100-p","fs-12","fw-600","text-uppercase","bg-blue-100",2,"padding","4px"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxLayout","row","fxLayoutGap","12px"],["fxFlex","24.5",1,"form-group"],[1,"text-danger"],["placeholder","Select installation requirement","formControlName","is_required",3,"readonly","clearable"],[3,"value"],["placeholder","Select installation status","formControlName","status",3,"readonly","clearable"],["class","text-danger",4,"ngIf"],["for",""],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","start_date",1,"form-control",3,"readonly","click"],["sd","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","btn-icon",2,"padding","0 8px","border-radius","0px","border-color","#ced4da",3,"disabled","click"],[1,"ri-calendar-2-line"],["fxFlex","24.5",1,"form-group","mr-0"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","formControlName","end_date",1,"form-control",3,"readonly","click"],["ed","ngbDatepicker"],["fxFlex","100",1,"form-group"],["cols","30","rows","3","formControlName","address","placeholder","Enter hardware installation address",1,"form-control",3,"required","readonly"],[4,"ngIf"],["class","w-100-p modal-footer",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],[1,"w-100-p","modal-footer"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled"],[1,"ri-check-fill"],["type","button",1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"]],template:function(t,a){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.YNc(1,xn,1,0,"img",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(3,"h4",3),e._uU(4,"Hardware Shipment & Installation"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"label"),e._uU(9,"Installation Required"),e.TgZ(10,"span",7),e._uU(11,"*"),e.qZA(),e.qZA(),e.TgZ(12,"ng-select",8),e.TgZ(13,"ng-option",9),e._uU(14,"Yes"),e.qZA(),e.TgZ(15,"ng-option",9),e._uU(16,"No"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"label"),e._uU(19,"Installation Status"),e.TgZ(20,"span",7),e._uU(21,"*"),e.qZA(),e.qZA(),e.TgZ(22,"ng-select",10),e.TgZ(23,"ng-option",9),e._uU(24,"Not Initiated"),e.qZA(),e.TgZ(25,"ng-option",9),e._uU(26,"In Progress"),e.qZA(),e.TgZ(27,"ng-option",9),e._uU(28,"Completed"),e.qZA(),e.qZA(),e.YNc(29,bn,2,0,"span",11),e.qZA(),e.TgZ(30,"div",6),e.TgZ(31,"label",12),e._uU(32,"Start Date"),e.TgZ(33,"span",7),e._uU(34,"*"),e.qZA(),e.qZA(),e.TgZ(35,"div",13),e.TgZ(36,"input",14,15),e.NdJ("click",function(){return e.CHM(r),e.MAs(37).toggle()}),e.qZA(),e.TgZ(38,"div",16),e.TgZ(39,"button",17),e.NdJ("click",function(T){e.CHM(r);const k=e.MAs(37);return T.stopPropagation(),k.toggle()}),e._UZ(40,"i",18),e.qZA(),e.qZA(),e.qZA(),e.YNc(41,Cn,2,0,"span",11),e.qZA(),e.TgZ(42,"div",19),e.TgZ(43,"label",12),e._uU(44,"End Date"),e.TgZ(45,"span",7),e._uU(46,"*"),e.qZA(),e.qZA(),e.TgZ(47,"div",13),e.TgZ(48,"input",20,21),e.NdJ("click",function(){return e.CHM(r),e.MAs(49).toggle()}),e.qZA(),e.TgZ(50,"div",16),e.TgZ(51,"button",17),e.NdJ("click",function(T){e.CHM(r);const k=e.MAs(49);return T.stopPropagation(),k.toggle()}),e._UZ(52,"i",18),e.qZA(),e.qZA(),e.qZA(),e.YNc(53,Tn,2,0,"span",11),e.qZA(),e.qZA(),e.TgZ(54,"div",22),e.TgZ(55,"label"),e._uU(56,"Address"),e.TgZ(57,"span",7),e._uU(58,"*"),e.qZA(),e.qZA(),e._UZ(59,"textarea",23),e.YNc(60,wn,4,3,"ng-container",24),e.qZA(),e.qZA(),e.YNc(61,On,10,2,"div",25),e.qZA(),e.qZA()}2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("formGroup",a.hiForm),e.xp6(10),e.Q6J("readonly",a.readonly)("clearable",!1),e.xp6(1),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(7),e.Q6J("readonly",a.readonly)("clearable",!1),e.xp6(1),e.Q6J("value","not_initiated"),e.xp6(2),e.Q6J("value","in_progress"),e.xp6(2),e.Q6J("value","completed"),e.xp6(2),e.Q6J("ngIf",a.hiForm.controls.status.hasError("required")&&a.hiForm.controls.status.touched),e.xp6(7),e.Q6J("readonly",a.readonly),e.xp6(3),e.Q6J("disabled",a.readonly),e.xp6(2),e.Q6J("ngIf",a.hiForm.controls.start_date.hasError("required")&&a.hiForm.controls.start_date.touched),e.xp6(7),e.Q6J("readonly",a.readonly),e.xp6(3),e.Q6J("disabled",a.readonly),e.xp6(2),e.Q6J("ngIf",a.hiForm.controls.end_date.hasError("required")&&a.hiForm.controls.end_date.touched),e.xp6(6),e.Q6J("required",a.hiForm.controls.is_required.value)("readonly",a.readonly),e.xp6(1),e.Q6J("ngIf",a.hiForm.controls.address.dirty),e.xp6(1),e.Q6J("ngIf",!a.readonly))},directives:[N.xw,n.O5,p._Y,p.JL,N.yH,p.sg,N.SQ,P.w9,p.JJ,p.u,P.xv,Z.J4,p.Fj,p.Q7],styles:[".drp-container .ng-select-container{box-shadow:none;border-radius:0!important}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer;text-transform:uppercase}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #ececec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover, .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]   .even[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})();function Mn(i,s){if(1&i&&(e.TgZ(0,"h1",14),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",null==t.data?null:t.data.company_name,": #",null==t.data?null:t.data.id,"")}}function Dn(i,s){1&i&&(e.TgZ(0,"h1",14),e._uU(1,"Customer"),e.qZA())}function In(i,s){1&i&&e._UZ(0,"img",15)}function qn(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",19),e.TgZ(4,"span"),e._uU(5," General Details "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function Un(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"h4",21),e._uU(1,"Customer Information"),e.qZA(),e.TgZ(2,"app-customer-detail",22),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onCustomerDetails(r)}),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("customerId",t.customerId)("data",t.data)("readonly",t.readonly)}}function Fn(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",23),e.TgZ(4,"span"),e._uU(5," Upload Documents "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function kn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"h4",21),e._uU(1,"Document Details"),e.qZA(),e.TgZ(2,"app-customer-detail",24),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onUploadDocument(r)}),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("showUploadDocs",!0)("showGeneralDetails",!1)("readonly",t.readonly)("customerId",t.customerId)}}function En(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",25),e.TgZ(4,"span"),e._uU(5," Packages "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function Nn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-customer-packages",26),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onAssignPackage(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("customerId",t.customerId)("readonly",t.readonly)}}function Sn(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",27),e.TgZ(4,"span"),e._uU(5," Features "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function Jn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-features",26),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onAssignFeature(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("customerId",t.customerId)("readonly",t.readonly)}}function Qn(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",28),e.TgZ(4,"span"),e._uU(5," Admins List "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function Yn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-customer-packages",29),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onAdminListSignals(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("showAdminList",!0)("readonly",t.readonly)("showPackages",!1)("customerId",t.customerId)}}function Ln(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",30),e.TgZ(4,"span"),e._uU(5," Hardware "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function Bn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-customer-hardware",26),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onHardwareSignals(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("customerId",t.customerId)("readonly",t.readonly)}}function Wn(i,s){if(1&i&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",30),e.TgZ(4,"span"),e._uU(5," Hardware Shipment & Installation "),e.qZA(),e.qZA(),e.TgZ(6,"span"),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()),2&i){const t=s.opened;e.xp6(7),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function $n(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-hardware-installation",26),e.NdJ("signals",function(r){return e.CHM(t),e.oxw().onHardwareISignals(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("customerId",t.customerId)("readonly",t.readonly)}}let pt=(()=>{class i{constructor(t,a,r){this.activatedRoute=t,this.apiService=a,this.toastrService=r,this.data=null,this.loading=!1,this.readonly=!1,this.customerId=0,this.activeId="gd",this.tabs=[{name:"General Details",disabled:!1},{name:"Upload Documents",disabled:!0},{name:"Packages",disabled:!0},{name:"Features",disabled:!0},{name:"Admins List",disabled:!0},{name:"Hardware",disabled:!0},{name:"Hardware Installation",disabled:!0}],this.activatedRoute.params.subscribe(h=>{this.customerId=h.id}),this.activatedRoute.url.subscribe(h=>{this.readonly="details"===h[0].path})}ngOnInit(){this.customerId>0&&(this.getGeneralDetails(),this.tabs.forEach(t=>{t.disabled=!1}))}getGeneralDetails(){this.loading=!0,this.apiService.get(`${M.N.customerms}/customers/?customer=${this.customerId}`).subscribe(a=>{this.data=a.data.data[0],this.loading=!1},a=>{this.loading=!1,this.toastrService.error(a.error.message,"Error getting general details",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onCustomerDetails(t){t&&(this.loading=!!t.loading&&t.loading,this.customerId=t.id?t.id:this.customerId,this.activeId=t.activeId?t.activeId:this.activeId,"reload"===t.action&&this.getGeneralDetails()),this.tabs[1].disabled=!1}onUploadDocument(t){t&&(this.loading=!!t.loading&&t.loading,this.activeId=t.activeId?t.activeId:this.activeId,this.tabs[2].disabled=!1)}onAssignPackage(t){this.loading=!!t.loading&&t.loading,this.tabs[3].disabled=!1}onAssignFeature(t){this.loading=!!t.loading&&t.loading,this.tabs[4].disabled=!1}onAdminListSignals(t){this.loading=!!t.loading&&t.loading,this.tabs[5].disabled=!1}onHardwareSignals(t){this.loading=!!t.loading&&t.loading,this.tabs[6].disabled=!1}onHardwareISignals(t){this.loading=!!t.loading&&t.loading}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.gz),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-customer"]],decls:28,vars:11,consts:[[1,"page-header","p-12","pl-16","bg-blue-100","w-100-p",2,"margin","-8px 0 8px 0"],["class","page-title fs-20 fw-500",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 50%; z-index: 1;",4,"ngIf"],[3,"closeOthers","activeIds"],["acc","ngbAccordion"],["id","gd"],["ngbPanelHeader","","class","mb-8"],["ngbPanelContent","","class","p-body"],["id","ud",3,"disabled"],["id","pkg",3,"disabled"],["id","feat",3,"disabled"],["id","al",3,"disabled"],["id","hw",3,"disabled"],["id","hi",3,"disabled"],[1,"page-title","fs-20","fw-500"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","50%","z-index","1"],["ngbPanelToggle","",1,"w-100-p","btn",2,"color","#e60000"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p"],["fxLayoutGap","8px","fxLayoutAlign","start center"],[1,"ri-todo-line"],[3,"ngClass"],[1,"fs-12","fw-600","text-uppercase","bg-blue-100",2,"padding","4px"],[3,"customerId","data","readonly","signals"],[1,"ri-file-copy-2-line"],[3,"showUploadDocs","showGeneralDetails","readonly","customerId","signals"],[1,"ri-list-settings-line"],[3,"customerId","readonly","signals"],[1,"ri-file-mark-line"],[1,"ri-admin-line"],[3,"showAdminList","readonly","showPackages","customerId","signals"],[1,"ri-file-settings-line"]],template:function(t,a){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.YNc(2,Mn,2,2,"h1",1),e.YNc(3,Dn,2,0,"h1",1),e.qZA(),e.YNc(4,In,1,0,"img",2),e.TgZ(5,"ngb-accordion",3,4),e.TgZ(7,"ngb-panel",5),e.YNc(8,qn,8,1,"ng-template",6),e.YNc(9,Un,3,3,"ng-template",7),e.qZA(),e.TgZ(10,"ngb-panel",8),e.YNc(11,Fn,8,1,"ng-template",6),e.YNc(12,kn,3,4,"ng-template",7),e.qZA(),e.TgZ(13,"ngb-panel",9),e.YNc(14,En,8,1,"ng-template",6),e.YNc(15,Nn,1,2,"ng-template",7),e.qZA(),e.TgZ(16,"ngb-panel",10),e.YNc(17,Sn,8,1,"ng-template",6),e.YNc(18,Jn,1,2,"ng-template",7),e.qZA(),e.TgZ(19,"ngb-panel",11),e.YNc(20,Qn,8,1,"ng-template",6),e.YNc(21,Yn,1,4,"ng-template",7),e.qZA(),e.TgZ(22,"ngb-panel",12),e.YNc(23,Ln,8,1,"ng-template",6),e.YNc(24,Bn,1,2,"ng-template",7),e.qZA(),e.TgZ(25,"ngb-panel",13),e.YNc(26,Wn,8,1,"ng-template",6),e.YNc(27,$n,1,2,"ng-template",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!!a.data),e.xp6(1),e.Q6J("ngIf",!a.data),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("closeOthers",!0)("activeIds",a.activeId),e.xp6(5),e.Q6J("disabled",a.tabs[1].disabled),e.xp6(3),e.Q6J("disabled",a.tabs[2].disabled),e.xp6(3),e.Q6J("disabled",a.tabs[3].disabled),e.xp6(3),e.Q6J("disabled",a.tabs[4].disabled),e.xp6(3),e.Q6J("disabled",a.tabs[5].disabled),e.xp6(3),e.Q6J("disabled",a.tabs[6].disabled))},directives:[n.O5,Z.gY,Z.Gk,Z.k9,Z.gW,Z.I_,N.xw,N.Wh,N.SQ,n.mk,R.oO,rt,Bt,en,pn,Pn],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .accordion .card-header{padding:0}  .accordion .card-body{padding:12px;padding-bottom:0!important}"]}),i})();var Hn=m(7709),ht=m(945),ft=m(409),vt=m(8307),Rn=m(9522);class xt{}xt.config={title:"Customer",slug:`${M.N.customerms}/customers/?`,showHeader:!0,showAdd:!0,showRowActions:!0,doApiCall:!0,searchOptions:[{column:"company_name",title:"Company"},{column:"group_name",title:"Group"},{column:"phone_number",title:"Phone No"},{column:"email",title:"Email"},{column:"customer_status",title:"Status"},{column:"customer_packages",title:"Package"},{column:"super_admin_email",title:"SuperAdmin Email"}],acColumnWidth:"100px",rowActions:[{icon:"ri-pencil-line",type:"icon",tooltip:"Edit",action:"onEdit"},{icon:"ri-settings-2-line",type:"icon",tooltip:"Change Status",action:"onChangeStatus"}],columns:[{name:"id",title:"id",visible:!1},{name:"company_name",title:"Company",sortable:!0,clickable:!0,action:"onDetails"},{name:"group_name",title:"Group",sortable:!0},{name:"phone_number",title:"Phone Number",sortable:!0},{name:"email",title:"Email",sortable:!0},{name:"customer_status",title:"status",sortable:!0},{name:"customer_packages",title:"Package",width:"252px",isLoop:!0,makeOvals:!0,item_name:"package_name",sortable:!0},{name:"customer_admins",title:"SuperAdmin Email",width:"200px",isLoop:!0,sortable:!0}]};var Kn=m(405),jn=m(5507);function zn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"button",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),h=e.MAs(25);return r.scrollLeft(h)}),e._UZ(2,"i",21),e.qZA(),e.qZA()}}function Vn(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",22),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",23),e._uU(5),e.qZA(),e.qZA(),e.BQk()),2&i){const t=s.$implicit,a=s.last;e.xp6(1),e.ekj("mr-0",a),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function Xn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"button",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),h=e.MAs(25);return r.scrollRight(h)}),e._UZ(2,"i",25),e.qZA(),e.qZA()}}const eo=[{path:"",component:(()=>{class i{constructor(t,a,r,h){this.checkPermService=t,this.router=a,this.apiService=r,this.toastrService=h,this.actions=new Hn.xQ,this.loading=!1,this.readonly=!1,this.showFilters=!1,this.count=0;const T=JSON.parse(JSON.stringify(xt.config));this.config=new Rn.Xu(T),this.cardsInfo={total_customers:14,active_customers:10,inactive_customers:4,subscriptions:[]}}ngOnInit(){this.checkPermission(),this.getCustomerCardsInfo()}scrollLeft(t){const h=[.001,.021,.136,.341,.341,.136,.021,.001];(0,ht.F)(50).pipe((0,ft.o)(T=>T<8),(0,vt.b)(T=>t.scrollLeft-=228*h[T])).subscribe()}scrollRight(t){const h=[.001,.021,.136,.341,.341,.136,.021,.001];(0,ht.F)(50).pipe((0,ft.o)(T=>T<8),(0,vt.b)(T=>t.scrollLeft+=228*h[T])).subscribe()}getCustomerCardsInfo(){this.apiService.get(`${M.N.customerms}/customers/get-customer-usecase-subscription-count`).subscribe(a=>{this.cardsInfo=a.data},a=>{[401,2,3,11,151,153,18,300,301].includes(a.error.status)?this.toastrService.error(a.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(a.error.message,"Getting error customer cards information",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onTableSignals(t){"OpenForm"===t.type?this.onAddNew():"onData"===t.type?this.count=t.data.count:"onEdit"===t.type?this.onEdit(t.row):"onDetails"===t.type?this.router.navigate(["/admin/customers/details",t.row.id]):"onChangeStatus"===t.type&&this.changeCustomerStatus(t.row)}checkPermission(){let t=this.checkPermService.checkPermissions();this.readonly=!(t&&t.length>0&&t.includes("RW"))}onAddNew(t){this.router.navigateByUrl("/admin/customers/add")}onEdit(t){this.router.navigate(["/admin/customers/edit",t.id])}changeCustomerStatus(t){let a="Active"===t.customer_status?"InActive":"Active";const h=`${M.N.customerms}/customers/?id=${t.id}&status=${"InActive"===a?2:1}`;G.c.warn("Are you sure?","You want to make this customer "+a,"Yes").subscribe(T=>{T.positive&&this.apiService.delete(h).subscribe(k=>{this.toastrService.success(k.message,"Set customer "+a,{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.actions.next({action:"reload"}),this.getCustomerCardsInfo()},k=>{this.toastrService.error(k.error.message,"Error setting customer status as"+a,{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Kn.$),e.Y36(D.F0),e.Y36(Y.s),e.Y36(L._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-customer"]],decls:30,vars:8,consts:[[1,"card","w-100-p",2,"border","none","height","100%"],[1,"fs-14","fw-600","p-16","pt-10","pb-10","mb-0",2,"border-bottom","1px solid #ececec"],["ngbTooltip","Company, Group, Phone Number, Email, Package, Superadmin Email, Actions","triggers","mouseenter:mouseleave","container","body","placement","top",1,"ri-information-line","info","grey-400"],["fxLayout","row wrap",1,"p-16","w-100-p",2,"height","calc(100% - 40px)"],["fxLayoutGap","4px","fxLayout","row",1,"h-56","mb-12","white","text-center",2,"width","100% !important"],["fxLayout","row","fxLayoutAlign","space-between center",1,"card","round","p-16","pt-0","pb-0",2,"background","#f60000","height","100%","width","228px"],["src","./assets/images/icon-customer-link.png","alt","","height","40"],["fxFlex","","fxLayout","column"],[1,"fs-20","fw-600"],[1,"mb-10"],[1,"fw-600"],["fxLayout","row","fxLayoutAlign","space-between start",1,"h-100-p","scrl-div"],["class","bttn-left",4,"ngIf"],["name","dv",1,"h-100-p","w-100-p","pl-16","pr-16",2,"overflow","hidden","display","-webkit-box !important"],["widget",""],[4,"ngFor","ngForOf"],["class","bttn-right",4,"ngIf"],[1,"w-100-p",2,"height","calc(100% - 68px)"],[3,"config","actions","signals"],[1,"bttn-left"],[1,"btn","btn-icon","btn-sm","btn-danger","btn-round","white","lh-18","h-28","w-28",2,"padding","4px",3,"click"],[1,"ri-arrow-left-s-line"],["fxLayout","column","fxLayoutAlign","center center",1,"bg-black-700","card","round","h-100-p","pl-8","pr-8","mr-8",2,"min-width","10%"],[1,"fs-20"],[1,"bttn-right"],[1,"ri-arrow-right-s-line"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h3",1),e._uU(2,"Customers "),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e._UZ(7,"img",6),e.TgZ(8,"div",7),e.TgZ(9,"div"),e._uU(10,"Customer"),e.qZA(),e.TgZ(11,"div",8),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"div",9),e._uU(15,"Active: "),e.TgZ(16,"span",10),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"div"),e._uU(19,"Inactive: "),e.TgZ(20,"span",10),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",11),e.YNc(23,zn,3,0,"div",12),e.TgZ(24,"div",13,14),e.YNc(26,Vn,6,4,"ng-container",15),e.qZA(),e.YNc(27,Xn,3,0,"div",16),e.qZA(),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"general-table",18),e.NdJ("signals",function(h){return a.onTableSignals(h)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(12),e.Oqu(a.cardsInfo.total_customers),e.xp6(5),e.Oqu(a.cardsInfo.active_customers),e.xp6(4),e.Oqu(a.cardsInfo.inactive_customers),e.xp6(2),e.Q6J("ngIf",a.cardsInfo.subscriptions.length>5),e.xp6(3),e.Q6J("ngForOf",a.cardsInfo.subscriptions),e.xp6(1),e.Q6J("ngIf",a.cardsInfo.subscriptions.length>5),e.xp6(2),e.Q6J("config",a.config)("actions",a.actions))},directives:[Z._L,N.xw,N.SQ,N.Wh,N.yH,n.O5,n.sg,jn.b],styles:[".info[_ngcontent-%COMP%]{font-weight:400;margin-left:10px}.info[_ngcontent-%COMP%]:hover{text-decoration:underline}.scrl-div[_ngcontent-%COMP%]{width:calc(100% - 242px);position:relative;height:100%}.scrl-div[_ngcontent-%COMP%]   .bttn-left[_ngcontent-%COMP%]{position:absolute;left:0;top:25%;z-index:1;display:none}.scrl-div[_ngcontent-%COMP%]   .bttn-right[_ngcontent-%COMP%]{position:absolute;right:0;top:25%;z-index:1;display:none}.scrl-div[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%], .scrl-div[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{display:block;transition:all 2s ease-in}.even-row[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}"]}),i})()},{path:"add",component:pt},{path:"edit/:id",component:pt},{path:"details/:id",component:pt}];let to=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[D.Bz.forChild(eo)]]}),i})();var no=m(3522),oo=m(9309),io=m(2382);let ao=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[n.ez,p.UX,p.u5,to,Z.IJ,o.o9,P.A0,A.U,O.t,l.o,no.C,oo.Y,io.M]]}),i})()},8366:(j,J,m)=>{m.d(J,{G:()=>fe});var n=m(8583),p=m(2340),o=m(7716),Z=m(3633),P=m(5830),l=m(9344),A=m(1819);function O(Q,F){if(1&Q){const C=o.EpF();o.TgZ(0,"div",2),o.TgZ(1,"div",3),o.TgZ(2,"h4",4),o._uU(3,"Please Wait"),o.qZA(),o.TgZ(4,"button",5),o.NdJ("click",function(){return o.CHM(C),o.oxw().abortVerification()}),o._uU(5,"\xd7"),o.qZA(),o.qZA(),o.TgZ(6,"div",6),o.TgZ(7,"div",7),o._UZ(8,"img",8),o.TgZ(9,"h4"),o._uU(10,"Loading..."),o.qZA(),o.qZA(),o.TgZ(11,"div",9),o.TgZ(12,"button",10),o.NdJ("click",function(){return o.CHM(C),o.oxw().abortVerification()}),o._uU(13,"Abort Verification"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}}function D(Q,F){1&Q&&o._UZ(0,"img",22)}function M(Q,F){if(1&Q&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.qZA()),2&Q){const C=F.$implicit,f=F.index;o.ekj("odd",F.odd),o.xp6(2),o.Oqu(f+1),o.xp6(2),o.Oqu(C.title),o.xp6(2),o.Oqu(C.deviceId)}}function e(Q,F){if(1&Q&&(o.ynx(0),o.YNc(1,M,7,5,"tr",23),o.BQk()),2&Q){const C=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",C.dataSource)}}function Y(Q,F){1&Q&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",24),o._uU(3,"No Record Found"),o.qZA(),o.qZA(),o.BQk())}function L(Q,F){if(1&Q){const C=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(C),o.oxw(2).SendActionToDevice("beep")}),o._uU(1,"Beep"),o.qZA()}if(2&Q){const C=o.oxw(2);o.Q6J("disabled",!C.deviceStatus)}}function N(Q,F){if(1&Q){const C=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(C),o.oxw(2).SendActionToDevice("reboot")}),o._uU(1,"Reboot"),o.qZA()}if(2&Q){const C=o.oxw(2);o.Q6J("disabled",!C.deviceStatus)}}function R(Q,F){if(1&Q){const C=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){return o.CHM(C),o.oxw(2).SendActionToDevice("where")}),o._uU(1,"Query Location"),o.qZA()}if(2&Q){const C=o.oxw(2);o.Q6J("disabled",!C.deviceStatus)}}function G(Q,F){if(1&Q){const C=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(C),o.oxw(2).SendActionToDevice("checkFrequency")}),o._uU(1,"Check Frequency"),o.qZA()}if(2&Q){const C=o.oxw(2);o.Q6J("disabled",!C.deviceStatus)}}function H(Q,F){if(1&Q){const C=o.EpF();o.ynx(0),o.TgZ(1,"div",3),o.TgZ(2,"h4",4),o._uU(3),o.qZA(),o.TgZ(4,"div",11),o.TgZ(5,"div",12),o._UZ(6,"span",13),o.TgZ(7,"span"),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return o.CHM(C),o.oxw().onCloseModel()}),o._uU(10,"\xd7"),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,D,1,0,"img",14),o.TgZ(12,"div",15),o.TgZ(13,"table",16),o.TgZ(14,"thead"),o.TgZ(15,"tr"),o.TgZ(16,"th",17),o._uU(17,"SR #"),o.qZA(),o.TgZ(18,"th"),o._uU(19,"PARAMETERS"),o.qZA(),o.TgZ(20,"th"),o._uU(21,"DETAILS"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(22,"tbody"),o.YNc(23,e,2,1,"ng-container",1),o.YNc(24,Y,4,0,"ng-container",1),o.qZA(),o.qZA(),o.TgZ(25,"div",18),o.YNc(26,L,2,1,"button",19),o.YNc(27,N,2,1,"button",19),o.YNc(28,R,2,1,"button",20),o.YNc(29,G,2,1,"button",19),o.TgZ(30,"button",21),o.NdJ("click",function(){return o.CHM(C),o.oxw().deviceStatusBySDK()}),o._uU(31,"Refresh"),o.qZA(),o.qZA(),o.qZA(),o.BQk()}if(2&Q){const C=o.oxw();o.xp6(3),o.Oqu(C.title),o.xp6(3),o.Udp("background",C.deviceStatus?"#36ab7a":"#f96868"),o.xp6(2),o.Oqu(C.deviceStatus?"Online":"Offline"),o.xp6(3),o.Q6J("ngIf",C.loading),o.xp6(12),o.Q6J("ngIf",C.dataSource.length>0),o.xp6(1),o.Q6J("ngIf",0===C.dataSource.length),o.xp6(2),o.Q6J("ngIf",C.cqhn15.includes(C.deviceType)&&C.sensorsInfo.includes("is_beepable")),o.xp6(1),o.Q6J("ngIf",C.cqhn15.includes(C.deviceType)),o.xp6(1),o.Q6J("ngIf",C.cqhn15.includes(C.deviceType)),o.xp6(1),o.Q6J("ngIf",C.cqhn15.includes(C.deviceType))}}let fe=(()=>{class Q{constructor(C,f,y,E){this.modalRef=C,this.apiService=f,this.toastrService=y,this.datePipe=E,this.hn1=["HN v1.0","hn v1.0"],this.hn15=["HN v1.5","hn v1.5"],this.cq=["Concox Qbit","concox qbit"],this.cqhn15=["Concox Qbit","concox qbit","HN v1.5","hn v1.5"],this.cqhn1=["Concox Qbit","concox qbit","HN v1.0","hn v1.0"],this.cqhn115=["Concox Qbit","concox qbit","HN v1.0","hn v1.0","HN v1.5","hn v1.5"],this.loadingApi=!1,this.loading=!1,this.deviceStatus=!1,this.title="Device Diagnostics",this.deviceType="Concox Qbit",this.data=null,this.ld=null,this.cusDataFreq=null,this.frequencyData=null,this.dataSource=[],this.oldDataSource=[],this.sensorsInfo=[]}ngOnInit(){this.cqhn115.includes(this.deviceType)?this.deviceStatusBySDK():(this.toastrService.error("","Device type invalid",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.onCloseModel())}deviceStatusBySDK(){this.loading=!0;let C="";this.cq.includes(this.deviceType)?C=8===this.data.package?`${p.N.AssetbaseUrl}/am/sendActionToDevice/?imei=${this.data.device_id}&action=checkStatus&device_type=${this.deviceType}`:`${p.N.AssetbaseUrlAdvance}/am/sendActionToDevice/?imei=${this.data.device_id}&action=checkStatus&device_type=${this.deviceType}`:(this.hn1.includes(this.deviceType)||this.hn15.includes(this.deviceType))&&(C=`${p.N.AssetbaseUrlAdvance}/am/sendActionToDevice/?imei=${this.data.device_id}&action=checkStatus&device_type=${this.deviceType}&sim_no=${this.data.sim_serial_number}`),this.apiService.get(C).subscribe(f=>{this.loading=!1,this.getDeviceFrequency(),this.getSensorsInfo(),this.cq.includes(this.deviceType)?(2e3===f.status||2001===f.status||2003===f.status?(this.deviceStatus=!1,this.toastrService.error(f.message,"Error getting device status info",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})):this.deviceStatus=!0,this.getData(this.data.device_id)):(this.hn1.includes(this.deviceType)||this.hn15.includes(this.deviceType))&&(this.deviceStatus="Device is offline"!==f.message,this.getData(this.data.device_id))},f=>{this.loading=!1,this.getDeviceFrequency(),this.getSensorsInfo(),setTimeout(()=>{this.getData(this.data.device_id)},50),this.toastrService.error(f.error.message,"Error getting device status",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getSensorsInfo(){this.apiService.get(`${p.N.inventoryms}/sensor-configuration/`).subscribe(f=>{f.data.data.forEach(E=>{this.sensorsInfo.push(E.sensor_id)})},f=>{this.toastrService.error("",f.error.message,{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getDeviceFrequency(){let C="";this.cq.includes(this.deviceType)?C=8===this.data.package?`${p.N.AssetbaseUrl}/am/device_frequency/?device_id=${this.data.device_id}`:`${p.N.AssetbaseUrlAdvance}/am/device_frequency/?device_id=${this.data.device_id}`:(this.hn1.includes(this.deviceType)||this.hn15.includes(this.deviceType))&&(C=`${p.N.AssetbaseUrlAdvance}/am/device_frequency/?device_id=${this.data.device_id}`),this.apiService.get(C).subscribe(f=>{this.frequencyData=f.data.data,f.data.data.length>0&&(this.cusDataFreq=f.data.data[0].frequency)})}getData(C){this.loading=!0;let f="";f=`${p.N.HTracking}/hypernet/get_last_packet_device?device_id=${C}`,this.apiService.get(f).subscribe(y=>{var E;this.dataSource=[];const U=y.data;this.ld=U.ld;const q=U.debug.split(",");let z=U.sos_timestamp?this.datePipe.transform(1e3*U.sos_timestamp,"yyyy-MM-dd hh:mm:ss aa"):"";U.device_id===this.data.device_id&&(this.dataSource.push({id:0,title:"Device ID",deviceId:U.device_id},{id:1,title:"Device Type",deviceId:this.data.device_type_name},{id:2,title:"Firmware Version",deviceId:q[0]},{id:3,title:"Signal Strength",deviceId:q[1]},{id:4,title:"Current Data Frequency",deviceId:this.cusDataFreq?this.cusDataFreq+" min":null},{id:5,title:"Last Updated Timestamp",deviceId:U.timestamp?this.datePipe.transform(1e3*U.timestamp,"yyyy-MM-dd hh:mm:ss aa"):""},{id:6,title:"Last Track Time",deviceId:(null===(E=this.frequencyData[0])||void 0===E?void 0:E.track_time)?this.datePipe.transform(this.frequencyData[0].track_time,"yyyy-MM-dd hh:mm:ss aa"):""},{id:7,title:"Location Status",deviceId:0}),this.sensorsInfo.includes("has_speed")&&this.dataSource.push({id:8,title:"Current Speed",deviceId:U.speed?U.speed+" Km/h":""}),this.cqhn15.includes(this.deviceType)&&(this.sensorsInfo.includes("is_bettery_level")&&this.dataSource.push({id:9,title:"Battery Level",deviceId:U.battery_level?U.battery_level+" %":""}),this.dataSource.push({id:10,title:"Last SOS Timestamp",deviceId:z})),["HN v1.5","hn v1.5"].includes(this.deviceType)&&(this.sensorsInfo.includes("is_temper_detection")&&this.dataSource.push({id:11,title:"Last Tamper Timestamp",deviceId:U.tampering_alerts?this.datePipe.transform(1e3*U.timestamp,"yyyy-MM-dd hh:mm aa"):""}),this.sensorsInfo.includes("is_temprature_sensor")&&this.dataSource.push({id:12,title:"Last Temperature Value",deviceId:U.temperature?U.temperature:""}),this.sensorsInfo.includes("is_motion_sensor")&&this.dataSource.push({id:18,title:"Motion Sensor Operations Flag",deviceId:q&&q.length?"1"==q[7]?"Working":"0"==q[7]?"Faulty":"":""}),this.sensorsInfo.includes("is_humidity_sensor")&&this.dataSource.push({id:17,title:"Humidity Sensor Operation Flag",deviceId:q&&q.length?"1"==q[6]?"Working":"0"==q[6]?"Faulty":"":""}),this.sensorsInfo.includes("is_orientation_sensor")&&this.dataSource.push({id:19,title:"Orientation Sensor Operations Flag",deviceId:q&&q.length?"1"==q[8]?"Working":"0"==q[8]?"Faulty":"":""}),this.dataSource.push({id:13,title:"Last Humidity Value",deviceId:U.humidity?U.humidity+"%":null},{id:14,title:"Data Backup Operations Flag",deviceId:q&&q.length?"1"==q[2]?"Working":"0"==q[2]?"Faulty":"":""},{id:15,title:"Battery Level Operations Indicator",deviceId:q&&q.length?"1"==q[3]?"Working":"0"==q[3]?"Faulty":"":""},{id:16,title:"Temperature Sensor Operation Flag",deviceId:q&&q.length?"1"==q[5]?"Working":"0"==q[5]?"Faulty":"":""})),setTimeout(()=>{this.dataSource[7].deviceId=0==this.ld||null===this.ld?"No Location":1==this.ld?"GPS Location":2==this.ld?"WiFi":3==this.ld?"GSM":""},100)),this.loading=!1,this.loadingApi=!1},y=>{this.loading=!1,this.loadingApi=!1})}SendActionToDevice(C){this.loadingApi=!0;let f="";this.cq.includes(this.deviceType)?f=8===this.data.package?`${p.N.AssetbaseUrl}/am/sendActionToDevice/?imei=${this.data.device_id}&action=${C}&device_type=${this.deviceType}`:`${p.N.AssetbaseUrlAdvance}/am/sendActionToDevice/?imei=${this.data.device_id}&action=${C}&device_type=${this.deviceType}`:(this.hn1.includes(this.deviceType)||this.hn15.includes(this.deviceType))&&(f=`${p.N.AssetbaseUrlAdvance}/am/sendActionToDevice/?imei=${this.data.device_id}&action=${C}&device_type=${this.deviceType}`),this.apiService.get(f).subscribe(y=>{this.loadingApi=!1,this.cq.includes(this.deviceType)&&((2e3===y.status||2001===y.status)&&(this.deviceStatus=!1),("where"===C&&2005===y.status||"checkFrequency"===C)&&this.deviceStatusBySDK()),this.toastrService.success(y.message,"",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})},y=>{(this.hn1.includes(this.deviceType)||this.hn15.includes(this.deviceType))&&(this.getDeviceFrequency(),this.getData(this.data.device_id)),this.loadingApi=!1})}abortVerification(){this.modalRef.close()}onCloseModel(){this.modalRef.close()}}return Q.\u0275fac=function(C){return new(C||Q)(o.Y36(Z.Kz),o.Y36(P.s),o.Y36(l._W),o.Y36(n.uU))},Q.\u0275cmp=o.Xpm({type:Q,selectors:[["app-device-diagnostics"]],features:[o._Bn([n.uU])],decls:2,vars:2,consts:[["class","waiting",4,"ngIf"],[4,"ngIf"],[1,"waiting"],[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100-p","qb-loader"],["fxFlex","100",2,"text-align","center"],["src","./assets/images/progress-icon.jpg","alt","",2,"height","80px"],["fxFlex","100",1,"btn-abort"],[1,"btn","btn-danger","btn-round",3,"click"],["fxLayout","row"],[1,"status-container"],[1,"status"],["src","/assets/images/block-loader.gif","alt","Loading","srcset","","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxLayout","row wrap",1,"modal-body","w-100-p",2,"position","relative"],[1,"table"],["width","32px"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start start",1,"p-16","pb-0"],["fxFlex","31","class","btn btn-success btn-round mb-12",3,"disabled","click",4,"ngIf"],["fxFlex","31","class","btn btn-success btn-round mr-0",3,"disabled","click",4,"ngIf"],["fxFlex","31",1,"btn","btn-success","btn-round",3,"click"],["src","/assets/images/block-loader.gif","alt","Loading","srcset","","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],[3,"odd",4,"ngFor","ngForOf"],["colspan","3"],["fxFlex","31",1,"btn","btn-success","btn-round","mb-12",3,"disabled","click"],["fxFlex","31",1,"btn","btn-success","btn-round","mr-0",3,"disabled","click"]],template:function(C,f){1&C&&(o.YNc(0,O,14,0,"div",0),o.YNc(1,H,32,11,"ng-container",1)),2&C&&(o.Q6J("ngIf",f.loading),o.xp6(1),o.Q6J("ngIf",!f.loading))},directives:[n.O5,A.xw,A.Wh,A.yH,A.SQ,n.sg],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}.waiting[_ngcontent-%COMP%]{min-width:300px}.qb-loader[_ngcontent-%COMP%]{width:100%;padding:20px 0;margin:0}.btn-abort[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.status-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.status[_ngcontent-%COMP%]{margin-right:4px;margin-top:2px;height:16px;width:16px;border-radius:50%;background:#36ab7a}.odd[_ngcontent-%COMP%]{background-color:#fcfdfd}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 0 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;width:28px!important;height:28px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}"]}),Q})()},2382:(j,J,m)=>{m.d(J,{M:()=>P});var n=m(8583),p=m(5566),o=m(3633),Z=m(7716);let P=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=Z.oAB({type:l}),l.\u0275inj=Z.cJS({imports:[[n.ez,p.o9,o.IJ]]}),l})()},9785:(j,J,m)=>{m.d(J,{z:()=>P});var n=m(8583),p=m(5566),o=m(3633),Z=m(7716);let P=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=Z.oAB({type:l}),l.\u0275inj=Z.cJS({imports:[[n.ez,o.IJ,p.o9]]}),l})()},2269:(j,J,m)=>{m.d(J,{B:()=>A});var n=m(8583),p=m(5566),o=m(665),Z=m(3633),P=m(9785),l=m(7716);let A=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=l.oAB({type:O}),O.\u0275inj=l.cJS({imports:[[n.ez,o.u5,Z.IJ,p.o9,P.z]]}),O})()},946:(j,J,m)=>{m.d(J,{t:()=>l});var n=m(7716),p=m(3633),o=m(5830),Z=m(9344);let P=(()=>{class A{constructor(D){this.modalRef=D,this.title="Title",this.signal=new n.vpe}ngOnInit(){console.log(this.title)}onCloseModel(){this.signal.emit(this.modalRef)}}return A.\u0275fac=function(D){return new(D||A)(n.Y36(p.Kz))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-dialog-header"]],inputs:{title:"title"},outputs:{signal:"signal"},decls:5,vars:1,consts:[[1,"modal-header"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close","grey-400","fw-400",3,"click"]],template:function(D,M){1&D&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n._uU(2),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return M.onCloseModel()}),n._uU(4,"\xd7"),n.qZA(),n.qZA()),2&D&&(n.xp6(2),n.Oqu(M.title))},styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:44px!important;padding:4px!important;vertical-align:middle}"]}),A})(),l=(()=>{class A{constructor(D,M,e){this.modalRef=D,this.apiService=M,this.toastrService=e,this.data=null,this.slug="",this.fileName="",this.directDownload=!1}ngOnInit(){}onDownload(D){this.apiService.getExportXlsPdf(this.directDownload?`${this.slug}?export=${D}`:`${this.slug}&export=${D}`).subscribe(e=>{"pdf"===D?this.downloadPdf(e):this.downloadCSV(e),this.modalRef.close()},e=>{this.toastrService.error(e.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onCloseModal(D){D.close()}downloadPdf(D){const e=new Blob([D],{type:"application/pdf"}),Y=window.URL.createObjectURL(e);let L=document.createElement("a");L.href=Y,L.download=this.fileName,L.click()}downloadCSV(D){const e=new Blob([D],{type:"application/vnd.ms-excel"}),Y=window.URL.createObjectURL(e);let L=document.createElement("a");L.href=Y,L.download=this.fileName,L.click()}}return A.\u0275fac=function(D){return new(D||A)(n.Y36(p.Kz),n.Y36(o.s),n.Y36(Z._W))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-download-file"]],inputs:{slug:"slug",fileName:"fileName",directDownload:"directDownload"},decls:16,vars:1,consts:[[3,"title","signal"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group",2,"margin-bottom","20px !important"],[1,"w-100-p","btn-group","btn-group-toggle"],["ngbButtonLabel","","role","group",1,"btn-group","p-0",2,"border","1px solid #e4eaec",3,"click"],["type","button","ngbButton","",1,"btn","btn-outline","btn-default"],["src","assets/images/icon-xls.png","height","50"],[1,"fs-12"],["src","assets/images/icon-pdf.png","height","50"]],template:function(D,M){1&D&&(n.TgZ(0,"app-dialog-header",0),n.NdJ("signal",function(Y){return M.onCloseModal(Y)}),n.qZA(),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n.NdJ("click",function(){return M.onDownload("xls")}),n.TgZ(7,"button",7),n._UZ(8,"img",8),n.TgZ(9,"div",9),n._uU(10,"Download XLS"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",6),n.NdJ("click",function(){return M.onDownload("pdf")}),n.TgZ(12,"button",7),n._UZ(13,"img",10),n.TgZ(14,"div",9),n._uU(15,"Download PDF"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&D&&n.Q6J("title","Choose Format")},directives:[P,p.mL],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:44px!important;padding:4px!important;vertical-align:middle}"]}),A})()},2801:(j,J,m)=>{m.d(J,{I2:()=>Z});var n=m(8226);const Z={date:(P,l,A)=>null==P?"N/A":n.Z("string"==typeof P?new Date(P):new Date(1e3*P),"dd-MM-yyyy"),datetime:(P,l,A)=>null==P?"N/A":n.Z(new Date(1e3*P),"dd-MM-yyyy, hh:mm")}},5507:(j,J,m)=>{m.d(J,{b:()=>Ne});var n=m(7716),p=m(9522),o=m(946),Z=m(5174),P=m(7709),l=m(6782),A=m(2801),O=m(405),D=m(5830),M=m(9344),e=m(3633),Y=m(8583),L=m(1819),N=m(3437),R=m(8030),G=m(5748);function H(v,S){1&v&&n._UZ(0,"img",5)}function fe(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"app-search",14),n.NdJ("signal",function(I){return n.CHM(u),n.oxw(2).onSearch(I)}),n.qZA()}if(2&v){const u=n.oxw(2);n.Q6J("cols",u.config.searchOptions)("showFilters",u.config.showSearchFilters)}}function Q(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){return n.CHM(u),n.oxw(2).onAddNew()}),n._UZ(1,"i",16),n._uU(2),n.qZA()}if(2&v){const u=n.oxw(2);n.xp6(2),n.hij(" ",u.config.addBtnText," ")}}function F(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){return n.CHM(u),n.oxw(2).onOptionalBtn()}),n._UZ(1,"i",18),n._uU(2),n.qZA()}if(2&v){const u=n.oxw(2);n.xp6(1),n.Q6J("ngClass",u.config.optionalBtnIcon),n.xp6(1),n.hij(" ",u.config.optionalBtnText," ")}}function C(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"button",15),n.NdJ("click",function(){return n.CHM(u),n.oxw(2).onDownload()}),n._UZ(2,"i",19),n._uU(3," Download "),n.qZA(),n.qZA()}}function f(v,S){if(1&v&&(n.TgZ(0,"div",6),n.TgZ(1,"div",7),n.YNc(2,fe,1,2,"app-search",8),n.qZA(),n.TgZ(3,"div",9),n.TgZ(4,"div",10),n.YNc(5,Q,3,1,"button",11),n.qZA(),n.YNc(6,F,3,2,"button",12),n.YNc(7,C,4,0,"div",13),n.qZA(),n.qZA()),2&v){const u=n.oxw();n.xp6(2),n.Q6J("ngIf",u.config.showSearch),n.xp6(3),n.Q6J("ngIf",u.config.showAdd&&!u.readonly),n.xp6(1),n.Q6J("ngIf",u.config.showOptionalBtn&&!u.readonly),n.xp6(1),n.Q6J("ngIf",u.config.showDownload)}}function y(v,S){if(1&v&&(n.TgZ(0,"th",32),n._uU(1),n.ALo(2,"uppercase"),n.qZA()),2&v){const u=n.oxw(2).$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,u.title))}}function E(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"th",33),n.NdJ("sort",function(I){n.CHM(u);const B=n.oxw(2).$implicit;return n.oxw(2).onSort(I,B)}),n._uU(1),n.ALo(2,"uppercase"),n.qZA()}if(2&v){const u=n.oxw(2).$implicit;n.Q6J("sortable",u.name),n.xp6(1),n.Oqu(n.lcZ(2,2,u.title))}}function U(v,S){if(1&v&&(n.ynx(0),n.YNc(1,y,3,3,"th",30),n.YNc(2,E,3,4,"th",31),n.BQk()),2&v){const u=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",!u.sortable),n.xp6(1),n.Q6J("ngIf",u.sortable)}}function q(v,S){if(1&v&&(n.ynx(0),n.YNc(1,U,3,2,"ng-container",13),n.BQk()),2&v){const u=S.$implicit;n.xp6(1),n.Q6J("ngIf",u.visible)}}function z(v,S){if(1&v&&(n.TgZ(0,"th",34),n.TgZ(1,"span",35),n._uU(2," Actions "),n.qZA(),n.qZA()),2&v){const u=n.oxw(2);n.Q6J("width",u.config.acColumnWidth)}}function _e(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"a",42),n.NdJ("click",function(){n.CHM(u);const I=n.oxw(2).$implicit,B=n.oxw().$implicit;return n.oxw(3).onCellClick(B,I)}),n._uU(1),n.qZA()}if(2&v){const u=n.oxw(2).$implicit,b=n.oxw().$implicit;n.xp6(1),n.Oqu(u.value?b[u.name]=u.value:b[u.name])}}function ue(v,S){if(1&v&&n._UZ(0,"span",44),2&v){const u=n.oxw(3).$implicit,b=n.oxw().$implicit,I=n.oxw(3);n.Q6J("innerHtml",I.cellValue(u,b),n.oJD)}}function ge(v,S){1&v&&(n.TgZ(0,"span"),n._uU(1,", "),n.qZA())}function me(v,S){if(1&v&&(n.TgZ(0,"span"),n._uU(1),n.YNc(2,ge,2,0,"span",13),n.qZA()),2&v){const u=n.oxw(),b=u.$implicit,I=u.last,B=n.oxw(4).$implicit;n.ekj("make-oval",B.makeOvals),n.xp6(1),n.hij(" ",b[B.item_name]?b[B.item_name]:b,""),n.xp6(1),n.Q6J("ngIf",!I&&!B.makeOvals)}}function ve(v,S){if(1&v&&(n.ynx(0),n.YNc(1,me,3,4,"span",45),n.BQk()),2&v){const u=S.$implicit,b=n.oxw(4).$implicit;n.xp6(1),n.Q6J("ngIf",!b.condition||b.condition(u))}}function te(v,S){if(1&v&&(n.TgZ(0,"div"),n.YNc(1,ve,2,1,"ng-container",26),n.qZA()),2&v){const u=n.oxw(3).$implicit,b=n.oxw().$implicit;n.xp6(1),n.Q6J("ngForOf",b[u.name])}}function se(v,S){if(1&v&&(n.ynx(0),n.YNc(1,ue,1,1,"span",43),n.YNc(2,te,2,1,"div",13),n.BQk()),2&v){const u=n.oxw(2).$implicit,b=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",!u.isLoop),n.xp6(1),n.Q6J("ngIf",u.isLoop&&b[u.name])}}function ce(v,S){if(1&v&&(n.TgZ(0,"td",40),n.YNc(1,_e,2,1,"a",41),n.YNc(2,se,3,2,"ng-container",13),n.qZA()),2&v){const u=n.oxw().$implicit;n.Q6J("width",u.width||"200px"),n.xp6(1),n.Q6J("ngIf",u.clickable),n.xp6(1),n.Q6J("ngIf",!u.clickable)}}function ye(v,S){if(1&v&&(n.ynx(0),n.YNc(1,ce,3,3,"td",39),n.BQk()),2&v){const u=S.$implicit;n.xp6(1),n.Q6J("ngIf",u.visible)}}function oe(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"a",49),n.NdJ("click",function(){n.CHM(u);const I=n.oxw(3).$implicit,B=n.oxw(2).$implicit;return n.oxw(3).onRowAction(I,B)}),n._UZ(1,"i"),n.qZA()}if(2&v){const u=n.oxw(3),b=u.$implicit,I=u.last;n.Udp("width",b.width),n.ekj("mr-0",I),n.Q6J("ngClass",b.btnColor)("ngbTooltip",b.tooltip),n.xp6(1),n.Tol(b.icon)}}function le(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"a",50),n.NdJ("click",function(){n.CHM(u);const I=n.oxw(3).$implicit,B=n.oxw(2).$implicit;return n.oxw(3).onRowAction(I,B)}),n._uU(1),n.qZA()}if(2&v){const u=n.oxw(3),b=u.$implicit,I=u.last;n.Udp("width",b.width),n.ekj("mr-0",I),n.Q6J("ngClass",b.btnColor)("ngbTooltip",b.tooltip),n.xp6(1),n.hij(" ",b.tooltip," ")}}function xe(v,S){if(1&v&&(n.ynx(0),n.YNc(1,oe,2,9,"a",47),n.YNc(2,le,2,7,"a",48),n.BQk()),2&v){const u=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf","icon"===u.type),n.xp6(1),n.Q6J("ngIf","button"===u.type)}}function Pe(v,S){if(1&v&&(n.ynx(0),n.YNc(1,xe,3,2,"ng-container",13),n.BQk()),2&v){const u=n.oxw().$implicit,b=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",null==u.condition||u.condition(b,u.action))}}function Me(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"a",49),n.NdJ("click",function(){n.CHM(u);const I=n.oxw(2).$implicit,B=n.oxw(2).$implicit;return n.oxw(3).onRowAction(I,B)}),n._UZ(1,"i"),n.qZA()}if(2&v){const u=n.oxw(2),b=u.$implicit,I=u.last;n.Udp("width",b.width),n.ekj("mr-0",I),n.Q6J("ngClass",b.btnColor)("ngbTooltip",b.tooltip),n.xp6(1),n.Tol(b.icon)}}function De(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"a",50),n.NdJ("click",function(){n.CHM(u);const I=n.oxw(2).$implicit,B=n.oxw(2).$implicit;return n.oxw(3).onRowAction(I,B)}),n._uU(1),n.qZA()}if(2&v){const u=n.oxw(2),b=u.$implicit,I=u.last;n.Udp("width",b.width),n.ekj("mr-0",I),n.Q6J("ngClass",b.btnColor)("ngbTooltip",b.tooltip),n.xp6(1),n.hij(" ",b.tooltip," ")}}function Ie(v,S){if(1&v&&(n.ynx(0),n.YNc(1,Me,2,9,"a",47),n.YNc(2,De,2,7,"a",48),n.BQk()),2&v){const u=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf","icon"===u.type),n.xp6(1),n.Q6J("ngIf","button"===u.type)}}function Je(v,S){if(1&v&&(n.ynx(0),n.YNc(1,Pe,2,1,"ng-container",13),n.YNc(2,Ie,3,2,"ng-container",13),n.BQk()),2&v){const u=S.$implicit;n.xp6(1),n.Q6J("ngIf",u.conditional),n.xp6(1),n.Q6J("ngIf",!u.conditional)}}function qe(v,S){if(1&v&&(n.TgZ(0,"td",46),n.YNc(1,Je,3,2,"ng-container",26),n.qZA()),2&v){const u=n.oxw(4);n.xp6(1),n.Q6J("ngForOf",u.config.rowActions)}}function Ue(v,S){if(1&v&&(n.TgZ(0,"tr",37),n.YNc(1,ye,2,1,"ng-container",26),n.YNc(2,qe,2,1,"td",38),n.qZA()),2&v){const u=S.even,b=n.oxw(3);n.ekj("even-row",u),n.xp6(1),n.Q6J("ngForOf",b.config.columns),n.xp6(1),n.Q6J("ngIf",b.config.showRowActions&&b.config.rowActions.length>0&&!b.readonly)}}function ie(v,S){if(1&v&&(n.ynx(0),n.YNc(1,Ue,3,4,"tr",36),n.BQk()),2&v){const u=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",u.dataSource)}}function Fe(v,S){1&v&&(n.ynx(0),n.TgZ(1,"div"),n.TgZ(2,"h5"),n._uU(3,"No record found"),n.qZA(),n.qZA(),n.BQk())}function ke(v,S){if(1&v){const u=n.EpF();n.TgZ(0,"app-pagination",51),n.NdJ("pageChange",function(I){return n.CHM(u),n.oxw(2).onPageChange(I)}),n.qZA()}if(2&v){const u=n.oxw(2);n.Q6J("length",u.count)}}function Ee(v,S){if(1&v&&(n.TgZ(0,"div",20),n.TgZ(1,"div",21),n.TgZ(2,"div",22),n.TgZ(3,"div",23),n.TgZ(4,"table",24),n.TgZ(5,"thead",25),n.TgZ(6,"tr"),n.YNc(7,q,2,1,"ng-container",26),n.YNc(8,z,3,1,"th",27),n.qZA(),n.qZA(),n.TgZ(9,"tbody",28),n.YNc(10,ie,2,1,"ng-container",13),n.YNc(11,Fe,4,0,"ng-container",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(12,ke,1,1,"app-pagination",29),n.qZA()),2&v){const u=n.oxw();n.xp6(7),n.Q6J("ngForOf",u.config.columns),n.xp6(1),n.Q6J("ngIf",u.config.showRowActions&&u.config.rowActions.length>0&&!u.readonly),n.xp6(2),n.Q6J("ngIf",u.dataSource.length>0),n.xp6(1),n.Q6J("ngIf",!u.loading&&0===u.dataSource.length),n.xp6(1),n.Q6J("ngIf",u.config.showPagination&&u.dataSource.length>0)}}let Ne=(()=>{class v{constructor(u,b,I,B){this.checkPermService=u,this.apiService=b,this.toastrService=I,this.modal=B,this.signals=new n.vpe,this.actions=new P.xQ,this._unsubscribeAll=new P.xQ,this.config=new p.Xu(null),this.loading=!1,this.readonly=!1,this.directDownload=!0,this.count=0,this.limit=10,this.offset=0,this.slug="",this.search={search_with:"",search_text:""},this.sorting={column:"",direction:""},this.sorting2={column:"",direction:""},this.dataSource=[],this.data=[]}ngOnInit(){this.slug=`${this.config.slug}`;let u=localStorage.getItem("limit");u&&(this.limit=+u),this.count=this.dataSource.length,this.checkPermission(),this.config.doApiCall&&this.doApiCall(),this.actions&&this.actions.pipe((0,l.R)(this._unsubscribeAll)).subscribe(b=>{this.handleTableAction(b)})}handleTableAction(u){switch(u.action){case"reload":this.config.doApiCall&&this.doApiCall();break;case"loadingTrue":this.loading=!0;break;case"loadingFalse":this.loading=!1}}checkPermission(){let u=this.checkPermService.checkPermissions();this.readonly=!(u&&u.length>0&&u.includes("RW"))}doApiCall(u){this.loading=!0,this.directDownload=!1,this.slug=u?`${this.config.slug}search_with=${u.search_with}&search_text=${u.search_text}&order_by=${u.column}&order=${u.direction}&offset=${this.offset}&limit=${this.limit}`:`${this.config.slug}offset=${this.offset}&limit=${this.limit}`,this.apiService.get(this.slug).subscribe(b=>{this.loading=!1;let I=b.data;if(this.data=b.data.data||b.data,this.dataSource=I.data||I,this.count=I.count||I.length,this.signals.emit({type:"onData",data:I}),this.sorting2.column&&this.sorting2.direction){let B=this.dataSource;"asc"===this.sorting2.direction?this.dataSource=B.sort((V,de)=>V[this.sorting2.column]-de[this.sorting2.column]):"desc"===this.sorting2.direction&&(this.dataSource=B.sort((V,de)=>de[this.sorting2.column]-V[this.sorting2.column]))}this.config.showSearchFilters=!!(u&&"all_columns"!==u.search_with&&u.search_text&&this.dataSource.length>0)},b=>{this.loading=!1,[401,2,3,11,151,153,18,300,301].includes(b.error.status)?this.toastrService.error(b.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(b.error.message,"Error getting data",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onRowAction(u,b){this.signals.emit({type:u.action,row:b})}onCellClick(u,b){this.signals.emit({type:b.action,row:u})}onAddNew(){this.signals.emit({type:"OpenForm"})}onOptionalBtn(){this.signals.emit({type:"onOptionalBtn"})}onDownload(){const b=this.modal.open(o.t,{size:"md"});b.componentInstance.slug=this.slug,b.componentInstance.directDownload=this.directDownload,b.componentInstance.fileName=this.config.title+" List"}onSort({column:u,direction:b},I){this.headers.forEach(V=>{V.sortable!==u&&(V.direction="")});const B=this.dataSource;(null==I?void 0:I.sortableFromView)?(this.sorting2={column:u,direction:b},"asc"===b?this.dataSource=B.sort((V,de)=>V[I.name]-de[I.name]):"desc"===b?this.dataSource=B.sort((V,de)=>de[I.name]-V[I.name]):(this.sorting={search_with:this.search.search_with,search_text:this.search.search_text,column:"",direction:""},this.doApiCall(this.sorting))):(this.sorting={search_with:this.search.search_with,search_text:this.search.search_text,column:u,direction:b},this.doApiCall(this.sorting))}onSearch(u){this.search={search_with:u.column,search_text:u.search,column:this.sorting.column,direction:this.sorting.direction},this.doApiCall(this.search)}onPageChange(u){this.offset=u.offset,this.limit=u.pageSize,this.doApiCall({search_with:this.search.search_with,search_text:this.search.search_text,column:this.sorting.column,direction:this.sorting.direction})}cellValue(u,b){return u.format?A.I2[u.format](b[u.name],b,u):b[u.name]}ngOnDestroy(){null!=this._unsubscribeAll&&(this._unsubscribeAll.next(null),this._unsubscribeAll.complete())}}return v.\u0275fac=function(u){return new(u||v)(n.Y36(O.$),n.Y36(D.s),n.Y36(M._W),n.Y36(e.FF))},v.\u0275cmp=n.Xpm({type:v,selectors:[["general-table"]],viewQuery:function(u,b){if(1&u&&n.Gf(Z.x,5),2&u){let I;n.iGM(I=n.CRH())&&(b.headers=I)}},inputs:{config:"config",dataSource:"dataSource",actions:"actions"},outputs:{signals:"signals"},decls:5,vars:3,consts:[[1,"card","w-100-p",2,"border","none","height","100%"],["src","/assets/images/block-loader.gif","alt","Loading","srcset","","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxLayout","row wrap",1,"w-100-p",2,"height","100%"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between start","class","h-48 mb-10",4,"ngIf"],["class","w-100-p","style","height: calc(100% - 50px);",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","srcset","","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between start",1,"h-48","mb-10"],["fxFlex","55"],["fxFlex","50",3,"cols","showFilters","signal",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end start","fxFlex","","fxLayoutGap","8px"],[1,"w-180"],["fxFlex","","class","btn btn-success btn-round fs-14 fw-300","style","border-radius: 20px !important;",3,"click",4,"ngIf"],["class","btn btn-success btn-round fs-14 fw-300","style","height: 37px !important;",3,"click",4,"ngIf"],[4,"ngIf"],["fxFlex","50",3,"cols","showFilters","signal"],["fxFlex","",1,"btn","btn-success","btn-round","fs-14","fw-300",2,"border-radius","20px !important",3,"click"],[1,"ri-add-circle-fill"],[1,"btn","btn-success","btn-round","fs-14","fw-300",2,"height","37px !important",3,"click"],[3,"ngClass"],[1,"ri-download-fill"],[1,"w-100-p",2,"height","calc(100% - 50px)"],[2,"display","flex","flex-direction","row","height","auto","max-height","calc(100% - 46px)"],[2,"overflow","auto","flex","1"],["fxFlex",""],[1,"table",2,"min-width","calc(100% - 1px)","width","max-content"],[2,"position","sticky","top","-1px"],[4,"ngFor","ngForOf"],["scope","col","style","min-width: 98px;",3,"width",4,"ngIf"],[2,"height","calc(100% - 30px)"],[3,"length","pageChange",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col",3,"sortable","sort",4,"ngIf"],["scope","col"],["scope","col",3,"sortable","sort"],["scope","col",2,"min-width","98px",3,"width"],[1,"text-uppercase"],["role","row",3,"even-row",4,"ngFor","ngForOf"],["role","row"],["fxLayoutGap","8px",4,"ngIf"],[3,"width",4,"ngIf"],[3,"width"],["class","text-overlow",3,"click",4,"ngIf"],[1,"text-overlow",3,"click"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"],[3,"make-oval",4,"ngIf"],["fxLayoutGap","8px"],["type","button","class","btn btn-icon btn-xs",3,"ngClass","mr-0","width","ngbTooltip","click",4,"ngIf"],["type","button","class","btn",3,"ngClass","mr-0","width","ngbTooltip","click",4,"ngIf"],["type","button",1,"btn","btn-icon","btn-xs",3,"ngClass","ngbTooltip","click"],["type","button",1,"btn",3,"ngClass","ngbTooltip","click"],[3,"length","pageChange"]],template:function(u,b){1&u&&(n.TgZ(0,"div",0),n.YNc(1,H,1,0,"img",1),n.TgZ(2,"div",2),n.YNc(3,f,8,4,"div",3),n.YNc(4,Ee,13,5,"div",4),n.qZA(),n.qZA()),2&u&&(n.xp6(1),n.Q6J("ngIf",b.loading),n.xp6(2),n.Q6J("ngIf",b.config.showHeader),n.xp6(1),n.Q6J("ngIf",b.config.showTable))},directives:[Y.O5,L.xw,L.yH,L.Wh,L.SQ,N.g,Y.mk,R.oO,Y.sg,Z.x,e._L,G.Q],pipes:[Y.gd],styles:['@charset "UTF-8";.info[_ngcontent-%COMP%]{font-weight:400;margin-left:10px}.info[_ngcontent-%COMP%]:hover{text-decoration:underline}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 16px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;height:28px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .make-oval[_ngcontent-%COMP%]{background:#f3f7f9;border-radius:20px;padding:2px 8px;margin-right:2px;margin-bottom:4px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .make-oval[_ngcontent-%COMP%]:hover{background:#e7ecee}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]{position:absolute;right:0;padding-right:30px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:before{content:"\\2191";opacity:.5;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:before{content:"\\2193";opacity:.5;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:after{content:"\\2193";opacity:1;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:after{content:"\\2191";opacity:1;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#77d6e1!important;border-color:#77d6e1;color:#fff}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#f96868!important;border-color:#f96868;color:#fff}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.even-row[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}']}),v})()},3522:(j,J,m)=>{m.d(J,{C:()=>M});var n=m(8583),p=m(5566),o=m(3633),Z=m(4272),P=m(5651),l=m(9788),A=m(5297),O=m(2269),D=m(7716);let M=(()=>{class e{}return e.\u0275fac=function(L){return new(L||e)},e.\u0275mod=D.oAB({type:e}),e.\u0275inj=D.cJS({imports:[[n.ez,o.IJ,p.o9,Z.A0,P.o,O.B,l.U,A.t]]}),e})()},9522:(j,J,m)=>{m.d(J,{Xu:()=>n});class n{constructor(l){this.title="",this.slug="",this.title=void 0===(null==l?void 0:l.title)?"":l.title,this.slug=void 0===(null==l?void 0:l.slug)?"":l.slug,this.addBtnText=void 0===(null==l?void 0:l.addBtnText)?`Add ${this.title}`:l.addBtnText,this.optionalBtnText=null==l?void 0:l.optionalBtnText,this.optionalBtnIcon=null==l?void 0:l.optionalBtnIcon,this.showHeader=void 0===(null==l?void 0:l.showHeader)||l.showHeader,this.showSearch=void 0===(null==l?void 0:l.showSearch)||l.showSearch,this.showSearchFilters=void 0!==(null==l?void 0:l.showSearchFilters)&&l.showSearchFilters,this.showAdd=void 0===(null==l?void 0:l.showAdd)||l.showAdd,this.showOptionalBtn=void 0!==(null==l?void 0:l.showOptionalBtn)&&l.showOptionalBtn,this.showDownload=void 0===(null==l?void 0:l.showDownload)||l.showDownload,this.showTable=void 0===(null==l?void 0:l.showTable)||l.showTable,this.showRowActions=void 0!==(null==l?void 0:l.showRowActions)&&l.showRowActions,this.showPagination=void 0===(null==l?void 0:l.showPagination)||l.showPagination,this.doApiCall=void 0===(null==l?void 0:l.doApiCall)||l.doApiCall,this.searchOptions=void 0===(null==l?void 0:l.searchOptions)?[]:l.searchOptions,this.columns=[],void 0!==(null==l?void 0:l.columns)&&(null==l||l.columns.forEach(A=>{const O=new p(A);this.columns.push(O)})),this.rowActions=[],void 0!==(null==l?void 0:l.rowActions)&&(null==l||l.rowActions.forEach(A=>{const O=new o(A);this.rowActions.push(O)})),this.acColumnWidth=void 0===(null==l?void 0:l.acColumnWidth)?"98px":null==l?void 0:l.acColumnWidth}}class p{constructor(l){this.name=null==l?void 0:l.name,this.title=(null==l?void 0:l.title)||(null==l?void 0:l.name),this.value=(null==l?void 0:l.value)||null,this.format=null==l?void 0:l.format,this.sortable=void 0!==l.sortable&&l.sortable,this.sortableFromView=void 0!==l.sortableFromView&&l.sortableFromView,this.width=l.width||"auto",this.maxWidth=l.maxWidth||"auto",this.align=l.align||"left",this.class=l.class||null,this.action=l.action||null,this.visible=void 0===l.visible||l.visible,this.clickable=void 0!==l.clickable&&l.clickable,this.makeOvals=void 0!==l.makeOvals&&l.makeOvals,this.isLoop=void 0!==l.isLoop&&l.isLoop,this.item_name=void 0===(null==l?void 0:l.item_name)?"name":l.item_name,this.condition=null==l?void 0:l.condition}}class o{constructor(l){this.icon=l.icon,this.tooltip=l.tooltip,this.type=void 0===l.type?"icon":l.type,this.action=l.action,this.btnColor=void 0===l.btnColor?"btn-info":l.btnColor,this.width="icon"===l.type?"28px":"auto",this.conditional=void 0===l.conditional||l.conditional,this.condition=null==l?void 0:l.condition}}},9309:(j,J,m)=>{m.d(J,{Y:()=>A});var n=m(8583),p=m(5566),o=m(665),Z=m(3633),P=m(9785),l=m(7716);let A=(()=>{class O{}return O.\u0275fac=function(M){return new(M||O)},O.\u0275mod=l.oAB({type:O}),O.\u0275inj=l.cJS({imports:[[n.ez,o.u5,Z.IJ,p.o9,P.z]]}),O})()},8763:(j,J,m)=>{m.d(J,{m:()=>l});var n=m(7716),p=m(3633),o=m(9075),Z=m(8583);function P(A,O){if(1&A&&n._UZ(0,"img",7),2&A){const D=n.oxw();n.Q6J("src",D.imgSource,n.LSH)}}let l=(()=>{class A{constructor(D,M){this.modalRef=D,this.domSanitizer=M,this.sanitizedURL=null,this.data=null,this.imgSource="",this.fileName="",this.directDownload=!1,this.title="Preview Image"}ngOnInit(){this.imgSource&&this.imgSource.includes("pdf")&&(window.open(this.imgSource,"_blank"),this.modalRef.close())}onCloseModal(){this.modalRef.close()}}return A.\u0275fac=function(D){return new(D||A)(n.Y36(p.Kz),n.Y36(o.H7))},A.\u0275cmp=n.Xpm({type:A,selectors:[["app-image-viewer"]],inputs:{imgSource:"imgSource",fileName:"fileName",directDownload:"directDownload"},decls:9,vars:2,consts:[[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-md-12","p-2"],["alt","","class","w-100-p h-100-p",3,"src",4,"ngIf"],["alt","",1,"w-100-p","h-100-p",3,"src"]],template:function(D,M){1&D&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n._uU(2),n.qZA(),n.TgZ(3,"button",2),n.NdJ("click",function(){return M.onCloseModal()}),n._uU(4,"\xd7"),n.qZA(),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n.YNc(8,P,1,1,"img",6),n.qZA(),n.qZA(),n.qZA()),2&D&&(n.xp6(2),n.Oqu(M.title),n.xp6(6),n.Q6J("ngIf",M.imgSource&&!M.imgSource.includes("pdf")))},directives:[Z.O5],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:44px!important;padding:4px!important;vertical-align:middle}"]}),A})()},5585:(j,J,m)=>{m.d(J,{Z:()=>n});class n{static removeWhiteSpaces(o){for(const Z in o){let P=o[Z];P&&(o[Z]=P.toString().trim())}return o}static IntegerOnly(o){const Z=o.keyCode;return Z>=48&&Z<=57||Z>=96&&Z<=105||8===Z||9===Z||46===Z||Z>=37&&Z<=40}static DoubleOnly(o){const Z=o.keyCode;return Z>=48&&Z<=57||Z>=96&&Z<=105||8===Z||9===Z||190===Z||Z>=37&&Z<=40}static AlphaOnly(o,Z=[]){const P=o.keyCode;return!!(null!=Z&&Z.length>0&&Z.includes(P))||P>=65&&P<=90||8===P||9===P||32===P||46===P||P>=37&&P<=40}static GetRandomUsername(){return Math.random().toString(36).slice(-6)}static GetRandomPassword(o=6){const Z="0123456789",P="@!$%*[]{}()",l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",A="abcdefghijklmnopqrstuvwxyz";let O=l.charAt(Math.floor(Math.random()*l.length));for(let D=0;D<o-3;D++)O+=A.charAt(Math.floor(Math.random()*A.length));return O+=P.charAt(Math.floor(Math.random()*P.length)),O+=Z.charAt(Math.floor(Math.random()*Z.length)),O}}}}]);