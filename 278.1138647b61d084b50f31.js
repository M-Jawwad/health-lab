"use strict";(self.webpackChunkprism_health_lab=self.webpackChunkprism_health_lab||[]).push([[278],{6278:(O,m,a)=>{a.d(m,{p:()=>F});var i=a(665),w=a(4395),u=a(7519),f=a(2340),e=a(7716),h=a(9344),P=a(5830),x=a(4330),Z=a(3633),c=a(8583),l=a(1819),C=a(8030);function T(s,n){1&s&&e._UZ(0,"img",23)}function v(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please provide current password "),e.qZA())}function A(s,n){if(1&s){const o=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"label",13),e._uU(2,"Current Password"),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"input",24),e.TgZ(5,"span",25),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return r.hidePassword=!r.hidePassword}),e._UZ(6,"i",17),e.qZA(),e.qZA(),e.YNc(7,v,2,0,"span",18),e.qZA()}if(2&s){const o=e.oxw(2);e.xp6(4),e.Q6J("type",o.hidePassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hidePassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.old_password.hasError("required")&&o.resetPasswordForm.controls.old_password.touched)}}function y(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please provide new password "),e.qZA())}function b(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please confirm password "),e.qZA())}function q(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Password do not match "),e.qZA())}function E(s,n){if(1&s){const o=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.YNc(2,T,1,0,"img",4),e.TgZ(3,"div",5),e._UZ(4,"img",6),e.TgZ(5,"div",7),e._UZ(6,"i",8),e.TgZ(7,"h4",9),e._uU(8,"RESET PASSWORD"),e.qZA(),e.TgZ(9,"form",10),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().onSubmit()}),e.YNc(10,A,8,3,"div",11),e.TgZ(11,"div",12),e.TgZ(12,"label",13),e._uU(13,"New Password"),e.qZA(),e.TgZ(14,"div",14),e._UZ(15,"input",15),e.TgZ(16,"span",16),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return r.hideNewPassword=!r.hideNewPassword}),e._UZ(17,"i",17),e.qZA(),e.qZA(),e.YNc(18,y,2,0,"span",18),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"label",13),e._uU(21,"Confirm Password"),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"input",19),e.TgZ(24,"span",20),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return r.hideConfirmPassword=!r.hideConfirmPassword}),e._UZ(25,"i",17),e.qZA(),e.qZA(),e.YNc(26,b,2,0,"span",18),e.YNc(27,q,2,0,"span",18),e.qZA(),e.TgZ(28,"div",21),e.TgZ(29,"button",22),e._uU(30,"Reset Password"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(7),e.Q6J("formGroup",o.resetPasswordForm),e.xp6(1),e.Q6J("ngIf","reset"!==o.requestType),e.xp6(5),e.Q6J("type",o.hideNewPassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hideNewPassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.new_password.hasError("required")&&o.resetPasswordForm.controls.new_password.touched),e.xp6(5),e.Q6J("type",o.hideConfirmPassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hideConfirmPassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.confirm_new_password.hasError("required")&&o.resetPasswordForm.controls.confirm_new_password.touched),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.confirm_new_password.hasError("nomatch")),e.xp6(2),e.Q6J("disabled",!o.resetPasswordForm.valid)}}function U(s,n){1&s&&e._UZ(0,"img",37)}function N(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please provide current password "),e.qZA())}function I(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please provide new password "),e.qZA())}function J(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Please confirm password "),e.qZA())}function k(s,n){1&s&&(e.TgZ(0,"span",26),e._uU(1," Password do not match "),e.qZA())}function M(s,n){if(1&s){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",27),e.YNc(2,U,1,0,"img",28),e.TgZ(3,"div",29),e.TgZ(4,"h4",30),e._uU(5,"Reset Password"),e.qZA(),e.TgZ(6,"button",31),e.NdJ("click",function(){return e.CHM(o),e.oxw().onCloseModal()}),e.TgZ(7,"span",32),e._uU(8,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",33),e.TgZ(10,"form",10),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().onSubmit()}),e.TgZ(11,"div",12),e.TgZ(12,"label",13),e._uU(13,"Current Password"),e.qZA(),e.TgZ(14,"div",14),e._UZ(15,"input",24),e.TgZ(16,"span",25),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return r.hidePassword=!r.hidePassword}),e._UZ(17,"i",17),e.qZA(),e.qZA(),e.YNc(18,N,2,0,"span",18),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"label",13),e._uU(21,"New Password"),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"input",15),e.TgZ(24,"span",16),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return r.hideNewPassword=!r.hideNewPassword}),e._UZ(25,"i",17),e.qZA(),e.qZA(),e.YNc(26,I,2,0,"span",18),e.qZA(),e.TgZ(27,"div",12),e.TgZ(28,"label",13),e._uU(29,"Confirm Password"),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"input",19),e.TgZ(32,"span",20),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return r.hideConfirmPassword=!r.hideConfirmPassword}),e._UZ(33,"i",17),e.qZA(),e.qZA(),e.YNc(34,J,2,0,"span",18),e.YNc(35,k,2,0,"span",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",34),e.TgZ(37,"div",21),e.TgZ(38,"button",35),e.NdJ("click",function(){return e.CHM(o),e.oxw().onCloseModal()}),e._uU(39,"Cancel"),e.qZA(),e.TgZ(40,"button",36),e.NdJ("click",function(){return e.CHM(o),e.oxw().onSubmit()}),e._uU(41,"Reset Password"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&s){const o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(8),e.Q6J("formGroup",o.resetPasswordForm),e.xp6(5),e.Q6J("type",o.hidePassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hidePassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.old_password.hasError("required")&&o.resetPasswordForm.controls.old_password.touched),e.xp6(5),e.Q6J("type",o.hideNewPassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hideNewPassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.new_password.hasError("required")&&o.resetPasswordForm.controls.new_password.touched),e.xp6(5),e.Q6J("type",o.hideConfirmPassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hideConfirmPassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.confirm_new_password.hasError("required")&&o.resetPasswordForm.controls.confirm_new_password.touched),e.xp6(1),e.Q6J("ngIf",o.resetPasswordForm.controls.confirm_new_password.hasError("nomatch")),e.xp6(5),e.Q6J("disabled",!o.resetPasswordForm.valid)}}let F=(()=>{class s{constructor(o,t,r,d){this.toastr=o,this.apiService=t,this.router=r,this.modalRef=d,this.loading=!1,this.hidePassword=!0,this.hideNewPassword=!0,this.hideConfirmPassword=!0,this.fromProfile=!1,this.requestType="profile",this.email="",this.resetPasswordForm=new i.cw({new_password:new i.NI(null,[i.kI.required]),confirm_new_password:new i.NI(null,[i.kI.required])})}ngOnInit(){var o;let t=sessionStorage.getItem("reqType");null!==t&&(this.requestType=this.fromProfile?"profile":t),sessionStorage.removeItem("reqType"),"reset"!==this.requestType&&this.resetPasswordForm.addControl("old_password",new i.NI(null,[i.kI.required])),null===(o=this.resetPasswordForm.get("confirm_new_password"))||void 0===o||o.valueChanges.pipe((0,w.b)(400),(0,u.x)()).subscribe(r=>{this.checkPassword()})}skipNow(){this.router.navigateByUrl("admin")}onSubmit(){this.loading=!0;const o=`${f.N.userms}/users/change-password`,t=this.resetPasswordForm.value;let r=null,d=null;if(this.fromProfile){const _=localStorage.getItem("user"),g=JSON.parse(_);r=g.email,d=g.reset_token}else r=localStorage.getItem("email"),d=localStorage.getItem("reset-token");null!=r&&(this.email=r);let p={email:this.email,new_password:t.confirm_new_password,request_type:this.requestType,reset_token:d};"profile"===this.requestType&&(p.old_password=t.old_password),this.apiService.patch(o,p).subscribe(_=>{this.loading=!1,localStorage.removeItem("email"),this.toastr.success(_.data.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),"reset"===this.requestType||"profile"===this.requestType?this.modalRef&&this.modalRef.hasOpenModals()?this.modalRef.dismissAll():this.router.navigateByUrl(""):this.router.navigateByUrl("admin")},_=>{this.loading=!1,this.toastr.error(_.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}checkPassword(){var o,t,r;(null===(o=this.resetPasswordForm.get("new_password"))||void 0===o?void 0:o.value)!==(null===(t=this.resetPasswordForm.get("confirm_new_password"))||void 0===t?void 0:t.value)&&(this.resetPasswordForm.markAsDirty(),null===(r=this.resetPasswordForm.get("confirm_new_password"))||void 0===r||r.setErrors({nomatch:!0}))}onCloseModal(){this.modalRef.dismissAll()}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(h._W),e.Y36(P.s),e.Y36(x.F0),e.Y36(Z.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-change-password"]],decls:2,vars:2,consts:[["fxLayout","row wrap","class","h-100-p","style","background-image: url(assets/images/vodafone-background.jpg); background-size: cover;",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap",1,"h-100-p",2,"background-image","url(assets/images/vodafone-background.jpg)","background-size","cover"],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",2,"height","calc(100% - 28px)","position","relative"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","8px",1,"w-300","h-444","pr-8","pl-8"],["src","assets/images/vf-bz-logo.png","alt","Logo",1,"w-200","h-66"],[1,"w-100-p","p-20","card","text-center",2,"height","calc(100% - 74px)","position","relative"],[1,"fs-40","icofont-lock","h-62"],[1,"fs-18","fw-600","mb-30","green-800"],[2,"text-align","left",3,"formGroup","ngSubmit"],["class","form-group h-58 mb-0",4,"ngIf"],[1,"form-group","h-58","mb-0"],[1,"sr-only"],[1,"input-group"],["formControlName","new_password","placeholder","New Password","id","new-pw",1,"form-control",3,"type"],["for","new-pw",1,"input-group-text",3,"click"],[3,"ngClass"],["class","text-danger",4,"ngIf"],["formControlName","confirm_new_password","placeholder","Confirm Password","id","confirm-pw",1,"form-control",3,"type"],["for","confirm-pw",1,"input-group-text",3,"click"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","space-between start"],["type","submit",1,"btn","btn-danger","btn-block",3,"disabled"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],["formControlName","old_password","placeholder","Current Password","id","old-pw",1,"form-control",3,"type"],["for","old-pw",1,"input-group-text",3,"click"],[1,"text-danger"],[2,"position","relative"],["class","dialog-loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],[1,"modal-header"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"dialog-loader"]],template:function(o,t){1&o&&(e.YNc(0,E,31,11,"div",0),e.YNc(1,M,42,13,"ng-container",1)),2&o&&(e.Q6J("ngIf",!t.fromProfile),e.xp6(1),e.Q6J("ngIf",t.fromProfile))},directives:[c.O5,l.xw,l.yH,l.Wh,l.SQ,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c.mk,C.oO],styles:[".input-group-text[_ngcontent-%COMP%]{height:36px!important;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:44%;z-index:1}.dialog-loader[_ngcontent-%COMP%]{position:absolute;top:25%;left:38%;z-index:1}"]}),s})()}}]);