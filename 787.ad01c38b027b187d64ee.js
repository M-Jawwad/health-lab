"use strict";(self.webpackChunkprism_health_lab=self.webpackChunkprism_health_lab||[]).push([[787],{1787:(U,b,s)=>{s.r(b),s.d(b,{UserGroupsModule:()=>lt});var i=s(8583),x=s(5566),p=s(665),h=s(3633),Z=s(4272),_=s(5651),g=s(2269),d=s(9788),l=s(5297),u=s(4330),m=s(5301),v=s(799),f=s(5174),O=s(946),A=s(2340),M=s(107),t=s(7716),w=s(5830),G=s(9344),C=s(1819);function F(n,c){1&n&&t._UZ(0,"img",19)}function y(n,c){1&n&&(t.TgZ(0,"div",7),t._uU(1," Group name required "),t.qZA())}function P(n,c){1&n&&(t.TgZ(0,"div",7),t._uU(1," Name must be of less than 60 characters "),t.qZA())}function q(n,c){1&n&&(t.TgZ(0,"div",7),t._uU(1," Avoid white spaces "),t.qZA())}function N(n,c){if(1&n&&(t.ynx(0),t.YNc(1,y,2,0,"div",20),t.YNc(2,P,2,0,"div",20),t.YNc(3,q,2,0,"div",20),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.name.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.name.hasError("maxlength")),t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.name.hasError("whitespace"))}}function I(n,c){1&n&&(t.TgZ(0,"div",7),t._uU(1," Group description required "),t.qZA())}function D(n,c){1&n&&(t.TgZ(0,"div",7),t._uU(1," Avoid white spaces "),t.qZA())}function S(n,c){if(1&n&&(t.ynx(0),t.YNc(1,I,2,0,"div",20),t.YNc(2,D,2,0,"div",20),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.description.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.description.hasError("whitespace"))}}function J(n,c){1&n&&(t.TgZ(0,"ng-select",24),t.TgZ(1,"ng-option",25),t._uU(2,"Active"),t.qZA(),t.TgZ(3,"ng-option",26),t._uU(4,"InActive"),t.qZA(),t.qZA())}function E(n,c){1&n&&t._UZ(0,"input",27)}function L(n,c){1&n&&(t.TgZ(0,"span",7),t._uU(1,"Status required"),t.qZA())}function k(n,c){if(1&n&&(t.TgZ(0,"div",21),t.TgZ(1,"label"),t._uU(2,"Status"),t.qZA(),t.YNc(3,J,5,0,"ng-select",22),t.YNc(4,E,1,0,"input",23),t.YNc(5,L,2,0,"span",20),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf","Group Details"!==e.action),t.xp6(1),t.Q6J("ngIf","Group Details"===e.action),t.xp6(1),t.Q6J("ngIf",e.userGroupForm.controls.status.hasError("required")&&e.submitted)}}function Q(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"div",31),t._UZ(2,"span",32),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA(),t.BQk()),2&n){const e=c.$implicit;t.xp6(4),t.Oqu(e.email)}}function B(n,c){if(1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"label",29),t._uU(2,"Users"),t.qZA(),t.YNc(3,Q,5,1,"ng-container",30),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.users)}}function Y(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"td",39),t._uU(2),t.qZA(),t.TgZ(3,"td",43),t.TgZ(4,"div",44),t.TgZ(5,"div",45),t.TgZ(6,"input",46),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().$implicit.permission=r}),t.qZA(),t._UZ(7,"label"),t.qZA(),t.qZA(),t.TgZ(8,"div",47),t.TgZ(9,"div",45),t.TgZ(10,"input",48),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw().$implicit.permission=r}),t.qZA(),t._UZ(11,"label"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"td"),t.TgZ(13,"div",49),t.TgZ(14,"button",50),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),a=r.index,T=r.$implicit;return t.oxw(2).onClear(a,T)}),t.TgZ(15,"span",51),t._uU(16," restart_alt "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.name,""),t.xp6(4),t.s9C("name",e.id),t.Q6J("ngModel",e.permission),t.xp6(4),t.s9C("name",e.id),t.Q6J("ngModel",e.permission)}}function R(n,c){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,Y,17,5,"ng-container",9),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",!e.is_parent)}}function $(n,c){1&n&&(t.TgZ(0,"span",7),t._uU(1,"At least one feature must be selected"),t.qZA())}function W(n,c){if(1&n&&(t.TgZ(0,"div",33),t.TgZ(1,"h5",34),t._uU(2,"Choose Features for Group:"),t.qZA(),t.TgZ(3,"div",35),t.TgZ(4,"div",36),t.TgZ(5,"div",29),t.TgZ(6,"table",37),t.TgZ(7,"thead"),t.TgZ(8,"tr",38),t.TgZ(9,"th",39),t._uU(10,"Features"),t.qZA(),t.TgZ(11,"th"),t.TgZ(12,"div",40),t.TgZ(13,"div",41),t._uU(14,"Read"),t.qZA(),t.TgZ(15,"div",42),t._uU(16,"Read Write"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Reset"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"tbody"),t.YNc(20,R,2,1,"tr",30),t.qZA(),t.qZA(),t.YNc(21,$,2,0,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.groups),t.xp6(1),t.Q6J("ngIf",e.errorMessage)}}function H(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._UZ(1,"i",53),t._uU(2),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",!e.userGroupForm.valid||e.loading),t.xp6(2),t.hij(" ",null!=e.data&&e.data.id?"Update":"Save"," ")}}let z=(()=>{class n{constructor(e,o,r){this.modalRef=e,this.apiService=o,this.toastrService=r,this.groupFound=!1,this.selectedGroups=[],this.data=null,this.errorMessage=!1,this.users=[],this.group_id=0,this.action="Add Group",this.submitted=!1,this.loading=!1,this.userGroupForm=new p.cw({name:new p.NI(null,[p.kI.required,p.kI.maxLength(60),M.d.noWhiteSpace]),description:new p.NI(null,[p.kI.required,M.d.noWhiteSpace]),status:new p.NI("Active"),users:new p.NI("Active, InActive")}),this.groups=[]}ngOnInit(){this.data?(this.userGroupForm.patchValue(this.data),this.groups=this.data.features,this.users=this.data.users):this.getGroupFeatures(),this.checkGroup()}checkGroup(){var e;const o=localStorage.getItem("user"),r=JSON.parse(o);this.selectedGroups=r.selected_groups,null===(e=this.selectedGroups)||void 0===e||e.forEach(a=>{var T;this.groupFound=(null==a?void 0:a.name)===(null===(T=this.data)||void 0===T?void 0:T.name)})}getGroupDetails(){this.apiService.get(`${A.N.userms}/group/?id=${this.data.id}`).subscribe(o=>{this.userGroupForm.patchValue(o.data.data[0]),this.groups=o.data.data[0].features,this.users=o.data.data[0].users},o=>{this.toastrService.error(o.error.message,"Error",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getGroupFeatures(){this.loading=!0,this.apiService.get(`${A.N.userms}/group/feature`).subscribe(o=>{this.loading=!1,this.groups=o.data.data},o=>{this.loading=!1,this.toastrService.error(o.error.message,"Error",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onSubmit(){if(this.submitted=!0,this.loading=!0,!this.userGroupForm.valid)return;let e=`${A.N.userms}/group/`;const o=this.userGroupForm.value;let r={name:o.name,description:o.description,feature_list:[]};if(this.groups.forEach(a=>{!a.permission||""===a.permission||r.feature_list.push({id:a.id,permission:a.permission,parent_id:a.parent_id})}),0===r.feature_list.length)return this.errorMessage=!0,void(this.loading=!1);this.errorMessage=!1,this.data&&this.data.id?(r.id=this.data.id,r.status=o.status,this.updateGroup(e,r)):this.createGroup(e,r)}createGroup(e,o){this.apiService.post(e,o).subscribe(r=>{this.toastrService.success(r.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1,this.getMenu(),this.onCloseModal()},r=>{this.toastrService.error(r.error.message,"Error creating group",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1})}updateGroup(e,o){"InActive"===o.status?v.c.warn("Warning","Associated Users with this group will be effected").subscribe(r=>{r.positive&&(this.loading=!0,this.apiService.patch(e,o).subscribe(a=>{this.toastrService.success(a.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!0,this.getMenu(),this.onCloseModal()},a=>{this.toastrService.error(a.error.message,"Error updating group",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1}))}):(this.loading=!0,this.apiService.patch(e,o).subscribe(r=>{this.toastrService.success(r.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!0,this.getMenu(),this.onCloseModal()},r=>{this.toastrService.error(r.error.message,"Error updating group",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.loading=!1}))}getMenu(){return localStorage.removeItem("menu"),this.loading=!0,this.apiService.get(`${A.N.userms}/users/menu-preferences`).subscribe(o=>{this.loading=!1,localStorage.setItem("menu",JSON.stringify(o.data))},o=>{this.loading=!0,this.toastrService.error(o.error.message,"Error",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onCloseModal(){this.modalRef.close()}onClear(e,o){this.groups.forEach(r=>{r.id===o.id&&r.parent_id===o.parent_id&&(r.permission=""),r.id===o.parent_id&&(r.permission="")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.Kz),t.Y36(w.s),t.Y36(G._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-group-form"]],inputs:{group_id:"group_id"},decls:31,vars:12,consts:[[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["src","/assets/images/block-loader.gif","alt","Loading","class","loading","width","150px","height","150px",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","space-between start",1,"modal-body","w-100-p"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","space-between start",3,"formGroup","ngSubmit"],["fxFlex","",1,"form-group"],[1,"text-danger"],["type","text","formControlName","name","placeholder","Group Name",1,"form-control",3,"readonly"],[4,"ngIf"],["type","text","formControlName","description","placeholder","Description",1,"form-control",3,"readonly"],["fxFlex","","class","form-group mr-0",4,"ngIf"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start start",4,"ngIf"],["fxFlex","100","fxLayout","row wrap",4,"ngIf"],["fxFlex","100",1,"mt-8","mb-8"],["fxFlex","100",1,"form-group","text-center","mb-0"],["class","btn btn-success btn-round mr-8",3,"disabled","click",4,"ngIf"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loading"],["class","text-danger",4,"ngIf"],["fxFlex","",1,"form-group","mr-0"],["name","status","formControlName","status","class","group-container",4,"ngIf"],["type","text","formControlName","status","class","form-control","readonly","",4,"ngIf"],["name","status","formControlName","status",1,"group-container"],["value","Active"],["value","InActive"],["type","text","formControlName","status","readonly","",1,"form-control"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start start"],[1,"w-100-p"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start center"],[2,"height","8px","width","8px","border-radius","50%","background","#000"],["fxFlex","100","fxLayout","row wrap"],[1,"fs-14","fw-600","mt-10","mb-10"],["fxFlex","100","fxLayout","row wrap",1,"p-16",2,"background","#f3f7f9"],["fxFlex","100",1,"row","ml-0"],[1,"table","table-bordered","mb-0"],[1,"text-center","h-30",2,"background","rgba(0, 0, 0, .075)"],[1,"text-center"],["fxLayout","row","fxLayoutAlign","space-around center"],["fxFlex","46",1,"text-center"],["fxFlex","50",1,"text-center"],["fxLayout","row","fxLayoutAlign","center center",1,"text-center",2,"padding","0 4px !important"],["fxFlex","50",2,"padding-top","4px","height","100%","border-right","1px solid #ddd"],[1,"form-check"],["type","radio","value","R",1,"form-check-input",3,"name","ngModel","ngModelChange"],["fxFlex","50"],["type","radio","value","RW",1,"form-check-input",3,"name","ngModel","ngModelChange"],[2,"display","flex","justify-content","center","align-items","center"],[1,"btn","p-0","h-24",3,"click"],[1,"material-icons"],[1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.onCloseModal()}),t._uU(4,"\xd7"),t.qZA(),t.qZA(),t.YNc(5,F,1,0,"img",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(8,"div",6),t.TgZ(9,"label"),t._uU(10,"Group Name"),t.qZA(),t.TgZ(11,"span",7),t._uU(12,"*"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,N,4,3,"ng-container",9),t.qZA(),t.TgZ(15,"div",6),t.TgZ(16,"label"),t._uU(17,"Group Description"),t.qZA(),t.TgZ(18,"span",7),t._uU(19,"*"),t.qZA(),t._UZ(20,"input",10),t.YNc(21,S,3,2,"ng-container",9),t.qZA(),t.YNc(22,k,6,3,"div",11),t.YNc(23,B,4,1,"div",12),t.qZA(),t.YNc(24,W,22,2,"div",13),t._UZ(25,"hr",14),t.TgZ(26,"div",15),t.YNc(27,H,3,2,"button",16),t.TgZ(28,"button",17),t.NdJ("click",function(){return o.onCloseModal()}),t._UZ(29,"i",18),t._uU(30),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(o.action),t.xp6(3),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("formGroup",o.userGroupForm),t.xp6(6),t.Q6J("readonly","Group Details"===o.action),t.xp6(1),t.Q6J("ngIf",o.userGroupForm.controls.name.dirty),t.xp6(6),t.Q6J("readonly","Group Details"===o.action),t.xp6(1),t.Q6J("ngIf",o.userGroupForm.controls.description.dirty),t.xp6(1),t.Q6J("ngIf",o.data),t.xp6(1),t.Q6J("ngIf","Group Details"===o.action),t.xp6(1),t.Q6J("ngIf","Group Details"!==o.action),t.xp6(3),t.Q6J("ngIf","Group Details"!==o.action),t.xp6(3),t.hij(" ","Group Details"===o.action?"Close":"Discard"," "))},directives:[i.O5,C.xw,C.Wh,C.yH,C.SQ,p.JL,p.sg,p.Fj,p.JJ,p.u,Z.w9,Z.xv,i.sg,p._,p.On],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.loading[_ngcontent-%COMP%]{position:absolute;top:30%;left:40%;z-index:1}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important;font-weight:700;font-size:12px;color:#526069;text-transform:uppercase}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:32px!important;padding:4px!important;vertical-align:middle;border-left:none;border-bottom:none}"]}),n})();var j=s(405),K=s(3437),X=s(5748);function V(n,c){1&n&&t._UZ(0,"img",26)}function tt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAddGroup()}),t._UZ(1,"i",27),t._uU(2," Add Group "),t.qZA()}}function et(n,c){1&n&&(t.TgZ(0,"th",28),t._uU(1,"ACTION"),t.qZA())}function ot(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"td",33),t.TgZ(1,"a",34),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).onAddGroup(r,"Edit Group")}),t._UZ(2,"i",35),t.qZA(),t.TgZ(3,"a",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).onDeleteGroup(r)}),t._UZ(4,"i",37),t.qZA(),t.qZA()}}function nt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr",30),t.TgZ(1,"td"),t.TgZ(2,"a",31),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).onAddGroup(a,"Group Details")}),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,ot,5,0,"td",32),t.qZA()}if(2&n){const e=c.$implicit,o=c.even,r=t.oxw(2);t.ekj("even-row",o),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.description,""),t.xp6(2),t.hij(" ",e.status,""),t.xp6(1),t.Q6J("ngIf",!r.readonly)}}function rt(n,c){if(1&n&&(t.ynx(0),t.YNc(1,nt,9,6,"tr",29),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.groups)}}function it(n,c){1&n&&(t.TgZ(0,"tr"),t._uU(1," No record found "),t.qZA())}function st(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"app-pagination",38),t.NdJ("pageChange",function(r){return t.CHM(e),t.oxw().onChangePage(r)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("length",e.count)}}const at=[{path:"",component:(()=>{class n{constructor(e,o,r,a,T){this.dialog=e,this.apiService=o,this.toastrService=r,this.router=a,this.checkPermService=T,this.showFilters=!1,this.search=null,this.sorting=null,this.slug="",this.loading=!1,this.limit=10,this.offset=0,this.count=0,this.cols=[{column:"name",title:"Name"},{column:"description",title:"Description"},{column:"status",title:"Status"}],this.permission=[],this.groups=[],this.search={search_with:"",search_text:""},this.sorting={column:"",direction:""},this.readonly=!1}ngOnInit(){this.checkPermissions(),this.getGroups()}checkPermissions(){let e=this.checkPermService.checkPermissions();this.readonly=!(e&&e.length>0&&e.includes("RW"))}onSort({column:e,direction:o}){this.headers.forEach(r=>{r.sortable!==e&&(r.direction="")}),this.sorting={search_with:this.search.search_with,search_text:this.search.search_text,column:e,direction:o},this.getGroups(this.sorting)}getGroups(e){this.loading=!0,this.slug=e?`${A.N.userms}/group/?search_with=${e.search_with}&search_text=${e.search_text}&order_by=${e.column}&order=${e.direction}&offset=${this.offset}&limit=${this.limit}`:`${A.N.userms}/group/?offset=${this.offset}&limit=${this.limit}`,this.apiService.get(this.slug).subscribe(o=>{this.loading=!1,this.groups=o.data.data,this.count=o.data.count,this.showFilters=!!(e&&"all_columns"!=e.search_with&&e.search_text&&this.groups.length>0)},o=>{this.loading=!1,[401,2,3,11,151,153,18,300,301].includes(o.error.status)?this.toastrService.error(o.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(o.error.message,"Error gettting groups",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onAddGroup(e,o){const a=this.dialog.open(z,{size:"md",scrollable:!0});e&&(a.componentInstance.data=e),o&&(a.componentInstance.action=o),a.closed.subscribe(()=>{this.getGroups(),this.checkPermissions()})}onDownload(){const o=this.dialog.open(O.t,{size:"md"});o.componentInstance.slug=this.slug,o.componentInstance.fileName="Groups List"}onDeleteGroup(e){const o=`${A.N.userms}/group/?id=${e.id}`;v.c.confirm("Are you sure?","Associated users will be effected while deleting this group.","Yes").subscribe(r=>{r.positive&&(this.loading=!0,this.apiService.delete(o).subscribe(a=>{this.toastrService.info(a.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getGroups()},a=>{this.loading=!1,this.toastrService.error(a.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})}))})}onSearch(e){this.search={search_with:e.column,search_text:e.search,column:this.sorting.column,direction:this.sorting.direction},this.getGroups(this.search)}onChangePage(e){this.limit=e.pageSize,this.offset=e.offset,this.getGroups({search_with:this.search.search_with,search_text:this.search.search_text,column:this.sorting.column,direction:this.sorting.direction})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.FF),t.Y36(w.s),t.Y36(G._W),t.Y36(u.F0),t.Y36(j.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-groups"]],viewQuery:function(e,o){if(1&e&&t.Gf(f.x,5),2&e){let r;t.iGM(r=t.CRH())&&(o.headers=r)}},decls:34,vars:8,consts:[[1,"card","w-100-p","h-100-p",2,"border","none","height","100%"],[1,"fs-14","fw-600","p-16","pt-10","pb-10","mb-0",2,"border-bottom","1px solid #ececec"],["ngbTooltip","Groups, Description, Status, Action","triggers","mouseenter:mouseleave","container","body","placement","top",1,"ri-information-line","info","grey-400"],["src","/assets/images/block-loader.gif","class","loader","alt","Loading","srcset","","width","150px","height","150px",4,"ngIf"],["fxLayout","row wrap",1,"p-16","w-100-p",2,"height","calc(100% - 40px)"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between start",1,"h-48","mb-10"],["fxFlex","60"],["fxFlex","50",3,"cols","showFilters","signal"],["fxLayout","row","fxLayoutAlign","end start","fxFlex","40"],[1,"w-210"],["fxFlex","","class","btn btn-success btn-round fs-14 fw-300","style","border-radius: 20px !important;",3,"click",4,"ngIf"],[1,"col-md-4","pr-0","pl-8"],["fxFlex","",1,"btn","btn-success","btn-round","fs-14","fw-300",2,"border-radius","20px !important",3,"click"],[1,"ri-download-fill"],[1,"w-100-p",2,"height","calc(100% - 58px)"],[2,"display","flex","flex-direction","row","height","auto","max-height","calc(100% - 46px)"],[2,"overflow","auto","flex","1"],["fxFlex",""],[1,"table",2,"width","calc(100% - 1px)"],[2,"position","sticky","top","-1px"],["scope","col","sortable","groups",3,"sort"],["scope","col","sortable","description",3,"sort"],["scope","col","sortable","status",3,"sort"],["scope","col",4,"ngIf"],[4,"ngIf"],[3,"length","pageChange",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","srcset","","width","150px","height","150px",1,"loader"],[1,"ri-add-circle-fill"],["scope","col"],["role","row",3,"even-row",4,"ngFor","ngForOf"],["role","row"],[1,"text-overflow",2,"cursor","pointer",3,"click"],["fxLayoutGap","8px",4,"ngIf"],["fxLayoutGap","8px"],["type","button","ngbTooltip","Edit",1,"btn","btn-icon","btn-info","btn-xs","lh-16","h-26",2,"text-decoration","none",3,"click"],[1,"ri-pencil-fill"],["type","button","ngbTooltip","Delete",1,"btn","btn-icon","btn-danger","btn-xs","lh-16","h-26",2,"text-decoration","none",3,"click"],[1,"ri-delete-bin-2-fill"],[3,"length","pageChange"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2,"Groups "),t._UZ(3,"i",2),t.qZA(),t.YNc(4,V,1,0,"img",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"app-search",7),t.NdJ("signal",function(a){return o.onSearch(a)}),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.YNc(11,tt,3,0,"button",10),t.qZA(),t.TgZ(12,"div",11),t.TgZ(13,"button",12),t.NdJ("click",function(){return o.onDownload()}),t._UZ(14,"i",13),t._uU(15," Download "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",14),t.TgZ(17,"div",15),t.TgZ(18,"div",16),t.TgZ(19,"div",17),t.TgZ(20,"table",18),t.TgZ(21,"thead",19),t.TgZ(22,"tr"),t.TgZ(23,"th",20),t.NdJ("sort",function(a){return o.onSort(a)}),t._uU(24,"GROUPS"),t.qZA(),t.TgZ(25,"th",21),t.NdJ("sort",function(a){return o.onSort(a)}),t._uU(26,"DESCRIPTION"),t.qZA(),t.TgZ(27,"th",22),t.NdJ("sort",function(a){return o.onSort(a)}),t._uU(28,"STATUS"),t.qZA(),t.YNc(29,et,2,0,"th",23),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.YNc(31,rt,2,1,"ng-container",24),t.YNc(32,it,2,0,"tr",24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,st,1,1,"app-pagination",25),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.loading),t.xp6(4),t.Q6J("cols",o.cols)("showFilters",o.showFilters),t.xp6(3),t.Q6J("ngIf",!o.readonly),t.xp6(18),t.Q6J("ngIf",!o.readonly),t.xp6(2),t.Q6J("ngIf",!o.loading&&o.groups.length>0),t.xp6(1),t.Q6J("ngIf",!o.loading&&0===o.groups.length),t.xp6(1),t.Q6J("ngIf",o.groups.length>0))},directives:[h._L,i.O5,C.xw,C.yH,C.Wh,K.g,f.x,i.sg,C.SQ,X.Q],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;height:100%;align-content:flex-start;align-items:flex-start}.loader[_ngcontent-%COMP%]{position:absolute;top:32%;left:42%;z-index:1}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 4px!important;font-size:12px!important;font-weight:700!important;line-height:28px;position:relative}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;vertical-align:middle}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]{position:absolute;right:0;padding-right:30px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:before{content:"\\2191";opacity:.5;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:before{content:"\\2193";opacity:.5;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:after{content:"\\2193";opacity:1;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:after{content:"\\2191";opacity:1;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px;height:26px!important;line-height:16px!important}.table[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#77d6e1!important;border-color:#77d6e1;color:#fff}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#f96868!important;border-color:#f96868;color:#fff}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.even-row[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}.info[_ngcontent-%COMP%]{font-weight:400;margin-left:10px}.info[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),n})(),canActivate:[m.P]}];let ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(at)]]}),n})(),lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[i.ez,p.u5,p.UX,ct,h.IJ,x.o9,Z.A0,g.B,d.U,_.o,l.t]]}),n})()},9785:(U,b,s)=>{s.d(b,{z:()=>Z});var i=s(8583),x=s(5566),p=s(3633),h=s(7716);let Z=(()=>{class _{}return _.\u0275fac=function(d){return new(d||_)},_.\u0275mod=h.oAB({type:_}),_.\u0275inj=h.cJS({imports:[[i.ez,p.IJ,x.o9]]}),_})()},2269:(U,b,s)=>{s.d(b,{B:()=>g});var i=s(8583),x=s(5566),p=s(665),h=s(3633),Z=s(9785),_=s(7716);let g=(()=>{class d{}return d.\u0275fac=function(u){return new(u||d)},d.\u0275mod=_.oAB({type:d}),d.\u0275inj=_.cJS({imports:[[i.ez,p.u5,h.IJ,x.o9,Z.z]]}),d})()},946:(U,b,s)=>{s.d(b,{t:()=>_});var i=s(7716),x=s(3633),p=s(5830),h=s(9344);let Z=(()=>{class g{constructor(l){this.modalRef=l,this.title="Title",this.signal=new i.vpe}ngOnInit(){console.log(this.title)}onCloseModel(){this.signal.emit(this.modalRef)}}return g.\u0275fac=function(l){return new(l||g)(i.Y36(x.Kz))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-dialog-header"]],inputs:{title:"title"},outputs:{signal:"signal"},decls:5,vars:1,consts:[[1,"modal-header"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close","grey-400","fw-400",3,"click"]],template:function(l,u){1&l&&(i.TgZ(0,"div",0),i.TgZ(1,"h4",1),i._uU(2),i.qZA(),i.TgZ(3,"button",2),i.NdJ("click",function(){return u.onCloseModel()}),i._uU(4,"\xd7"),i.qZA(),i.qZA()),2&l&&(i.xp6(2),i.Oqu(u.title))},styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:44px!important;padding:4px!important;vertical-align:middle}"]}),g})(),_=(()=>{class g{constructor(l,u,m){this.modalRef=l,this.apiService=u,this.toastrService=m,this.data=null,this.slug="",this.fileName="",this.directDownload=!1}ngOnInit(){}onDownload(l){this.apiService.getExportXlsPdf(this.directDownload?`${this.slug}?export=${l}`:`${this.slug}&export=${l}`).subscribe(m=>{"pdf"===l?this.downloadPdf(m):this.downloadCSV(m),this.modalRef.close()},m=>{this.toastrService.error(m.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onCloseModal(l){l.close()}downloadPdf(l){const m=new Blob([l],{type:"application/pdf"}),v=window.URL.createObjectURL(m);let f=document.createElement("a");f.href=v,f.download=this.fileName,f.click()}downloadCSV(l){const m=new Blob([l],{type:"application/vnd.ms-excel"}),v=window.URL.createObjectURL(m);let f=document.createElement("a");f.href=v,f.download=this.fileName,f.click()}}return g.\u0275fac=function(l){return new(l||g)(i.Y36(x.Kz),i.Y36(p.s),i.Y36(h._W))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-download-file"]],inputs:{slug:"slug",fileName:"fileName",directDownload:"directDownload"},decls:16,vars:1,consts:[[3,"title","signal"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group",2,"margin-bottom","20px !important"],[1,"w-100-p","btn-group","btn-group-toggle"],["ngbButtonLabel","","role","group",1,"btn-group","p-0",2,"border","1px solid #e4eaec",3,"click"],["type","button","ngbButton","",1,"btn","btn-outline","btn-default"],["src","assets/images/icon-xls.png","height","50"],[1,"fs-12"],["src","assets/images/icon-pdf.png","height","50"]],template:function(l,u){1&l&&(i.TgZ(0,"app-dialog-header",0),i.NdJ("signal",function(v){return u.onCloseModal(v)}),i.qZA(),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i.TgZ(4,"div",4),i.TgZ(5,"div",5),i.TgZ(6,"div",6),i.NdJ("click",function(){return u.onDownload("xls")}),i.TgZ(7,"button",7),i._UZ(8,"img",8),i.TgZ(9,"div",9),i._uU(10,"Download XLS"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"div",6),i.NdJ("click",function(){return u.onDownload("pdf")}),i.TgZ(12,"button",7),i._UZ(13,"img",10),i.TgZ(14,"div",9),i._uU(15,"Download PDF"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&l&&i.Q6J("title","Choose Format")},directives:[Z,x.mL],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}  .group-model .modal-dialog{max-width:600px!important}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{height:30px!important;padding:4px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:44px!important;padding:4px!important;vertical-align:middle}"]}),g})()}}]);