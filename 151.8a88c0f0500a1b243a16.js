"use strict";(self.webpackChunkprism_health_lab=self.webpackChunkprism_health_lab||[]).push([[151],{7151:(Q,T,u)=>{u.r(T),u.d(T,{PackagesModule:()=>ot});var f=u(8583),c=u(665),d=u(3633),l=u(5566),m=u(4272),O=u(5651),w=u(9788),k=u(5297),F=u(4330),Z=u(107),_=u(2340),e=u(7716),P=u(5830),b=u(9344),p=u(1819);function Y(s,o){1&s&&e._UZ(0,"img",17)}function E(s,o){1&s&&(e.TgZ(0,"span",7),e._uU(1," Please provide name of package. "),e.qZA())}function D(s,o){1&s&&(e.TgZ(0,"span",7),e._uU(1," Name must be of less than 60 characters "),e.qZA())}function $(s,o){1&s&&(e.TgZ(0,"span",7),e._uU(1," Avoid white spaces "),e.qZA())}function B(s,o){if(1&s&&(e.ynx(0),e.YNc(1,E,2,0,"span",18),e.YNc(2,D,2,0,"span",18),e.YNc(3,$,2,0,"span",18),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.packageForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.packageForm.controls.name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.packageForm.controls.name.hasError("whitespace"))}}let H=(()=>{class s{constructor(t,a,n){this.modalRef=t,this.apiService=a,this.toastrService=n,this.title="Add Package",this.loading=!1,this.packageForm=new c.cw({id:new c.NI(null),name:new c.NI(null,[c.kI.required,c.kI.maxLength(60),Z.d.noWhiteSpace]),description:new c.NI(null)}),this.data=null}ngOnInit(){this.data&&this.packageForm.patchValue(this.data)}onSubmit(){this.loading=!0;let a=this.packageForm.value;a.id?this.updatePackage(a):this.createPackage(a)}createPackage(t){this.apiService.post(`${_.N.pkgms}/package-configuration/`,t).subscribe(n=>{this.loading=!1,this.toastrService.success(n.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.modalRef.close()},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error creating package",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}updatePackage(t){this.apiService.patch("cobnewpackages/package-configuration/",t).subscribe(n=>{this.loading=!1,this.toastrService.success(n.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.modalRef.close()},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error updating package",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onCloseModel(){this.modalRef.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.Kz),e.Y36(P.s),e.Y36(b._W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-package-form"]],decls:26,vars:6,consts:[[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],["fxLayout","row wrap",1,"modal-body","w-100-p",2,"position","relative"],["fxFlex","100","fxLayout","row wrap",3,"formGroup"],["fxFlex","100",1,"form-group"],[1,"text-danger"],["type","text","formControlName","name","required","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","rows","3","formControlName","description",1,"form-control"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],["class","text-danger",4,"ngIf"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.onCloseModel()}),e._uU(4,"\xd7"),e.qZA(),e.qZA(),e.YNc(5,Y,1,0,"img",3),e.TgZ(6,"div",4),e.TgZ(7,"form",5),e.TgZ(8,"div",6),e.TgZ(9,"label"),e._uU(10,"Package Name"),e.qZA(),e.TgZ(11,"span",7),e._uU(12,"*"),e.qZA(),e._UZ(13,"input",8),e.YNc(14,B,4,3,"ng-container",9),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"label",10),e._uU(17,"Package Description"),e.qZA(),e._UZ(18,"textarea",11),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"button",13),e.NdJ("click",function(){return a.onSubmit()}),e._UZ(21,"i",14),e._uU(22),e.qZA(),e.TgZ(23,"button",15),e.NdJ("click",function(){return a.onCloseModel()}),e._UZ(24,"i",16),e._uU(25," Discard "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(a.title),e.xp6(3),e.Q6J("ngIf",a.loading),e.xp6(2),e.Q6J("formGroup",a.packageForm),e.xp6(7),e.Q6J("ngIf",a.packageForm.controls.name.dirty),e.xp6(6),e.Q6J("disabled",!a.packageForm.valid||a.loading),e.xp6(2),e.hij(" ",null!=a.data&&a.data.id?"Update":"Save"," "))},directives:[f.O5,p.xw,c._Y,c.JL,p.yH,c.sg,c.Fj,c.JJ,c.u,c.Q7],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}.loader[_ngcontent-%COMP%]{position:absolute;top:25%;left:30%;z-index:1}"]}),s})();var y=u(5174),C=u(799),M=u(405),G=u(3437),L=u(5748);function R(s,o){1&s&&e._UZ(0,"img",23)}function z(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAddNew()}),e._UZ(1,"i",25),e._uU(2," Add Package "),e.qZA()}}function W(s,o){1&s&&(e.TgZ(0,"th",26),e._uU(1,"ACTION"),e.qZA())}function j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"td",31),e.TgZ(1,"a",32),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).onAddNew(n)}),e._UZ(2,"i",33),e.qZA(),e.TgZ(3,"a",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).onDelete(n)}),e._UZ(4,"i",35),e.qZA(),e.qZA()}}function V(s,o){if(1&s&&(e.TgZ(0,"tr",28),e.TgZ(1,"td",29),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.YNc(5,j,5,0,"td",30),e.qZA()),2&s){const t=o.$implicit,a=o.even,n=e.oxw(2);e.ekj("even-row",a),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}function X(s,o){if(1&s&&(e.ynx(0),e.YNc(1,V,6,5,"tr",27),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.packages)}}function K(s,o){1&s&&(e.ynx(0),e.TgZ(1,"tr",36),e._uU(2,"No Record found"),e.qZA(),e.BQk())}function ee(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-pagination",37),e.NdJ("pageChange",function(n){return e.CHM(t),e.oxw().onPageChange(n)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("length",t.count)}}let te=(()=>{class s{constructor(t,a,n,i){this.checkPermService=t,this.apiService=a,this.toastrService=n,this.modal=i,this.sorting=null,this.search=null,this.loading=!1,this.readonly=!1,this.showFilters=!1,this.cols=[{column:"name",title:"Name"},{column:"description",title:"Description"}],this.count=0,this.search={search_with:"",search_text:""},this.sorting={column:"",direction:""},this.slug="",this.offset=0,this.limit=10,this.packages=[],this.count=this.packages.length}ngOnInit(){let t=localStorage.getItem("limit");t&&(this.limit=+t),this.checkPermission(),this.getPackages()}getPackages(t){this.loading=!0,this.slug=t?`${_.N.pkgms}/package-configuration/?search_with=${t.search_with}&search_text=${t.search_text}&order_by=${t.column}&order=${t.direction}&offset=${this.offset}&limit=${this.limit}`:`${_.N.pkgms}/package-configuration/?offset=${this.offset}&limit=${this.limit}`,this.apiService.get(this.slug).subscribe(a=>{this.loading=!1,this.packages=a.data.data,this.count=a.data.count,this.showFilters=!!(t&&"all_columns"!==t.search_with&&t.search_text&&this.packages.length>0)},a=>{this.loading=!1,[401,2,3,11,151,153,18,300,301].includes(a.error.status)?this.toastrService.error(a.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(a.error.message,"Error getting packages",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}checkPermission(){let t=this.checkPermService.checkPermissions();this.readonly=!(t&&t.length>0&&t.includes("RW"))}onAddNew(t){const a=this.modal.open(H,{size:"sm",scrollable:!0});t&&(a.componentInstance.data=t,a.componentInstance.title="Edit Package"),a.closed.subscribe(()=>{this.getPackages()})}onDelete(t){let a=`cobnewpackages/package-configuration/?id=${t.id}`;C.c.confirm("Are you sure?","You want to delete this package?","Yes").subscribe(n=>{n.positive&&(this.loading=!0,this.apiService.delete(a).subscribe(i=>{this.getPackages()},i=>{this.loading=!1,this.toastrService.error(i.error.message,"Error deleting package",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})}))})}onSort({column:t,direction:a}){this.headers.forEach(n=>{n.sortable!==t&&(n.direction="")}),"asc"===a||"desc"===a?(this.sorting={search_with:this.search.search_with,search_text:this.search.search_text,column:t,direction:a},this.getPackages(this.sorting)):this.getPackages()}onSearch(t){this.search={search_with:t.column,search_text:t.search,column:this.sorting.column,direction:this.sorting.direction},this.getPackages(this.search)}onPageChange(t){this.offset=t.offset,this.limit=t.pageSize,this.getPackages({search_with:this.search.search_with,search_text:this.search.search_text,column:this.sorting.column,direction:this.sorting.direction})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.$),e.Y36(P.s),e.Y36(b._W),e.Y36(d.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-package-list"]],viewQuery:function(t,a){if(1&t&&e.Gf(y.x,5),2&t){let n;e.iGM(n=e.CRH())&&(a.headers=n)}},decls:28,vars:10,consts:[[1,"card","w-100-p",2,"border","none","height","100%"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],[1,"fs-14","fw-600","p-16","pt-10","pb-10","mb-0",2,"border-bottom","1px solid #ececec"],["ngbTooltip","Name, Description, Action","triggers","mouseenter:mouseleave","container","body","placement","top",1,"ri-information-line","info","grey-400"],["fxLayout","row wrap",1,"p-16","w-100-p",2,"height","calc(100% - 40px)"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between start",1,"h-48","mb-10"],["fxFlex","60"],["fxFlex","50",3,"cols","showFilters","signal"],["fxLayout","row","fxLayoutAlign","end start","fxFlex","40"],[1,"w-210"],["fxFlex","","class","btn btn-success btn-round fs-14 fw-300","style","border-radius: 20px !important;",3,"click",4,"ngIf"],[1,"w-100-p",2,"height","calc(100% - 58px)"],[2,"display","flex","flex-direction","row","height","auto","max-height","calc(100% - 46px)"],[2,"overflow","auto","flex","1"],["fxFlex",""],[1,"table",2,"width","calc(100% - 1px)"],[2,"position","sticky","top","-1px"],["scope","col","sortable","name",3,"sort"],["scope","col","sortable","description",3,"sort"],["scope","col","class","w-164",4,"ngIf"],[2,"height","calc(100% - 30px)"],[4,"ngIf"],[3,"length","pageChange",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],["fxFlex","",1,"btn","btn-success","btn-round","fs-14","fw-300",2,"border-radius","20px !important",3,"click"],[1,"ri-add-circle-fill"],["scope","col",1,"w-164"],["role","row",3,"even-row",4,"ngFor","ngForOf"],["role","row"],["width","200px","tabindex","0",1,"dtr-control","sorting_1"],["fxLayoutGap","8px",4,"ngIf"],["fxLayoutGap","8px"],["type","button","ngbTooltip","Edit",1,"btn","btn-icon","btn-info","btn-xs",3,"click"],[1,"ri-pencil-fill"],["type","button","ngbTooltip","Delete",1,"btn","btn-icon","btn-danger","btn-xs",3,"click"],[1,"ri-delete-bin-2-fill"],["colspan","3"],[3,"length","pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,R,1,0,"img",1),e.TgZ(2,"h3",2),e._uU(3,"Package Configuration "),e._UZ(4,"i",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"app-search",7),e.NdJ("signal",function(i){return a.onSearch(i)}),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.YNc(11,z,3,0,"button",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e.TgZ(15,"div",14),e.TgZ(16,"table",15),e.TgZ(17,"thead",16),e.TgZ(18,"tr"),e.TgZ(19,"th",17),e.NdJ("sort",function(i){return a.onSort(i)}),e._uU(20,"NAME"),e.qZA(),e.TgZ(21,"th",18),e.NdJ("sort",function(i){return a.onSort(i)}),e._uU(22,"DESCRIPTION"),e.qZA(),e.YNc(23,W,2,0,"th",19),e.qZA(),e.qZA(),e.TgZ(24,"tbody",20),e.YNc(25,X,2,1,"ng-container",21),e.YNc(26,K,3,0,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,ee,1,1,"app-pagination",22),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(5),e.ekj("mb-22",a.showFilters),e.xp6(2),e.Q6J("cols",a.cols)("showFilters",a.showFilters),e.xp6(3),e.Q6J("ngIf",!a.readonly),e.xp6(12),e.Q6J("ngIf",!a.readonly),e.xp6(2),e.Q6J("ngIf",!a.loading&&a.packages.length>0),e.xp6(1),e.Q6J("ngIf",!a.loading&&0===a.packages.length),e.xp6(1),e.Q6J("ngIf",a.count))},directives:[f.O5,d._L,p.xw,p.yH,p.Wh,G.g,y.x,f.sg,p.SQ,L.Q],styles:['@charset "UTF-8";.info[_ngcontent-%COMP%]{font-weight:400;margin-left:10px}.info[_ngcontent-%COMP%]:hover{text-decoration:underline}.loader[_ngcontent-%COMP%]{position:absolute;top:35%;left:45%;z-index:1}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;width:28px!important;height:28px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]{background:#f3f7f9;border-radius:20px;padding:4px 8px;margin-right:2px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]:hover{background:#e7ecee}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]{position:absolute;right:0;padding-right:30px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:before{content:"\\2191";opacity:.5;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:before{content:"\\2193";opacity:.5;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:after{content:"\\2193";opacity:1;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:after{content:"\\2191";opacity:1;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#77d6e1!important;border-color:#77d6e1;color:#fff}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#f96868!important;border-color:#f96868;color:#fff}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.even-row[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}']}),s})();function ae(s,o){1&s&&e._UZ(0,"img",17)}function se(s,o){1&s&&(e.TgZ(0,"div",8),e._uU(1," Please provide feature id. "),e.qZA())}function ne(s,o){1&s&&(e.TgZ(0,"div",8),e._uU(1," Avoid white spaces "),e.qZA())}function ie(s,o){if(1&s&&(e.ynx(0),e.YNc(1,se,2,0,"div",18),e.YNc(2,ne,2,0,"div",18),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.featureForm.controls.feature_id.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.featureForm.controls.feature_id.hasError("whitespace"))}}function oe(s,o){1&s&&(e.TgZ(0,"div",8),e._uU(1," Please provide name of feature. "),e.qZA())}function ce(s,o){1&s&&(e.TgZ(0,"div",8),e._uU(1," Avoid white spaces "),e.qZA())}function re(s,o){if(1&s&&(e.ynx(0),e.YNc(1,oe,2,0,"div",18),e.YNc(2,ce,2,0,"div",18),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.featureForm.controls.feature_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.featureForm.controls.feature_name.hasError("whitespace"))}}let de=(()=>{class s{constructor(t,a,n){this.modalRef=t,this.apiService=a,this.toastrService=n,this.title="Add Feature",this.loading=!1,this.featureForm=new c.cw({feature_id:new c.NI(null,[c.kI.required,Z.d.noWhiteSpace]),feature_name:new c.NI(null,[c.kI.required,Z.d.noWhiteSpace])}),this.data=null,this.moduleId=0,this.usecaseId=0}ngOnInit(){this.data&&this.featureForm.patchValue(this.data)}onSubmit(){this.loading=!0;let a=this.featureForm.value,n=`${_.N.pkgms}/packages/`;a.module=this.moduleId,a.usecase=this.usecaseId,this.data&&this.data.id?(a.id=this.data.id,this.updateFeature(n,a)):this.createFeature(n,a)}createFeature(t,a){this.apiService.post(t,a).subscribe(n=>{this.loading=!1,this.toastrService.success(n.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.modalRef.close()},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error creating Feature",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}updateFeature(t,a){this.apiService.patch(t,a).subscribe(n=>{this.loading=!1,this.toastrService.success(n.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.modalRef.close()},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error updating Feature",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}onCloseModel(){this.modalRef.close()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.Kz),e.Y36(P.s),e.Y36(b._W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-feature-form"]],decls:29,vars:7,consts:[[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["fxLayout","row wrap",1,"modal-body","w-100-p",2,"position","relative"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px","style","position: absolute; top: 30%; left: 42%;",4,"ngIf"],["fxFlex","100","fxLayout","row wrap",3,"formGroup"],["fxFlex","100",1,"form-group"],["for","name"],[1,"text-danger"],["type","text","formControlName","feature_id",1,"form-control"],[4,"ngIf"],["type","text","formControlName","feature_name","required","",1,"form-control"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",2,"position","absolute","top","30%","left","42%"],["class","text-danger",4,"ngIf"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.onCloseModel()}),e._uU(4,"\xd7"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,ae,1,0,"img",4),e.TgZ(7,"form",5),e.TgZ(8,"div",6),e.TgZ(9,"label",7),e._uU(10,"Feature Id"),e.qZA(),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,ie,3,2,"ng-container",10),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"label",7),e._uU(17,"Feature Name"),e.qZA(),e.TgZ(18,"span",8),e._uU(19,"*"),e.qZA(),e._UZ(20,"input",11),e.YNc(21,re,3,2,"ng-container",10),e.qZA(),e.TgZ(22,"div",12),e.TgZ(23,"button",13),e.NdJ("click",function(){return a.onSubmit()}),e._UZ(24,"i",14),e._uU(25),e.qZA(),e.TgZ(26,"button",15),e.NdJ("click",function(){return a.onCloseModel()}),e._UZ(27,"i",16),e._uU(28," Discard "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(a.title),e.xp6(4),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("formGroup",a.featureForm),e.xp6(7),e.Q6J("ngIf",a.featureForm.controls.feature_id.dirty),e.xp6(7),e.Q6J("ngIf",a.featureForm.controls.feature_name.dirty),e.xp6(2),e.Q6J("disabled",!a.featureForm.valid||a.loading),e.xp6(2),e.hij(" ",null!=a.data&&a.data.id?"Update":"Save"," "))},directives:[p.xw,f.O5,c._Y,c.JL,p.yH,c.sg,c.Fj,c.JJ,c.u,c.Q7],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}"]}),s})();var le=u(8030);function ge(s,o){1&s&&e._UZ(0,"img",3)}function ue(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,i=e.oxw(5);return i.onAddFeature(n.id,i.data.id)}),e._UZ(1,"i",24),e.TgZ(2,"span"),e._uU(3,"Add Feature"),e.qZA(),e.qZA()}}function _e(s,o){if(1&s&&(e.TgZ(0,"button",16),e.TgZ(1,"div",17),e.TgZ(2,"div",18),e._UZ(3,"i",19),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",20),e.YNc(7,ue,4,0,"button",21),e.TgZ(8,"span"),e._UZ(9,"i",22),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s){const t=o.opened,a=e.oxw().$implicit,n=e.oxw(5);e.xp6(3),e.Q6J("ngClass",null==a?null:a.icon),e.xp6(2),e.hij(" ",a.module_name," "),e.xp6(2),e.Q6J("ngIf",!n.readonly),e.xp6(2),e.Q6J("ngClass",t?"ri-subtract-line":"ri-add-line")}}function pe(s,o){if(1&s&&(e.TgZ(0,"td",32),e.TgZ(1,"div",33),e._uU(2),e.qZA(),e.qZA()),2&s){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function me(s,o){1&s&&e._UZ(0,"td",34)}function he(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"div",38),e.TgZ(2,"input",39),e.NdJ("change",function(){const i=e.CHM(t).$implicit;return e.oxw(9).onSelectPackage(i)})("ngModelChange",function(n){return e.CHM(t).$implicit.is_active=n}),e.qZA(),e._UZ(3,"label",40),e.qZA(),e.qZA()}if(2&s){const t=o.$implicit,a=o.index,n=e.oxw().index,i=e.oxw(8);e.xp6(2),e.hYB("id","",n,"-",a,""),e.Q6J("disabled",i.readonly)("checked",t.is_active)("ngModel",t.is_active),e.xp6(1),e.hYB("for","",n,"-",a,"")}}function fe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"td",41),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,i=e.oxw(3).$implicit,r=e.oxw(5);return r.onAddFeature(i.id,r.data.id,n)}),e._UZ(2,"i",43),e.qZA(),e.TgZ(3,"button",44),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,i=e.oxw(3).$implicit,r=e.oxw(5);return r.onDeleteFeature(i.id,r.data.id,n)}),e._UZ(4,"i",45),e.qZA(),e.qZA()}}function Ae(s,o){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",28),e.TgZ(4,"span",35),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",36),e.YNc(7,he,4,7,"td",6),e.qZA(),e.YNc(8,fe,5,0,"td",37),e.qZA()),2&s){const t=o.$implicit,a=o.index,n=e.oxw(8);e.xp6(2),e.Oqu(a+1),e.xp6(3),e.Oqu(t.feature_name),e.xp6(2),e.Q6J("ngForOf",n.getSortedNames(t.packages)),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}function xe(s,o){if(1&s&&(e.TgZ(0,"table",27),e.TgZ(1,"thead"),e.TgZ(2,"tr"),e._UZ(3,"td"),e._UZ(4,"td",28),e.TgZ(5,"div",29),e.YNc(6,pe,3,1,"td",30),e.qZA(),e.YNc(7,me,1,0,"td",31),e.qZA(),e.qZA(),e.TgZ(8,"tbody"),e.YNc(9,Ae,9,4,"tr",6),e.qZA(),e.qZA()),2&s){const t=e.oxw(2).$implicit,a=e.oxw(5);e.xp6(6),e.Q6J("ngForOf",a.getSortedArray(t.packages)),e.xp6(1),e.Q6J("ngIf",!a.readonly),e.xp6(2),e.Q6J("ngForOf",t.features)}}function ve(s,o){1&s&&(e.TgZ(0,"div"),e.TgZ(1,"h5"),e._uU(2,"No features found."),e.qZA(),e.qZA())}function ke(s,o){if(1&s&&(e.TgZ(0,"div",25),e.YNc(1,xe,10,3,"table",26),e.YNc(2,ve,3,0,"div",2),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",(null==t||null==t.features?null:t.features.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==t||null==t.features?null:t.features.length))}}function Pe(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"ngb-panel",13),e.YNc(2,_e,10,4,"ng-template",14),e.YNc(3,ke,3,2,"ng-template",15),e.qZA(),e.BQk()),2&s){const t=o.index;e.xp6(1),e.MGl("id","acc-",t,"")}}function be(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"ngb-accordion",12),e.YNc(2,Pe,4,1,"ng-container",6),e.qZA(),e.BQk()),2&s){const t=e.oxw(4);e.xp6(1),e.Q6J("closeOthers",!0),e.xp6(1),e.Q6J("ngForOf",t.data.modules)}}function Ze(s,o){if(1&s&&e.YNc(0,be,3,2,"ng-container",2),2&s){const t=e.oxw().$implicit;e.Q6J("ngIf","Fleet Management System"!==(null==t?null:t.usecase_name)||"Asset Tracking"!=(null==t?null:t.usecase_name))}}function Ce(s,o){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.TgZ(2,"a",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).getData(i.id,!0)}),e._uU(3),e.qZA(),e.YNc(4,Ze,1,1,"ng-template",11),e.qZA(),e.BQk()}if(2&s){const t=o.$implicit;e.xp6(1),e.Q6J("ngbNavItem",t.id),e.xp6(2),e.Oqu(t.usecase_name)}}function Te(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",46),e.TgZ(1,"div"),e.TgZ(2,"button",47),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(2);return e.oxw().onSave(n)}),e._uU(3," Submit "),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",0===t.newData.length||t.loading)}}function Oe(s,o){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",4,5),e.NdJ("activeIdChange",function(n){return e.CHM(t),e.oxw().active=n}),e.YNc(3,Ce,5,2,"ng-container",6),e.qZA(),e._UZ(4,"div",7),e.YNc(5,Te,4,1,"div",8),e.BQk()}if(2&s){const t=e.MAs(2),a=e.oxw();e.xp6(1),e.Q6J("activeId",a.active),e.xp6(2),e.Q6J("ngForOf",a.usecases),e.xp6(1),e.Q6J("ngbNavOutlet",t),e.xp6(1),e.Q6J("ngIf",!a.readonly)}}function we(s,o){1&s&&(e.TgZ(0,"div"),e.TgZ(1,"h5"),e._uU(2,"No usecase found."),e.qZA(),e.qZA())}let Fe=(()=>{class s{constructor(t,a,n,i){this.apiService=t,this.toastrService=a,this.checkPermService=n,this.modal=i,this.loading=!1,this.readonly=!1,this.usecases=[],this.data=null,this.packagefeaturelist=[],this.fmsData={modules:[{module_id:1,module_name:"FMS Dashboard",id:1,packages:[{id:7,module_name:"Advance Plus",currency_name:"US $",month_price:0,quarter_price:0,annual_price:0,name:"Advance Plus",module_id:1,description:"Advance Package",modified_datetime:"2021-03-09T14:35:50.315098Z"},{id:6,module_name:"Advance",currency_name:"US $",month_price:0,quarter_price:0,annual_price:0,name:"Advance",module_id:1,description:"Standard Package",modified_datetime:"2021-03-09T14:35:50.315098Z"},{id:5,module_name:"Plug & Go",currency_name:"US $",month_price:0,quarter_price:0,annual_price:0,name:"Plug & Go",module_id:1,description:"Plug and Go Package",modified_datetime:"2021-02-26T14:28:22.422814Z"}],features:[{id:90,name:"Admin App",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:89,name:"Driver App",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:88,name:"Alert Subscription ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:87,name:"Panic button alert",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:86,name:"Event based alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:85,name:"Battery Alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:84,name:"Tamper/ Theft Alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:83,name:"View all alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:82,name:"Automatic fuel data & alerts (Automatic)",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!1},{id:5,name:"Plug & Go",is_selected:!1}]},{id:81,name:"Predictive Maintenance Alert",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:80,name:"SMS alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:79,name:"Email Alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:78,name:"Excessive idling alert",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:77,name:"Fuel level alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!1},{id:5,name:"Plug & Go",is_selected:!1}]},{id:76,name:"Harsh accelerations / deccelerations and braking alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:75,name:"Geo fence entry / exit alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:74,name:"Geo fence violation alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:73,name:"Over speeding alerts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:72,name:"Predictive Maintenance",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:71,name:"Maintenance Job Summary",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:70,name:"Maintenance Workorder creation",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:68,name:"Fuel Consumption Reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:67,name:"Driver punctuality report ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:66,name:"Jobs reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:65,name:"Fleet OBD Report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:64,name:"Fleet maintenance reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:63,name:"Audit reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:62,name:"Predictive Maintenance reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:61,name:"Vehicle over speeding reports ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:60,name:"Trip anomaly report ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:59,name:"Vehicle summary report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:58,name:"Driver profile report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:57,name:"Driver score card report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:56,name:"Fuel level reporting",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!1},{id:5,name:"Plug & Go",is_selected:!1}]},{id:55,name:"Trip summary report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:54,name:"Location and movement reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:53,name:"Geo fence entry / exit reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:52,name:"Geo fence violation reports",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:51,name:"Driver vehicle usage report",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:50,name:"Create and manage geo Routes",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:49,name:"Geozones based near real time tracking using Maps interface",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:48,name:"Polygon / circle based geo zones creation",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:47,name:"Geozones based historic tracking using Maps interface ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:46,name:"Create and manage geo zones, routes, POI and POI groups",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:45,name:"Fleet status display",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:44,name:"Filters on vehicle groups, zones or POI for tracking fleet",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:43,name:"Time stamps on fleet and trips",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:42,name:"Historic fleet tracking using Maps interface",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:41,name:"Near real time fleet tracking using tabular interface",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:40,name:"Near real time fleet tracking using Maps interface",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:39,name:"Driver job / trip completion workflow",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:38,name:"Allocate jobs / trips for drivers",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:37,name:"Allocate shifts for drivers",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:36,name:"Create and manage shifts for drivers",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:35,name:"Driver job / trip dashboard view",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:34,name:"Device telemetric definition and management",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:33,name:"Display device information in the system",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:32,name:"SIM mapping and display in the system ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:31,name:"Associate contracts and features to the customer",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:30,name:"Create and manage customers for the system",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:29,name:"Associate roles and permissions to the users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:28,name:"Create and manage system users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:27,name:"Role based user access ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:26,name:"User profile self management",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:25,name:"Reset/Change password for first time users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:24,name:"Forgot password for existing users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:23,name:"Login capabilities for both first time and returning users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:22,name:"Generate passwords for first time users",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:21,name:"Automatic fuel readings",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!1},{id:5,name:"Plug & Go",is_selected:!1}]},{id:20,name:"Fuel readings details view ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!1},{id:5,name:"Plug & Go",is_selected:!1}]},{id:19,name:"Manual fuel entry",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:18,name:"Driver performance information",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:17,name:"Manage Shifts",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:16,name:"Driver dashboard views",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:15,name:"Driver behavior identification (harsh breaking, acceleration, declaration, overspeed etc.)",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:14,name:"Create and manage groups of drivers",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:13,name:"Allocate driver to vehicles",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:12,name:"Display driver details",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:11,name:"Create and manage drivers",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:10,name:"Allocate fleet to routes ",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:9,name:"Define and manage vehicle types master data",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:8,name:"Allocate fleet to geozones",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:7,name:"Map fleet with devices",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:6,name:"Display fleet details",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:5,name:"Create and manage fleet",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:4,name:"Maintenance dashboard views",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:3,name:"Driver dashboard views",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!1}]},{id:2,name:"Overall summary dashboard",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]},{id:1,name:"Fleet dashboards",usecase_id:1,packages:[{id:7,name:"Advance Plus",is_selected:!0},{id:6,name:"Advance",is_selected:!0},{id:5,name:"Plug & Go",is_selected:!0}]}]}]},this.newData=[],this.active=0,this.lastUId=0}ngOnInit(){this.data={},this.checkPermission(),this.getUsecases()}checkPermission(){let t=this.checkPermService.checkPermissions();this.readonly=!(t&&t.length>0&&t.includes("RW"))}getUsecases(){this.loading=!0,this.apiService.get(`${_.N.pkgms}/packages/usecases`).subscribe(a=>{if(a.data.data.forEach(i=>{this.usecases.push(i)}),0===this.usecases.length)this.loading=!1;else{const i=this.usecases[0].id;this.active=i,this.getData(i)}},a=>{this.loading=!1,[401,2,3,11,151,153,18,300,301].includes(a.error.status)?this.toastrService.error(a.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(a.error.message,"Error getting usecases",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}getData(t,a=!1){this.loading=!0,this.lastUId=t,a&&(this.data={}),this.apiService.get(`${_.N.pkgms}/packages/?id=${t}`).subscribe(i=>{this.data=i.data.data,this.loading=!1},i=>{this.loading=!1,this.toastrService.error(i.error.message,"Error getting packages data",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getSortedArray(t){return t.sort((n,i)=>n.name>i.name?1:-1)}getSortedNames(t){return t.sort((n,i)=>n.package_name>i.package_name?1:-1)}onAddFeature(t,a,n){null==event||event.stopPropagation();const i=this.modal.open(de,{size:"sm",scrollable:!0});n&&(i.componentInstance.data=n,i.componentInstance.title="Edit Feature"),i.componentInstance.moduleId=t,i.componentInstance.usecaseId=a,i.closed.subscribe(()=>{this.getData(a)})}onDeleteFeature(t,a,n){let i=`${_.N.pkgms}/packages/?id=${n.id}`;C.c.confirm("Are you sure?","You want to delete this feature?","Yes").subscribe(r=>{r.positive&&this.apiService.delete(i).subscribe(g=>{this.toastrService.success(g.message,"Successfully Deleted",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getData(a)},g=>{this.toastrService.error(g.error.message,"Error deleting feature",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})})}onSelectPackage(t){this.newData=[];for(let a=0;a<this.data.modules.length;a++){let n=this.data.modules[a].features;for(let i=0;i<n.length;i++){let r=this.data.modules[a].features[i].packages;for(let g=0;g<r.length;g++)this.newData.push({id:r[g].id,is_active:r[g].is_active})}}}onSave(t){this.apiService.patch(`${_.N.pkgms}/packages/usecases`,{package_plan:this.newData}).subscribe(i=>{this.toastrService.success(i.message,"Success",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.getData(this.lastUId)},i=>{this.toastrService.error(i.error.message,"Error updating package plan",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}packageATDashboard(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Dashboard`).subscribe(a=>{this.responseOFATAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))},a=>{console.log(a)})}packageATAssets(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Assets`).subscribe(a=>{this.responseOFATDashboardAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATDashboardAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATDashboardAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATDashboardAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATAssetInventory(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Assets Inventory`).subscribe(a=>{this.responseOFATAlertAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATAlertAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATAlertAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATAlertAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATAssetAllocate(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Allocate/Lease`).subscribe(a=>{this.responseOFAAllocateAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFAAllocateAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFAAllocateAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFAAllocateAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATUserandAdmin(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=User and Admin`).subscribe(a=>{this.responseOFATConfigAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATConfigAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATConfigAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATConfigAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATReports(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Reports`).subscribe(a=>{this.responseOFATReportsAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATReportsAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATReportsAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATReportsAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATAuditandDocument(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Documents and Audit`).subscribe(a=>{this.responseOFATAnaysticsAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATAnaysticsAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATAnaysticsAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATAnaysticsAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}packageATApps(){this.apiService.get(`${_.N.cobOld}/api/users/get_features_packages/?module_id=6&usecase_id=2&category=Apps`).subscribe(a=>{this.responseOFATAppsAPI=a.data,a.error?this.toastrService.error(a.message):(this.responseOFATAppsAPI.features.forEach(n=>{n.packages.forEach(i=>{i.is_selected=!!i.is_selected})}),0==this.responseOFATAppsAPI.features.length?this.toastrService.error("You cannot select this usecase as there is no feature against this usecase"):0==this.responseOFATAppsAPI.packages.length&&this.toastrService.error("You cannot select this usecase as there is no package against this usecase"))})}inputboxChanged(t,a,n){var i,r,g,A,h,q,U,N,I,S;let J;if(this.newData=[],J={feature_id:t.id,package_id:a.id},this.packagefeaturelist.push(J),this.newData.push(J),n.target.checked)for(let x=0;x<(null===(r=null===(i=this.fmsData.modules[0])||void 0===i?void 0:i.features)||void 0===r?void 0:r.length);x++)for(let v=0;v<(null===(A=null===(g=this.fmsData.modules[0])||void 0===g?void 0:g.features[x].packages)||void 0===A?void 0:A.length);v++)(null===(h=this.fmsData.modules[0])||void 0===h?void 0:h.features[x].id)==t.id&&(null===(q=this.fmsData.modules[0])||void 0===q?void 0:q.features[x].packages[v].id)==a.id&&(this.fmsData.modules[0].features[x].packages[v].is_selected=!0);else for(let x=0;x<(null===(U=this.fmsData.modules[0])||void 0===U?void 0:U.features.length);x++)for(let v=0;v<(null===(N=this.fmsData.modules[0])||void 0===N?void 0:N.features[x].packages.length);v++)(null===(I=this.fmsData.modules[0])||void 0===I?void 0:I.features[x].id)==t.id&&(null===(S=this.fmsData.modules[0])||void 0===S?void 0:S.features[x].packages[v].id)==a.id&&(this.fmsData.modules[0].features[x].packages[v].is_selected=!1)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(P.s),e.Y36(b._W),e.Y36(M.$),e.Y36(d.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-packages"]],decls:4,vars:3,consts:[[1,"card","w-100-p","bg-white","p-16",2,"border","none"],["src","/assets/images/block-loader.gif","alt","Loading","class","loader","width","150px","height","150px",4,"ngIf"],[4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],["ngbNav","",1,"nav-pills","nav-tabs",2,"position","relative",3,"activeId","activeIdChange"],["nav","ngbNav"],[4,"ngFor","ngForOf"],[1,"mt-2","mb-8",3,"ngbNavOutlet"],["fxFlex","100","fxLayout","row","fxLayoutAlign","end end",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink","",1,"fw-700",3,"click"],["ngbNavContent",""],["activeIds","acc-0",2,"border","none",3,"closeOthers"],[1,"custom-panel-body",3,"id"],["ngbPanelHeader",""],["ngbPanelContent",""],["ngbPanelToggle","",1,"w-100-p","btn",2,"color","#f60000"],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100-p"],[1,"fw-300","fs-15"],[1,"mr-8",3,"ngClass"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start center"],["class","btn btn-primary h-28 lh-16","fxLayout","row",3,"click",4,"ngIf"],[3,"ngClass"],["fxLayout","row",1,"btn","btn-primary","h-28","lh-16",3,"click"],[1,"ri-add-line"],["fxLayout","row wrap",1,"custom-panel-body",2,"overflow","auto"],["class","table table-hover table-striped no-border text-wrap mb-0",4,"ngIf"],[1,"table","table-hover","table-striped","no-border","text-wrap","mb-0"],[2,"min-width","328px"],["fxLayout","row","fxLayoutAlign","start start"],["style","line-height: 16px;",4,"ngFor","ngForOf"],["width","78",4,"ngIf"],[2,"line-height","16px"],[1,"title"],["width","78"],[1,"break-line"],["fxLayout","row","fxLayoutAlign","start start",1,"text-center"],["style","min-width: 78px;",4,"ngIf"],[1,"custom","checkbox-inline","checkbox-danger",2,"min-width","128px"],["type","checkbox",2,"color","red",3,"disabled","id","checked","ngModel","change","ngModelChange"],[3,"for"],[2,"min-width","78px"],[1,"btn","btn-icon","btn-primary","w-24","h-24","p-0","mr-1",3,"click"],[1,"ri-pencil-line"],[1,"btn","btn-icon","btn-danger","w-24","h-24","p-0",3,"click"],[1,"ri-delete-bin-6-line"],["fxFlex","100","fxLayout","row","fxLayoutAlign","end end"],[1,"btn","btn-round","btn-success",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ge,1,0,"img",1),e.YNc(2,Oe,6,4,"ng-container",2),e.YNc(3,we,3,0,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",a.usecases.length>0),e.xp6(1),e.Q6J("ngIf",0===a.usecases.length))},directives:[f.O5,d.Pz,f.sg,d.tO,d.nv,d.Vx,d.uN,d.gY,d.Gk,d.k9,d.gW,d.I_,p.xw,p.Wh,f.mk,le.oO,p.SQ,c.Wl,c.JJ,c.On,p.yH],styles:['[_nghost-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;height:100%;align-content:flex-start;align-items:flex-start}.nav-link[_ngcontent-%COMP%]{color:#76838f}.nav-link[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff}  .accordion .card-header{padding:0!important}  .accordion .card-body{padding:12px!important}.btn-usecase[_ngcontent-%COMP%]{position:absolute;right:0;top:0;border-radius:5px 5px 0 0}.loader[_ngcontent-%COMP%]{position:absolute;top:30%;left:42%;z-index:1}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none!important;padding:0 8px 12px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:4px 8px}.title[_ngcontent-%COMP%]{min-width:128px;height:32px;line-height:16px;font-size:16px!important;border-radius:10px 0;border-color:#e60000;background:#e60000;text-align:center;padding:8px 0;color:#fff;font-family:"Roboto",sans-serif;font-weight:500}']}),s})();var ye=u(5585);function Me(s,o){1&s&&e._UZ(0,"img",44)}function qe(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Please provide name of usecase "),e.qZA())}function Ue(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Name must be of less than 60 characters "),e.qZA())}function Ne(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Avoid white spaces "),e.qZA())}function Ie(s,o){if(1&s&&(e.ynx(0),e.YNc(1,qe,2,0,"span",18),e.YNc(2,Ue,2,0,"span",18),e.YNc(3,Ne,2,0,"span",18),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.usecase_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.usecase_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.usecase_name.hasError("whitespace"))}}function Se(s,o){if(1&s&&(e.TgZ(0,"ng-option",45),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij("",t.name," ")}}function Je(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Please select a package "),e.qZA())}function Ge(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Please provide no of Users. "),e.qZA())}function Le(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"input",49),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.is_consumer=n}),e.qZA(),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"input",50),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"a",51),e.NdJ("click",function(){const n=e.CHM(t),i=n.$implicit,r=n.index;return e.oxw(2).onEditPackage(i,r)}),e._UZ(15,"i",52),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=o.$implicit,a=o.index;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.Oqu(t.package_name),e.xp6(2),e.Oqu(t.package_unique_id),e.xp6(2),e.Oqu(t.no_of_users),e.xp6(2),e.Q6J("ngModel",t.is_consumer)("disabled",!0),e.xp6(2),e.Q6J("disabled",!0)("checked",t.is_addon)}}function Qe(s,o){if(1&s&&(e.TgZ(0,"div",46),e.TgZ(1,"table",47),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"SR #"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Package Name"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Package ID"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"No of Users"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"For Consumer"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Add-On"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Action"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,Le,16,8,"tr",48),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",t.selectedPackages)}}function Ye(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Please provide module ID. "),e.qZA())}function Ee(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Please provide module name. "),e.qZA())}function De(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Name must be of less than 60 characters "),e.qZA())}function $e(s,o){1&s&&(e.TgZ(0,"span",8),e._uU(1," Avoid white space "),e.qZA())}function Be(s,o){if(1&s&&(e.ynx(0),e.YNc(1,Ee,2,0,"span",18),e.YNc(2,De,2,0,"span",18),e.YNc(3,$e,2,0,"span",18),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.moduleForm.controls.module_name.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.moduleForm.controls.module_name.hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",t.moduleForm.controls.module_name.hasError("whitespace"))}}function He(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"a",51),e.NdJ("click",function(){const n=e.CHM(t),i=n.$implicit,r=n.index;return e.oxw(2).onEditModule(i,r)}),e._UZ(9,"i",52),e.qZA(),e.TgZ(10,"a",53),e.NdJ("click",function(){const i=e.CHM(t).index;return e.oxw(2).onRemoveModule(i)}),e._UZ(11,"i",54),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=o.$implicit,a=o.index;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.Oqu(t.module_id),e.xp6(2),e.Oqu(t.module_name)}}function Re(s,o){if(1&s&&(e.TgZ(0,"div",46),e.TgZ(1,"table",47),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"SR #"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Module Id"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Module Name"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Action"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,He,12,3,"tr",48),e.qZA(),e.qZA(),e.qZA()),2&s){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.modules)}}let ze=(()=>{class s{constructor(t,a,n){this.modalRef=t,this.apiService=a,this.toastrService=n,this.title="Add Usecase",this.loading=!1,this.doNotUpdate=!1,this.usecase_name=new c.NI(null,[c.kI.required,c.kI.maxLength(60),Z.d.noWhiteSpace]),this.usecase_unique_id=new c.NI(null),this.packageForm=new c.cw({id:new c.NI(null),package_unique_id:new c.NI(null),package_name:new c.NI(null,[c.kI.required]),no_of_users:new c.NI(null,[c.kI.required]),is_addon:new c.NI(!1),is_consumer:new c.NI(!1)}),this.moduleForm=new c.cw({id:new c.NI(null),module_id:new c.NI(null),module_name:new c.NI(null,[c.kI.required,c.kI.maxLength(60),Z.d.noWhiteSpace])}),this.data=null,this.packages=[],this.selectedPackages=[],this.modules=[]}ngOnInit(){if(this.data){this.usecase_name.setValue(this.data.usecase_name),this.usecase_unique_id.setValue(this.data.usecase_unique_id);const t=this.data.packages;t.forEach(a=>{a.is_consumer=a.is_consumer_package}),this.selectedPackages=t,null==this.selectedPackages&&(this.selectedPackages=[]),this.modules=this.data.modules}this.getPackages()}getPackages(){this.apiService.get(`${_.N.pkgms}/package-configuration/`).subscribe(a=>{this.packages=a.data.data},a=>{this.toastrService.error(a.error.message,"Error getting packages",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onSelectPackage(t){var a;let n;this.packages.forEach(i=>{if(i.name===t)return n=i.id}),null===(a=this.packageForm.get("id"))||void 0===a||a.setValue(n)}onAddPackage(t){const a=this.packageForm.value,n=null!=a.id?"onEdit":"onAdd",i=a.package_name;a.id="onAdd"===n?this.selectedPackages.length+1:a.id;let r=!1;if(this.selectedPackages.find(g=>r=g.package_name===i),a&&!r){if("onEdit"===n){const g=this.selectedPackages.findIndex(A=>A.package_id===a.id);-1!=g?this.selectedPackages.splice(g,1,{package_id:a.id,package_unique_id:a.package_unique_id,package_name:a.package_name,no_of_users:a.no_of_users,is_addon:a.is_addon,is_consumer:a.is_consumer}):this.selectedPackages.push({package_id:a.id,package_unique_id:a.package_unique_id,package_name:a.package_name,no_of_users:a.no_of_users,is_addon:a.is_addon,is_consumer:a.is_consumer})}else this.selectedPackages.push({package_id:a.id,package_unique_id:a.package_unique_id,package_name:a.package_name,no_of_users:a.no_of_users,is_addon:a.is_addon,is_consumer:a.is_consumer});this.packageForm.reset(),this.doNotUpdate=!1}}onEditPackage(t,a){var n,i,r,g,A,h;this.doNotUpdate=!0,null===(n=this.packageForm.get("id"))||void 0===n||n.setValue(t.package_id),null===(i=this.packageForm.get("package_name"))||void 0===i||i.setValue(t.package_name),null===(r=this.packageForm.get("no_of_users"))||void 0===r||r.setValue(t.no_of_users),null===(g=this.packageForm.get("package_unique_id"))||void 0===g||g.setValue(t.package_unique_id),null===(A=this.packageForm.get("is_addon"))||void 0===A||A.setValue(t.is_addon),null===(h=this.packageForm.get("is_consumer"))||void 0===h||h.setValue(t.is_consumer),this.selectedPackages.splice(a,1)}onChangeStatus(t,a){C.c.warn("Warning","Are You Sure?","Yes").subscribe(n=>{})}onRemovePackage(t){this.selectedPackages.splice(t,1)}onEditModule(t,a){this.moduleForm.patchValue(t),this.modules.splice(a,1)}onAddModule(){let t=this.moduleForm.value;const a=t.module_id?"edit":"add",n=t.module_name;let i=!1;if(this.modules.find(r=>i=r.module_name===n),t&&!i){if("edit"===a){const r=this.modules.findIndex(g=>+g.module_id==+t.module_id);-1!=r?this.modules.splice(r,1,{id:this.modules[r].id,module_id:t.module_id,module_name:t.module_name}):this.modules.push({id:t.id,module_id:t.module_id,module_name:t.module_name})}else this.modules.push({module_id:t.module_id,module_name:t.module_name});this.moduleForm.reset()}}onRemoveModule(t){const n=`${_.N.pkgms}/usecase-configuration/delete-usecase-module?id=${this.modules[t].id}`;C.c.confirm("Are you sure?","All features associated with this module will be affected").subscribe(i=>{i.positive&&this.apiService.delete(n).subscribe(r=>{this.modules.splice(t,1),this.toastrService.success(r.message,"Module Successfully Deleted",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})},r=>{this.toastrService.error(r.error.message,"Error deleting module",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})})}onSubmit(){var t;this.loading=!0;let a=`${_.N.pkgms}/usecase-configuration/`,n=this.usecase_name.value,i=this.usecase_unique_id.value,r=[],g=[];this.selectedPackages.forEach(h=>{r.push({package_id:h.package_id,package_unique_id:h.package_unique_id,no_of_users:h.no_of_users,is_addon:h.is_addon,is_consumer_package:h.is_consumer})}),this.modules.forEach(h=>{g.push({module_id:h.id,module_name:h.name})});let A={usecase_unique_id:i,usecase_name:n,package_list:r,module_list:this.modules};this.data&&(null===(t=this.data)||void 0===t?void 0:t.id)?(A.id=this.data.id,this.updateUsecase(a,A)):this.createUsecase(a,A)}createUsecase(t,a){this.apiService.post(t,a).subscribe(n=>{this.loading=!1,this.modalRef.dismissAll(),this.toastrService.success(n.message,"Usecase created successfully",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error creating usecase",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}updateUsecase(t,a){this.apiService.patch(t,a).subscribe(n=>{this.loading=!1,this.modalRef.dismissAll(),this.toastrService.success(n.message,"Usecase updated successfully",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})},n=>{this.loading=!1,this.toastrService.error(n.error.message,"Error creating usecase",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}integerOnly(t){return ye.Z.IntegerOnly(t)}onCloseModel(){this.modalRef.dismissAll()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.FF),e.Y36(P.s),e.Y36(b._W))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-use-case-form"]],decls:85,vars:20,consts:[[1,"modal-header","pt-8","pb-8"],[1,"modal-title","fs-18","fw-300"],["type","button","tabindex","-1",1,"close",3,"click"],["src","/assets/images/block-loader.gif","alt","Loading","class","loader","width","150px","height","150px",4,"ngIf"],["fxLayout","row wrap",1,"modal-body","w-100-p",2,"height","calc(100% - 44px)"],["fxLayoutGap","8px",1,"w-100-p","h-82"],["fxFlex","",1,"form-group","mb-0"],["for","name"],[1,"text-danger"],["type","text","required","","placeholder","Enter usecase name",1,"form-control",3,"formControl"],[4,"ngIf"],["type","text","placeholder","Enter usecase id",1,"form-control",3,"formControl"],["fxFlex","100","fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","start space-between",3,"formGroup"],["fxFlex","100","fxLayout","row","fxLayoutGap","8px"],["fxFlex","","fxLayout","row","fxLayoutGap","8px"],["for","pkg-dropdown"],["formControlName","package_name","placeholder","Select a package",1,"w-100-p","group-container",3,"readonly","clearable","change"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["type","text","formControlName","package_unique_id","placeholder","Package ID",1,"form-control"],["for","users"],["type","text","formControlName","no_of_users","placeholder","No of users",1,"form-control",3,"keydown"],["fxLayout","row",1,"btn","btn-primary",2,"margin-top","4px !important","align-self","center","height","32px","line-height","16px",3,"disabled","click"],[1,"ri-add-line"],["fxFlex","100","fxLayout","row","fxLayoutAlign","start end","fxLayoutGap","8px",1,"mt-6"],[1,"mb-0",2,"display","flex"],["type","checkbox","id","is-cons","formControlName","is_consumer",1,"mr-6"],["for","is-cons",1,"mr-8","mb-12"],["type","checkbox","id","addon","formControlName","is_addon",1,"mr-6"],["for","addon",1,"mr-8","mb-12"],["fxFlex","100","fxLayout","row","fxLayoutAlign","start end"],["fxFlex","100",4,"ngIf"],["fxFlex","100","fxLayoutGap","8px","fxLayoutAlign","space-between start",1,"h-82",3,"formGroup"],[1,"w-50-p","form-group"],["for","module-id"],["id","module-id","type","text","formControlName","module_id","placeholder","Enter module id",1,"form-control"],["for","module-name"],["id","module-name","type","text","formControlName","module_name","required","","placeholder","Enter module name",1,"form-control"],[1,"btn","btn-primary","usecase-add-btn",3,"disabled","click"],["fxFlex","100",1,"form-group","text-center","mb-0"],["type","submit",1,"btn","btn-success","btn-round","mr-8",3,"disabled","click"],[1,"ri-check-fill"],[1,"btn","btn-default","btn-round",3,"click"],[1,"ri-close-line"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],[3,"value"],["fxFlex","100"],["fxFlex","100",1,"table"],[4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],["type","checkbox",3,"disabled","checked"],["ngbTooltip","Edit","container","body",1,"btn","btn-icon","btn-primary","mr-8",2,"padding","3px",3,"click"],[1,"ri-pencil-line"],["ngbTooltip","Delete","container","body",1,"btn","btn-icon","btn-danger",2,"padding","3px",3,"click"],[1,"ri-subtract-line"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.onCloseModel()}),e._uU(4,"\xd7"),e.qZA(),e.qZA(),e.YNc(5,Me,1,0,"img",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"label",7),e._uU(10,"Usecase name"),e.qZA(),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,Ie,4,3,"ng-container",10),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"label",7),e._uU(17,"Usecase ID"),e.qZA(),e._UZ(18,"input",11),e.qZA(),e.qZA(),e.TgZ(19,"form",12),e.TgZ(20,"div",13),e.TgZ(21,"div",13),e.TgZ(22,"div",14),e.TgZ(23,"div",6),e.TgZ(24,"label",15),e._uU(25,"Select Package "),e.TgZ(26,"span",8),e._uU(27,"*"),e.qZA(),e.qZA(),e.TgZ(28,"ng-select",16),e.NdJ("change",function(i){return a.onSelectPackage(i)}),e.YNc(29,Se,2,2,"ng-option",17),e.qZA(),e.YNc(30,Je,2,0,"span",18),e.qZA(),e.TgZ(31,"div",6),e.TgZ(32,"label"),e._uU(33,"Package ID"),e.qZA(),e._UZ(34,"input",19),e.qZA(),e.TgZ(35,"div",6),e.TgZ(36,"label",20),e._uU(37,"No of Users"),e.qZA(),e.TgZ(38,"span",8),e._uU(39,"*"),e.qZA(),e.TgZ(40,"input",21),e.NdJ("keydown",function(i){return a.integerOnly(i)}),e.qZA(),e.YNc(41,Ge,2,0,"span",18),e.qZA(),e.qZA(),e.TgZ(42,"button",22),e.NdJ("click",function(){return a.onAddPackage()}),e._UZ(43,"i",23),e.TgZ(44,"span"),e._uU(45,"Add"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",24),e.TgZ(47,"div",25),e._UZ(48,"input",26),e.TgZ(49,"label",27),e._uU(50,"For Consumer"),e.qZA(),e.qZA(),e.TgZ(51,"div",25),e._UZ(52,"input",28),e.TgZ(53,"label",29),e._uU(54,"Support Add-on?"),e.qZA(),e.qZA(),e.qZA(),e._UZ(55,"div",30),e.qZA(),e.YNc(56,Qe,20,1,"div",31),e.TgZ(57,"form",32),e.TgZ(58,"div",14),e.TgZ(59,"div",33),e.TgZ(60,"label",34),e._uU(61,"Module ID"),e.qZA(),e.TgZ(62,"span",8),e._uU(63,"*"),e.qZA(),e._UZ(64,"input",35),e.YNc(65,Ye,2,0,"span",18),e.qZA(),e.TgZ(66,"div",33),e.TgZ(67,"label",36),e._uU(68,"Module Name"),e.qZA(),e.TgZ(69,"span",8),e._uU(70,"*"),e.qZA(),e._UZ(71,"input",37),e.YNc(72,Be,4,3,"ng-container",10),e.qZA(),e.qZA(),e.TgZ(73,"button",38),e.NdJ("click",function(){return a.onAddModule()}),e._UZ(74,"i",23),e.TgZ(75,"span"),e._uU(76,"Add"),e.qZA(),e.qZA(),e.qZA(),e.YNc(77,Re,14,1,"div",31),e.TgZ(78,"div",39),e.TgZ(79,"button",40),e.NdJ("click",function(){return a.onSubmit()}),e._UZ(80,"i",41),e._uU(81),e.qZA(),e.TgZ(82,"button",42),e.NdJ("click",function(){return a.onCloseModel()}),e._UZ(83,"i",43),e._uU(84," Discard "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(a.title),e.xp6(3),e.Q6J("ngIf",a.loading),e.xp6(8),e.Q6J("formControl",a.usecase_name),e.xp6(1),e.Q6J("ngIf",a.usecase_name.dirty),e.xp6(4),e.Q6J("formControl",a.usecase_unique_id),e.xp6(1),e.Q6J("formGroup",a.packageForm),e.xp6(9),e.Q6J("readonly",a.doNotUpdate)("clearable",!1),e.xp6(1),e.Q6J("ngForOf",a.packages),e.xp6(1),e.Q6J("ngIf",a.packageForm.controls.package_name.hasError("required")&&a.packageForm.controls.package_name.touched),e.xp6(11),e.Q6J("ngIf",a.packageForm.controls.no_of_users.hasError("required")&&a.packageForm.controls.no_of_users.touched),e.xp6(1),e.Q6J("disabled",!a.packageForm.valid),e.xp6(14),e.Q6J("ngIf",a.selectedPackages&&a.selectedPackages.length>0),e.xp6(1),e.Q6J("formGroup",a.moduleForm),e.xp6(8),e.Q6J("ngIf",a.moduleForm.controls.module_id.hasError("required")&&a.moduleForm.controls.module_id.touched),e.xp6(7),e.Q6J("ngIf",a.moduleForm.controls.module_name.dirty),e.xp6(1),e.Q6J("disabled",!a.moduleForm.valid),e.xp6(4),e.Q6J("ngIf",a.modules.length>0),e.xp6(2),e.Q6J("disabled",!a.usecase_name.valid||0===a.modules.length||a.loading),e.xp6(2),e.hij(" ",null!=a.data&&a.data.id?"Update":"Save"," "))},directives:[f.O5,p.xw,p.SQ,p.yH,c.Fj,c.Q7,c.JJ,c.oH,c._Y,c.JL,p.Wh,c.sg,m.w9,c.u,f.sg,c.Wl,m.xv,c.On,d._L],styles:[".group-container .ng-select-container{box-shadow:none;border-radius:0!important}.loader[_ngcontent-%COMP%]{position:absolute;top:28%;left:38%;z-index:1}.usecase-add-btn[_ngcontent-%COMP%]{margin-top:4px!important;align-self:center;height:32px;line-height:16px}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;height:32px!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;width:24px!important;height:24px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]{background:#f3f7f9;border-radius:20px;padding:4px 8px;margin-right:2px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]:hover{background:#e7ecee}"]}),s})();function We(s,o){1&s&&e._UZ(0,"img",23)}function je(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAddNew()}),e._UZ(1,"i",25),e._uU(2," Add Usecase "),e.qZA()}}function Ve(s,o){1&s&&(e.TgZ(0,"th",26),e._uU(1,"ACTION"),e.qZA())}function Xe(s,o){if(1&s&&(e.ynx(0),e.TgZ(1,"span",32),e._uU(2),e.qZA(),e.BQk()),2&s){const t=o.$implicit;e.xp6(2),e.hij(" ",t.package_name," ")}}function Ke(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"td",33),e.TgZ(1,"a",34),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).onAddNew(n)}),e._UZ(2,"i",35),e.qZA(),e.TgZ(3,"a",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).onDelete(n)}),e._UZ(4,"i",37),e.qZA(),e.qZA()}}function et(s,o){if(1&s&&(e.TgZ(0,"tr",28),e.TgZ(1,"td",29),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,Xe,3,1,"ng-container",30),e.qZA(),e.YNc(5,Ke,5,0,"td",31),e.qZA()),2&s){const t=o.$implicit,a=o.even,n=e.oxw(2);e.ekj("even-row",a),e.xp6(2),e.hij(" ",t.usecase_name," "),e.xp6(2),e.Q6J("ngForOf",t.packages),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}function tt(s,o){if(1&s&&(e.ynx(0),e.YNc(1,et,6,5,"tr",27),e.BQk()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.usecases)}}function at(s,o){1&s&&(e.ynx(0),e.TgZ(1,"tr",38),e._uU(2," No record found "),e.qZA(),e.BQk())}function st(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-pagination",39),e.NdJ("pageChange",function(n){return e.CHM(t),e.oxw().onPageChange(n)}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("length",t.count)}}const nt=[{path:"",component:Fe},{path:"package-configuration",component:te},{path:"usecase_configuration",component:(()=>{class s{constructor(t,a,n,i){this.checkPermService=t,this.apiService=a,this.toastrService=n,this.modal=i,this.loading=!1,this.readonly=!1,this.showFilters=!1,this.cols=[{column:"usecase_name",title:"Usecase Name"},{column:"packages",title:"Packages"}],this.count=0,this.limit=10,this.offset=0,this.search={search_with:"",search_text:""},this.sorting={column:"",direction:""},this.slug="",this.usecases=[],this.count=this.usecases.length}ngOnInit(){let t=localStorage.getItem("limit");t&&(this.limit=+t),this.checkPermission(),this.getUsecases()}getUsecases(t){this.loading=!0,this.slug=t?`${_.N.pkgms}/usecase-configuration/?search_with=${t.search_with}&search_text=${t.search_text}&order_by=${t.column}&order=${t.direction}&offset=${this.offset}&limit=${this.limit}`:`${_.N.pkgms}/usecase-configuration/?offset=${this.offset}&limit=${this.limit}`,this.apiService.get(this.slug).subscribe(a=>{this.loading=!1;let n=a.data;this.usecases=n.data,this.count=n.count,this.showFilters=!!(t&&"all_columns"!==t.search_with&&t.search_text&&this.usecases.length>0)},a=>{this.loading=!1,[401,2,3,11,151,153,18,300,301].includes(a.error.status)?this.toastrService.error(a.error.message,"Access Unauthorized",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}):this.toastrService.error(a.error.message,"Error getting packages",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}checkPermission(){let t=this.checkPermService.checkPermissions();this.readonly=!(t&&t.length>0&&t.includes("RW"))}onAddNew(t){const a=this.modal.open(ze,{size:"md-md",scrollable:!0});t&&(a.componentInstance.data=t,a.componentInstance.title="Edit Usecase"),a.dismissed.subscribe(()=>{console.log("closed"),this.getUsecases()})}onDelete(t){const a=`${_.N.pkgms}/usecase-configuration/?id=${t.id}`;C.c.warn("Are you sure?","You want to delete this usecase?","Yes").subscribe(n=>{n.positive&&(this.loading=!0,this.apiService.delete(a).subscribe(i=>{this.getUsecases(),this.toastrService.success(i.message,"Usecase successfully deleted",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})},i=>{this.loading=!1,this.toastrService.error(i.error.message,"Error deleting usecase",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})}))})}onSort({column:t,direction:a}){this.headers.forEach(n=>{n.sortable!==t&&(n.direction="")}),"asc"===a||"desc"===a?(this.sorting={search_with:this.search.search_with,search_text:this.search.search_text,column:t,direction:a},this.getUsecases(this.sorting)):this.getUsecases()}onSearch(t){this.search={search_with:t.column,search_text:t.search,column:this.sorting.column,direction:this.sorting.direction},this.getUsecases(this.search)}onPageChange(t){this.offset=t.offset,this.limit=t.pageSize,this.getUsecases({search_with:this.search.search_with,search_text:this.search.search_text,column:this.sorting.column,direction:this.sorting.direction})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.$),e.Y36(P.s),e.Y36(b._W),e.Y36(d.FF))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-usecase-list"]],viewQuery:function(t,a){if(1&t&&e.Gf(y.x,5),2&t){let n;e.iGM(n=e.CRH())&&(a.headers=n)}},decls:28,vars:10,consts:[[1,"card","w-100-p",2,"border","none","height","100%"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],[1,"fs-14","fw-600","p-16","pt-10","pb-10","mb-0",2,"border-bottom","1px solid #ececec"],["ngbTooltip","Usecase Name, Package Name, Action","triggers","mouseenter:mouseleave","container","body","placement","top",1,"ri-information-line","info","grey-400"],["fxLayout","row wrap",1,"p-16","w-100-p",2,"height","calc(100% - 40px)"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between start",1,"h-48","mb-10"],["fxFlex","60"],["fxFlex","50",3,"cols","showFilters","signal"],["fxLayout","row","fxLayoutAlign","end start","fxFlex","40"],[1,"w-210"],["fxFlex","","class","btn btn-success btn-round fs-14 fw-300","style","border-radius: 20px !important;",3,"click",4,"ngIf"],[1,"w-100-p",2,"height","calc(100% - 58px)"],[2,"display","flex","flex-direction","row","height","auto","max-height","calc(100% - 46px)"],[2,"overflow","auto","flex","1"],["fxFlex",""],[1,"table",2,"width","calc(100% - 1px)"],[2,"position","sticky","top","-1px"],["scope","col","sortable","usecase_name",3,"sort"],["scope","col","sortable","package_name",3,"sort"],["scope","col","class","w-164",4,"ngIf"],[2,"height","calc(100% - 30px)"],[4,"ngIf"],[3,"length","pageChange",4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],["fxFlex","",1,"btn","btn-success","btn-round","fs-14","fw-300",2,"border-radius","20px !important",3,"click"],[1,"ri-add-circle-fill"],["scope","col",1,"w-164"],["role","row",3,"even-row",4,"ngFor","ngForOf"],["role","row"],["width","200px",1,"dtr-control","sorting_1"],[4,"ngFor","ngForOf"],["fxLayoutGap","8px",4,"ngIf"],[1,"grp-chips"],["fxLayoutGap","8px"],["type","button","ngbTooltip","Edit",1,"btn","btn-icon","btn-info","btn-xs",3,"click"],[1,"ri-pencil-fill"],["type","button","ngbTooltip","Delete",1,"btn","btn-icon","btn-danger","btn-xs",3,"click"],[1,"ri-delete-bin-2-fill"],["colspan","3"],[3,"length","pageChange"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,We,1,0,"img",1),e.TgZ(2,"h3",2),e._uU(3,"Usecase Configuration "),e._UZ(4,"i",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"app-search",7),e.NdJ("signal",function(i){return a.onSearch(i)}),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.YNc(11,je,3,0,"button",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e.TgZ(15,"div",14),e.TgZ(16,"table",15),e.TgZ(17,"thead",16),e.TgZ(18,"tr"),e.TgZ(19,"th",17),e.NdJ("sort",function(i){return a.onSort(i)}),e._uU(20,"USECASE NAME"),e.qZA(),e.TgZ(21,"th",18),e.NdJ("sort",function(i){return a.onSort(i)}),e._uU(22,"PACKAGE NAME"),e.qZA(),e.YNc(23,Ve,2,0,"th",19),e.qZA(),e.qZA(),e.TgZ(24,"tbody",20),e.YNc(25,tt,2,1,"ng-container",21),e.YNc(26,at,3,0,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,st,1,1,"app-pagination",22),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(5),e.ekj("mb-22",a.showFilters),e.xp6(2),e.Q6J("cols",a.cols)("showFilters",a.showFilters),e.xp6(3),e.Q6J("ngIf",!a.readonly),e.xp6(12),e.Q6J("ngIf",!a.readonly),e.xp6(2),e.Q6J("ngIf",!a.loading&&a.usecases.length>0),e.xp6(1),e.Q6J("ngIf",!a.loading&&0===a.usecases.length),e.xp6(1),e.Q6J("ngIf",a.usecases.length>0))},directives:[f.O5,d._L,p.xw,p.yH,p.Wh,G.g,y.x,f.sg,p.SQ,L.Q],styles:['@charset "UTF-8";.info[_ngcontent-%COMP%]{font-weight:400;margin-left:10px}.info[_ngcontent-%COMP%]:hover{text-decoration:underline}.loader[_ngcontent-%COMP%]{position:absolute;top:35%;left:45%;z-index:1}.table[_ngcontent-%COMP%]{margin-bottom:0}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#ececec}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{height:30px!important;padding:0 30px 0 4px!important;font-weight:700!important;font-size:12px!important;line-height:28px;position:relative;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{padding:4px!important;border:1px solid #e4eaec!important;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none!important;width:28px!important;height:28px!important;line-height:16px!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]{background:#f3f7f9;border-radius:20px;padding:4px 8px;margin-right:2px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]   .grp-chips[_ngcontent-%COMP%]:hover{background:#e7ecee}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]{position:absolute;right:0;padding-right:30px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:before{content:"\\2191";opacity:.5;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:before{content:"\\2193";opacity:.5;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]:after{content:"\\2193";opacity:1;position:absolute;right:2px;top:-2px}.table[_ngcontent-%COMP%]   .asc[_ngcontent-%COMP%]:after{content:"\\2191";opacity:1;position:absolute;right:8px;top:-2px}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#77d6e1!important;border-color:#77d6e1;color:#fff}.table[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#f96868!important;border-color:#f96868;color:#fff}.table[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000!important}.even-row[_ngcontent-%COMP%]{background-color:#f3f7f94d!important}']}),s})()}];let it=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[F.Bz.forChild(nt)]]}),s})(),ot=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[f.ez,c.UX,c.u5,it,d.IJ,l.o9,m.A0,w.U,k.t,O.o]]}),s})()},5585:(Q,T,u)=>{u.d(T,{Z:()=>f});class f{static removeWhiteSpaces(d){for(const l in d){let m=d[l];m&&(d[l]=m.toString().trim())}return d}static IntegerOnly(d){const l=d.keyCode;return l>=48&&l<=57||l>=96&&l<=105||8===l||9===l||46===l||l>=37&&l<=40}static DoubleOnly(d){const l=d.keyCode;return l>=48&&l<=57||l>=96&&l<=105||8===l||9===l||190===l||l>=37&&l<=40}static AlphaOnly(d,l=[]){const m=d.keyCode;return!!(null!=l&&l.length>0&&l.includes(m))||m>=65&&m<=90||8===m||9===m||32===m||46===m||m>=37&&m<=40}static GetRandomUsername(){return Math.random().toString(36).slice(-6)}static GetRandomPassword(d=6){const l="0123456789",m="@!$%*[]{}()",O="ABCDEFGHIJKLMNOPQRSTUVWXYZ",w="abcdefghijklmnopqrstuvwxyz";let k=O.charAt(Math.floor(Math.random()*O.length));for(let F=0;F<d-3;F++)k+=w.charAt(Math.floor(Math.random()*w.length));return k+=m.charAt(Math.floor(Math.random()*m.length)),k+=l.charAt(Math.floor(Math.random()*l.length)),k}}}}]);