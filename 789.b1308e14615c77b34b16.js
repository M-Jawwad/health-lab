"use strict";(self.webpackChunkprism_health_lab=self.webpackChunkprism_health_lab||[]).push([[789],{4395:(x,f,i)=>{i.d(f,{b:()=>_});var p=i(7393),r=i(3637);function _(e,l=r.P){return m=>m.lift(new d(e,l))}class d{constructor(l,m){this.dueTime=l,this.scheduler=m}call(l,m){return m.subscribe(new b(l,this.dueTime,this.scheduler))}}class b extends p.L{constructor(l,m,u){super(l),this.dueTime=m,this.scheduler=u,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(l){this.clearDebounce(),this.lastValue=l,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(h,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:l}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(l)}}clearDebounce(){const l=this.debouncedSubscription;null!==l&&(this.remove(l),l.unsubscribe(),this.debouncedSubscription=null)}}function h(e){e.debouncedNext()}},7275:(x,f,i)=>{i.r(f),i.d(f,{CoreModule:()=>N});var p=i(8583),r=i(665),_=i(1841),d=i(4330),b=i(6278),h=i(2340),e=i(7716),l=i(9344),m=i(852),u=i(1819);function T(n,a){1&n&&e._UZ(0,"img",11)}function Z(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1," Please provide email. "),e.qZA())}function v(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1," Please provide valid email. "),e.qZA())}function w(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Z,2,0,"div",19),e.YNc(2,v,2,0,"div",19),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.forgotPasswordForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.forgotPasswordForm.controls.email.hasError("pattern"))}}function y(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",12),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onEmailSubmit()}),e.TgZ(2,"div",13),e.TgZ(3,"label",14),e._uU(4," Email "),e.TgZ(5,"span",15),e._uU(6,"*"),e.qZA(),e.qZA(),e._UZ(7,"input",16),e.YNc(8,w,3,2,"ng-container",10),e.qZA(),e.TgZ(9,"button",17),e._uU(10,"Send"),e.qZA(),e.TgZ(11,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().backToLogin()}),e._uU(12,"Back to Login"),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.forgotPasswordForm),e.xp6(7),e.Q6J("ngIf",t.forgotPasswordForm.controls.email.touched),e.xp6(1),e.Q6J("disabled",!t.forgotPasswordForm.valid)}}function C(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1," Please provide OTP. "),e.qZA())}function A(n,a){1&n&&(e.TgZ(0,"div",20),e._uU(1," OTP must be of 6 digits. "),e.qZA())}function P(n,a){if(1&n&&(e.ynx(0),e.YNc(1,C,2,0,"div",19),e.YNc(2,A,2,0,"div",19),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.verifyOtpForm.controls.otp.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.verifyOtpForm.controls.otp.hasError("minlength"))}}function S(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",12),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onVerifyOTP()}),e.TgZ(2,"div",13),e.TgZ(3,"label",21),e._uU(4,"OTP"),e.qZA(),e._UZ(5,"input",22),e.YNc(6,P,3,2,"ng-container",10),e.qZA(),e.TgZ(7,"button",23),e._uU(8,"Verify"),e.qZA(),e.TgZ(9,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().backToLogin()}),e._uU(10,"Back to Login"),e.qZA(),e.TgZ(11,"a",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().onEmailSubmit()}),e._uU(12,"Didn't receive code?"),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.verifyOtpForm),e.xp6(5),e.Q6J("ngIf",t.verifyOtpForm.controls.otp.touched),e.xp6(1),e.Q6J("disabled",!t.verifyOtpForm.valid)}}let F=(()=>{class n{constructor(t,o,s,g){this.toastr=t,this.authService=o,this.router=s,this.route=g,this.otpBox=!1,this.requestType="reset",this.resetToken="",this.forgotPasswordForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email,r.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])}),this.verifyOtpForm=new r.cw({otp:new r.NI(null,[r.kI.required,r.kI.minLength(6)])}),this.loading=!1}ngOnInit(){let t=sessionStorage.getItem("reqType");null!=t&&(this.requestType=t),this.route.queryParams.subscribe(o=>{this.resetToken=o["reset-password-link"],console.log(this.resetToken,o)})}onSubmit(){this.loading=!0}onEmailSubmit(){this.loading=!0;const s={email:this.forgotPasswordForm.value.email,reset_token:this.resetToken,request_type:this.requestType};this.authService.sendOTP(`${h.N.userms}/users/send-otp-to-email`,s).subscribe(g=>{this.toastr.info("OTP sent to "+s.email,"Info",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3}),this.otpBox=!0,this.loading=!1},g=>{this.loading=!1,this.toastr.error(g.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3})})}onVerifyOTP(){this.loading=!0,this.requestType="reset";const g={otp:this.verifyOtpForm.value.otp,email:this.forgotPasswordForm.value.email};this.authService.verifyOTP(`${h.N.userms}/users/verify-email-otp`,g).subscribe(c=>{this.loading=!1,localStorage.setItem("email",g.email),sessionStorage.setItem("reqType",this.requestType),this.router.navigateByUrl("reset-password"),localStorage.setItem("reset-token",c.data.reset_token)},c=>{this.loading=!1,this.toastr.error(c.error.message,"Error",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}backToLogin(){this.router.navigateByUrl("")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l._W),e.Y36(m.e),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-forgot-password"]],decls:14,vars:4,consts:[["fxLayout","row wrap",1,"h-100-p",2,"background-image","url(assets/images/vodafone-background.jpg)","background-size","cover"],[1,"ml-12","h-28","white"],[1,"fs-18","fw-600",2,"font-family","'Roboto', sans-serif"],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",2,"height","calc(100% - 36px)","position","relative"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","8px",1,"w-280","h-388","pr-8","pl-8"],["src","assets/images/vf-bz-logo.png","alt","Logo",1,"w-200","h-66"],[1,"w-100-p","p-20","card","text-center",2,"height","calc(100% - 74px)","position","relative"],[1,"fs-40","icofont-lock","h-62"],[1,"fs-18","fw-600","mb-30","green-800"],[4,"ngIf"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"w-100-p","text-left","fw-700"],[1,"text-danger"],["type","email","formControlName","email",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["type","button",1,"btn","btn-success","btn-block","mb-12",3,"click"],["class","text-danger text-left",4,"ngIf"],[1,"text-danger","text-left"],["for","otp",1,"sr-only"],["type","text","formControlName","otp","minlength","6","required","","placeholder","OTP",1,"form-control"],["type","submit",1,"btn","btn-danger","btn-block",3,"disabled"],[1,"text-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.TgZ(2,"b",2),e._uU(3,"Vodafone Iot Customer Management Portal"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,T,1,0,"img",4),e.TgZ(6,"div",5),e._UZ(7,"img",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"h4",9),e._uU(11),e.qZA(),e.YNc(12,y,13,3,"ng-container",10),e.YNc(13,S,13,3,"ng-container",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.loading),e.xp6(6),e.Oqu(o.otpBox?"VERIFY OTP":"FORGOT PASSWORD"),e.xp6(1),e.Q6J("ngIf",!o.otpBox),e.xp6(1),e.Q6J("ngIf",o.otpBox))},directives:[u.xw,u.yH,u.Wh,p.O5,u.SQ,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.wO,r.Q7],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:40%;left:44%;z-index:1}"]}),n})();var q=i(5830),k=i(8030);function I(n,a){1&n&&e._UZ(0,"img",26)}function L(n,a){if(1&n&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}const M=[{path:"",component:(()=>{class n{constructor(t,o,s,g,c){this.toastr=t,this.authService=o,this.apiService=s,this.toastrService=g,this.router=c,this.model={username:"",password:"",remember_me:!1},this.hidePassword=!0,this.loading=!1,this.loginError=!1,this.errorMessage=null,this.menus=[]}ngOnInit(){const t=localStorage.getItem("username"),o=localStorage.getItem("password");(t||o)&&(this.model.username=t,this.model.password=o,this.model.remember_me=!0)}onSubmit(){this.loading=!0,this.model.remember_me&&(localStorage.setItem("username",this.model.username),localStorage.setItem("password",this.model.password));const t=this.model;this.authService.login(t.username,t.password).subscribe(o=>{this.getPaginationSettings(),o.data.is_change_password?(this.router.navigateByUrl("reset-password"),localStorage.setItem("email",this.model.username),localStorage.setItem("reset-token",o.data.reset_token),this.loading=!1):this.getMenu()},o=>{console.error(o),this.toastr.error(o.error.message,"Error",{progressBar:!0,progressAnimation:"decreasing",timeOut:3e3}),this.errorMessage=o.message,this.loading=!1})}onForgotPassword(){sessionStorage.setItem("reqType","forgot"),this.router.navigateByUrl("forgot-password")}getMenu(){return this.apiService.get(`${h.N.userms}/users/menu-preferences`).subscribe(o=>{if(this.loading=!1,this.menus=o.data,localStorage.setItem("menu",JSON.stringify(this.menus)),this.menus[0].is_parent){if(this.menus[0].is_parent&&this.menus[0].sub_menu)for(let s=0;s<this.menus[0].sub_menu.length;s++){const g=this.menus[0].sub_menu[0].route;setTimeout(()=>{this.router.navigateByUrl(`admin/${g}`)},2e3)}}else setTimeout(()=>{this.router.navigateByUrl(`admin/${this.menus[0].route}`)},2e3)},o=>{this.loading=!1,this.toastr.error(o.error.message,"Error",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}getSortedArray(t){return t.sort((s,g)=>s.name>g.name?1:-1)}getPaginationSettings(){this.apiService.get(`${h.N.userms}/setting/pagination-setting/?id=1`).subscribe(o=>{localStorage.setItem("limit",o.data.data.item_per_page)},o=>{this.toastrService.error(o.error.message,"Error getting pagination settings",{progressAnimation:"decreasing",progressBar:!0,timeOut:3e3})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l._W),e.Y36(m.e),e.Y36(q.s),e.Y36(l._W),e.Y36(d.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:8,consts:[["fxLayout","row wrap",1,"h-100-p","bg-theme"],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",2,"height","calc(100% - 36px)","position","relative"],["class","loader","src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutGap","8px",1,"w-280","h-418","pr-8","pl-8"],["src","assets/images/vf-bz-logo.png","alt","Logo",1,"w-200","h-66"],[1,"w-100-p","p-20","card","text-center",2,"height","calc(100% - 74px)"],[1,"fs-40","icofont","icofont-lock","h-62"],[1,"fs-18","fw-600","mb-30","green-800"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],[1,"sr-only"],["name","email","type","email","placeholder","Email","maxlength","50","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-12"],["name","password","maxlength","50","placeholder","Password","required","","id","password",1,"form-control",3,"ngModel","type","ngModelChange"],["for","password",1,"input-group-text",3,"click"],[3,"ngClass"],["class","mb-10 text-left","style","margin-top: -12px; color: red;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between start",2,"clear","both"],["fxLayout","row",1,"checkbox-custom","checkbox-inline"],["type","checkbox","id","inputCheckbox","name","checkbox",3,"ngModel","ngModelChange"],["for","inputCheckbox",1,"ml-8"],[1,"pull-left",2,"cursor","pointer",3,"click"],["type","submit",1,"btn","btn-danger","btn-block",3,"disabled"],[1,"ml-12","h-28","white"],[1,"fs-18","fw-600",2,"font-family","'Roboto', sans-serif"],["src","/assets/images/block-loader.gif","alt","Loading","width","150px","height","150px",1,"loader"],[1,"mb-10","text-left",2,"margin-top","-12px","color","red"]],template:function(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,I,1,0,"img",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"div",5),e._UZ(6,"i",6),e.TgZ(7,"h4",7),e._uU(8,"LOGIN"),e.qZA(),e.TgZ(9,"form",8,9),e.NdJ("ngSubmit",function(){return e.CHM(s),e.MAs(10).form.valid&&o.onSubmit()}),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"Email"),e.qZA(),e.TgZ(14,"input",12),e.NdJ("ngModelChange",function(c){return o.model.username=c}),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"label",11),e._uU(17,"Password"),e.qZA(),e.TgZ(18,"input",14),e.NdJ("ngModelChange",function(c){return o.model.password=c}),e.qZA(),e.TgZ(19,"span",15),e.NdJ("click",function(){return o.hidePassword=!o.hidePassword}),e._UZ(20,"i",16),e.qZA(),e.qZA(),e.YNc(21,L,2,1,"div",17),e.TgZ(22,"div",18),e.TgZ(23,"div",19),e.TgZ(24,"input",20),e.NdJ("ngModelChange",function(c){return o.model.remember_me=c}),e.qZA(),e.TgZ(25,"label",21),e._uU(26,"Remember me"),e.qZA(),e.qZA(),e.TgZ(27,"a",22),e.NdJ("click",function(){return o.onForgotPassword()}),e._uU(28,"Forgot password?"),e.qZA(),e.qZA(),e.TgZ(29,"button",23),e._uU(30,"Sign in"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"h4",24),e.TgZ(32,"b",25),e._uU(33,"Vodafone Iot Customer Management Portal"),e.qZA(),e.qZA(),e.qZA()}if(2&t){const s=e.MAs(10);e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(12),e.Q6J("ngModel",o.model.username),e.xp6(4),e.Q6J("ngModel",o.model.password)("type",o.hidePassword?"password":"text"),e.xp6(2),e.Q6J("ngClass",o.hidePassword?"ri-eye-line":"ri-eye-off-line"),e.xp6(1),e.Q6J("ngIf",o.loginError),e.xp6(3),e.Q6J("ngModel",o.model.remember_me),e.xp6(5),e.Q6J("disabled",!s.valid||o.loading)}},directives:[u.xw,u.yH,u.Wh,p.O5,u.SQ,r._Y,r.JL,r.F,r.Fj,r.nD,r.Q7,r.JJ,r.On,p.mk,k.oO,r.Wl],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:35%;left:44%;z-index:1}"]}),n})()},{path:"reset-password",component:b.p},{path:"forgot-password",component:F}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.Bz.forChild(M)],d.Bz]}),n})();var J=i(5566),U=i(3633);let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,r.u5,r.UX,_.JF,O,U.IJ,J.o9]]}),n})()}}]);